"use strict";function t(t){return Array.isArray(t)&&(!(t.length>0)||"string"==typeof t[0])}function n(n){return Array.isArray(n)&&(!(n.length>0)||!t(n))}function e(t,n){var e="OffscreenCanvas"in window,i=document.createElement("canvas"),r=e?i.transferControlToOffscreen():i;r.width=n;var s=r.getContext("2d");return s?t.reduce((function(t,e){var i=function(t,n,e,i){var r=t.text.split("").reduce((function(t,n){var e=t[t.length-1]||"",i=e.slice(-1);return" "===n&&" "!==i||" "!==n&&" "===i?[].concat(t,[n]):[].concat(t.slice(0,-1),[""+e+n])}),[]).reduce((function(e,r){i.font=t.font;var s=i.measureText(r).width,a=e.lastLineWidth+s;if(a<=n){var c=[].concat(e.lines.slice(-1),[r]).join("");return{lastLineWidth:a,lines:[].concat(e.lines.slice(0,-1),[c])}}if(s>n&&0===e.lastLineWidth)return{lastLineWidth:s,lines:[].concat(e.lines.slice(0,-1),[r])};var l=e.lines.slice(-1).join(""),o=[].concat(e.lines.slice(0,-1),[l.trimEnd()]);return 0===r.trim().length?{lastLineWidth:0,lines:[].concat(o,[""])}:{lastLineWidth:s,lines:[].concat(o,[r])}}),{lastLineWidth:e,lines:[]});return{lastLineWidth:r.lastLineWidth,text:r.lines.join("\n")}}(e,n,t.lastLineWidth,s);return{lastLineWidth:i.lastLineWidth,lines:[].concat(t.lines,[i.text])}}),{lastLineWidth:0,lines:[]}).lines:(console.warn("No canvas context was found, so the string was left as is!"),t.map((function(t){return t.text})))}Object.defineProperty(exports,"__esModule",{value:!0});var i=/(\r\n|\n|\r)/gm;function r(t){return t.replace(i," ")}exports.default=function(i,s,a){var c=function(e,i){return n(e)?e.map((function(t){var n=t.font;return{text:r(t.text),font:n||i}})):t(e)?e.map((function(t){return{text:r(t),font:i}})):[{text:r(e),font:i}]}(i,a);return t(i)||n(i)?e(c,s):e(c,s)[0]};
//# sourceMappingURL=break-styled-lines.cjs.production.min.js.map
