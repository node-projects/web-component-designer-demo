import{g as t,f as e,h as n,r as i,c as o,H as s,a as r,F as a}from"./p-3e097046.js";import{h as l,d,e as c,u as h,o as u,b as f,i as v,a as p,f as g,D as b,l as m,m as y,n as w,p as x,q as k,r as C,c as z,s as M,v as P,w as L,x as H,y as A,z as O,A as T,B as _,C as S,E as I,F as R,G as D,H as N,I as E,J as V,K as j,L as B,M as $,N as U,O as K,P as F,t as W,Q as q,R as Y,S as X,k as G,j as J,g as Q,U as Z,T as tt,V as et}from"./p-30cfd1fe.js";function nt(t){if(!t||t===void 0||t==="")return;let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:void 0}function it(t){return t?(t=>{if(!!t)return`#${t.map((t=>t.toString(16).padStart(2,"0"))).join("")}`})(ot(t)):void 0}function ot(t){let e=t.match(/([.\d]+),\s*([.\d]+),\s*([.\d]+)/);if(!!e)return e.splice(1,3).map((t=>Number(t)))}function st(t){return t.changedTouches?t.changedTouches[0]:t}function rt(t,e){let n;return(...i)=>{let o=()=>t(...i);n&&clearTimeout(n),n=setTimeout(o,e&&e>0?e:300)}}function at(){if(!window)return!1;let t=window.matchMedia("(any-pointer:coarse)").matches,e=window.matchMedia("(any-pointer:fine)").matches;return t&&!e}function lt(){if(!window||!navigator)return!1;let t=vt();return/iPhone|iPod/i.test(t)||dt()}function dt(){if(!window||!navigator)return!1;let t=vt();return/iPad/i.test(t)?!0:/Macintosh/i.test(t)&&at()}function ct(){if(!window||!navigator)return!1;let t=vt();return/firefox/i.test(t)}var ht=()=>/apple/i.test(navigator.vendor);function ut(){let t=document.documentElement.getAttribute("dir");return t!==null&&t==="rtl"}var ft=()=>{if(!window)return!1;let t=vt();return/android|sink/i.test(t)},vt=()=>navigator.userAgent||navigator.vendor||window.opera;const pt=(t,e,n)=>{const i=t.get(e);if(!i){t.set(e,[n])}else if(!i.includes(n)){i.push(n)}};const gt=(t,e)=>{let n;return(...i)=>{if(n){clearTimeout(n)}n=setTimeout((()=>{n=0;t(...i)}),e)}};const bt=t=>!("isConnected"in t)||t.isConnected;const mt=gt((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(bt))}}),2e3);const yt=()=>{if(typeof t!=="function"){return{}}const n=new Map;return{dispose:()=>n.clear(),get:e=>{const i=t();if(i){pt(n,e,i)}},set:t=>{const i=n.get(t);if(i){n.set(t,i.filter(e))}mt(n)},reset:()=>{n.forEach((t=>t.forEach(e)));mt(n)}}};const wt=t=>typeof t==="function"?t():t;const xt=(t,e=((t,e)=>t!==e))=>{const n=wt(t);let i=new Map(Object.entries(n!==null&&n!==void 0?n:{}));const o={dispose:[],get:[],set:[],reset:[]};const s=()=>{var e;i=new Map(Object.entries((e=wt(t))!==null&&e!==void 0?e:{}));o.reset.forEach((t=>t()))};const r=()=>{o.dispose.forEach((t=>t()));s()};const a=t=>{o.get.forEach((e=>e(t)));return i.get(t)};const l=(t,n)=>{const s=i.get(t);if(e(n,s,t)){i.set(t,n);o.set.forEach((e=>e(t,n,s)))}};const d=typeof Proxy==="undefined"?{}:new Proxy(n,{get(t,e){return a(e)},ownKeys(t){return Array.from(i.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return i.has(e)},set(t,e,n){l(e,n);return true}});const c=(t,e)=>{o[t].push(e);return()=>{kt(o[t],e)}};const h=(e,n)=>{const i=c("set",((t,i)=>{if(t===e){n(i)}}));const o=c("reset",(()=>n(wt(t)[e])));return()=>{i();o()}};const u=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(c("set",e.set))}if(e.get){t.push(c("get",e.get))}if(e.reset){t.push(c("reset",e.reset))}if(e.dispose){t.push(c("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const f=t=>{const e=i.get(t);o.set.forEach((n=>n(t,e,e)))};return{state:d,get:a,set:l,on:c,onChange:h,use:u,dispose:r,reset:s,forceUpdate:f}};const kt=(t,e)=>{const n=t.indexOf(e);if(n>=0){t[n]=t[t.length-1];t.length--}};const Ct=(t,e)=>{const n=xt(t,e);n.use(yt());return n};const zt=[l,d,c,h,u,f,v,p,g];const Mt={palette:b,command:"native",style:{list:false,align:true,fontSize:true,backgroundColor:true}};const Pt=["div","p","span"];const Lt=["h1","h2","h3","div","p","blockquote"];const Ht=["placeholder","class","spellcheck","contenteditable","data-gramm","data-gramm_id","data-gramm_editor","data-gr-id","autocomplete"];const At="paragraph_id";const Ot={paragraphIdentifier:At,exclude:[...Ht,At]};const{state:Tt,onChange:_t}=Ct({plugins:zt,toolbar:Mt,placeholders:Pt,textParagraphs:Lt,menus:undefined,attributes:Ot});const St={state:Tt,onChange:_t};const{state:It,onChange:Rt}=Ct({ref:undefined,size:undefined});const Dt={state:It,onChange:Rt};const Nt={lang:"en",plugins:{huge_title:"Huge title",large_title:"Large title",small_title:"Small title",paragraph:"Paragraph",separator:"Separator",unordered_list:"Bulleted list",ordered_list:"Numbered list",image:"Image",code:"Code",no_matches:"No matches",blockquote:"Blockquote"},add:{placeholder:'Press "/" for plugins',add_element:"Add a new part"},toolbar:{align_left:"Align left",align_center:"Align center",align_right:"Align right",font_size:"Font size",list_ol:"Ordered list",list_ul:"Unordered list",style_list:"Style list",style_align:"Style alignment",style_font_size:"Style font size",style_color:"Style color",style_background:"Style background",link:"Create or remove link",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough"},menus:{img_width_original:"Original image width",img_width_large:"Large image width",img_width_medium:"Medium image width",img_width_small:"Small image width",img_delete:"Delete image"}};const{state:Et,onChange:Vt}=Ct(Nt);const jt=async()=>{const{es:t}=await import("./p-581b5d9c.js");return t};const Bt=async()=>{const{de:t}=await import("./p-3fc56869.js");return t};const $t=async()=>{const{nl:t}=await import("./p-29dcf7a5.js");return t};const Ut=async()=>{const{ja:t}=await import("./p-c6278728.js");return t};const Kt=async()=>{const{zhCn:t}=await import("./p-1444953f.js");return t};const Ft=async()=>{const{fr:t}=await import("./p-d62912e5.js");return t};const Wt=()=>Nt;Vt("lang",(async t=>{let e;switch(t){case"es":e=await jt();break;case"de":e=await Bt();break;case"nl":e=await $t();break;case"ja":e=await Ut();break;case"zh-cn":e=await Kt();break;case"fr":e=await Ft();break;default:e=Wt()}Object.assign(Et,Object.assign({custom:Et.custom},e))}));const qt={state:Et};const Yt=({code:t,keyCode:e})=>["Enter"].includes(t)&&e!==229;const Xt=()=>at()||ft()||lt();const Gt=t=>{if(Jt(t)&&Qt(t)){return Zt(t)}return m()};const Jt=t=>(t===null||t===void 0?void 0:t.getRootNode())instanceof ShadowRoot;const Qt=t=>(t===null||t===void 0?void 0:t.getRootNode()).getSelection;const Zt=t=>t.getRootNode().getSelection();const te=t=>{const e=Gt(t);if(!e||e.rangeCount<=0){return{range:null,selection:null}}return{selection:e,range:e.getRangeAt(0)}};const ee=t=>{const{startOffset:e,endOffset:n}=t;const i=e!==n;if(!i){return}t.extractContents()};const ne=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}));const ie=":host{display:block;position:absolute;top:var(--actions-top);left:var(--stylo-add-left, 8px);transition:top 0.1s ease;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}button{display:flex;position:relative;isolation:isolate;overflow:hidden;background:transparent;border:none;outline:none;cursor:pointer;transition:color 0.25s ease-out, background 0.25s ease-out, transform 0.15s ease-out;flex-direction:column;justify-content:center;align-items:center;background:var(--stylo-add-background);border-radius:var(--stylo-add-border-radius, 50%);border:var(--stylo-add-border);width:var(--stylo-add-size, 1.4rem);height:var(--stylo-add-size, 1.4rem);padding:var(--stylo-add-padding, 0.2rem);color:var(--stylo-add-color, var(--medium))}button:active{box-shadow:none;transform:translateX(1px) translateY(1px)}button:hover,button:focus{color:var(--stylo-add-color-hover, var(--light-contrast));background:var(--stylo-add-background-hover)}svg{width:100%;height:100%}";const oe=class{constructor(t){i(this,t);this.selectParagraph=o(this,"selectParagraph",7);this.listPlugins=o(this,"listPlugins",7);this.hidePlugins=o(this,"hidePlugins",7);this.debouncePlaceholder=rt((()=>this.addPlaceholder()),350);this.onKeyDown=t=>{const{code:e}=t;if(!["ArrowDown","ArrowUp"].includes(e)&&!Yt(t)){this.removePlaceholder()}if(["Backspace","Delete"].includes(e)){this.displayOnMutations()}};this.onFocusout=()=>{if(!lt()){return}this.top=undefined};this.initParagraph=({target:t,onlyIfEmptyParagraph:e})=>{if(!t){this.hide();return}const n=y({element:t,container:Dt.state.ref});this.paragraph=w(n);if(!this.paragraph){this.hide();return}if(x({paragraph:this.paragraph})){this.hide();return}if(e&&!k({paragraph:this.paragraph})){this.hide();return}this.top=this.paragraph.offsetTop;this.editPlaceholder();this.selectParagraph.emit(this.paragraph)};this.top=undefined}componentDidLoad(){window===null||window===void 0?void 0:window.addEventListener("resize",(()=>this.hide()));document===null||document===void 0?void 0:document.addEventListener("focusout",this.onFocusout);this.destroyListener=Dt.onChange("ref",(()=>{this.removeContainerListener();this.addContainerListener()}));this.addContainerListener()}disconnectedCallback(){var t;window===null||window===void 0?void 0:window.removeEventListener("resize",(()=>this.hide()));document===null||document===void 0?void 0:document.removeEventListener("focusout",this.onFocusout);this.removeContainerListener();(t=this.destroyListener)===null||t===void 0?void 0:t.call(this)}addContainerListener(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown,{passive:true})}removeContainerListener(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown)}onKeyUp(t){const{code:e}=t;if(!["ArrowDown","ArrowUp","Backspace","Delete"].includes(e)&&!Yt(t)){if(this.top!==undefined){this.hide()}return}if(["ArrowDown","ArrowUp"].includes(e)){this.display({onlyIfEmptyParagraph:false});return}}onBeforeInput({data:t}){if(!["/"].includes(t)){this.hidePlugins.emit();return}if(!this.paragraph||!this.paragraph.isConnected){return}if(!k({paragraph:this.paragraph})){this.hidePlugins.emit();return}this.focusListPlugins()}onClick({target:t}){var e;this.display({onlyIfEmptyParagraph:false,target:((e=Dt.state.ref)===null||e===void 0?void 0:e.isEqualNode(t))?undefined:t})}onAddParagraphs({detail:t}){const{length:e,[e-1]:n}=t;this.initParagraph({target:n,onlyIfEmptyParagraph:false})}hide(){this.selectParagraph.emit(undefined);if(Xt()){return}this.top=undefined}display({onlyIfEmptyParagraph:t,target:e}){var n;this.initParagraph({target:e!==null&&e!==void 0?e:(n=Gt(Dt.state.ref))===null||n===void 0?void 0:n.anchorNode,onlyIfEmptyParagraph:t})}displayOnMutations(){const t=(t,e)=>{e.disconnect();this.display({onlyIfEmptyParagraph:true})};const e=new MutationObserver(t);e.observe(Dt.state.ref,{childList:true,subtree:true,characterData:true})}editPlaceholder(){this.removePlaceholder();this.debouncePlaceholder()}addPlaceholder(){var t;if(!k({paragraph:this.paragraph})){return}if(x({paragraph:this.paragraph})){return}if(!St.state.placeholders.includes((t=this.paragraph)===null||t===void 0?void 0:t.nodeName.toLowerCase())){return}const e=window.getComputedStyle(this.paragraph,":before");const n=window.getComputedStyle(this.paragraph,":after");const i=['""',"none"];if(!i.includes(e.getPropertyValue("content"))||!i.includes(n.getPropertyValue("content"))){return}this.paragraph.setAttribute("placeholder",qt.state.add.placeholder)}removePlaceholder(){var t;const e=(t=Dt.state.ref)===null||t===void 0?void 0:t.querySelectorAll("[placeholder]");e===null||e===void 0?void 0:e.forEach((t=>t.removeAttribute("placeholder")))}selectPlugins(t){if(!this.paragraph||!Dt.state.ref){return}t.stopPropagation();if(k({paragraph:this.paragraph})&&!x({paragraph:this.paragraph})){this.focusListPlugins();return}C({paragraph:this.paragraph});const e=(t,e)=>{e.disconnect();const n=t.reduce(((t,{addedNodes:e})=>[...t,...Array.from(e)]),[]);const i=n.find((t=>t.nodeName.toLowerCase()==="div"));M(i);this.listPlugins.emit(i)};const n=new MutationObserver(e);n.observe(Dt.state.ref,{childList:true,subtree:true});const i=z({nodeName:"div"});this.paragraph.after(i);this.hide()}focusListPlugins(){C({paragraph:this.paragraph});this.listPlugins.emit(this.paragraph)}render(){const t=this.top===undefined?{display:"none"}:{"--actions-top":`${this.top}px`};return n(s,{style:t},n("button",{type:"button","aria-label":qt.state.add.add_element,onClick:t=>this.selectPlugins(t),onKeyDown:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation()},n(ne,null)))}};oe.style=ie;const se=":host{display:flex;align-items:center;justify-content:center;flex-wrap:var(--stylo-color-flex-wrap, wrap);overflow:var(--stylo-color-overflow, visible);padding:var(--stylo-color-padding, 8px);width:var(--stylo-color-width, 298px)}button{width:var(--stylo-color-button-width, 28px);height:var(--stylo-color-button-height, 28px);margin:var(--stylo-color-button-margin, 4px);padding:0;outline:var(--stylo-color-button-outline, none);cursor:pointer;border:1px solid var(--stylo-palette-border-color, var(--stylo-palette-color-hex));border-radius:var(--stylo-color-button-border-radius, 1px);background:var(--stylo-palette-color-hex)}button.selected{box-shadow:0 0 4px 4px rgba(var(--stylo-palette-box-shadow-color, var(--stylo-palette-color-rgb)), 0.4)}button:not(.selected):hover,button:not(.selected):focus{box-shadow:0 0 2px 2px rgba(var(--stylo-palette-box-shadow-color, var(--stylo-palette-color-rgb)), 0.4)}";const re=class{constructor(t){i(this,t);this.colorChange=o(this,"colorChange",7);this.debounceInitSelectedColorPalette=rt((()=>{this.selectedColorPalette=this.initSelectedColorPalette();this.selectedCustomColorRgb=!this.selectedColorPalette?this.selectedColorRgb:undefined}),150);this.selectColor=t=>{const e=t.detail;this.applyColorHexChange(e.hex,e.rgb);this.colorChange.emit(e)};this.palette=b;this.inputAlt="Input a color (hex)";this.colorHex=undefined;this.colorRgb=undefined;this.selectedColorHex=undefined;this.selectedColorRgb=undefined;this.selectedColorPalette=false;this.selectedCustomColorRgb=undefined}componentWillLoad(){this.selectedColorHex=this.colorHex;this.selectedColorRgb=this.colorRgb?this.colorRgb:nt(this.colorHex);this.selectedColorPalette=this.initSelectedColorPalette();if(!this.selectedColorPalette){this.selectedCustomColorRgb=this.selectedColorRgb}}async onColorHexChange(){this.applyColorHexChange(this.colorHex,undefined)}applyColorHexChange(t,e){this.selectedColorHex=t;this.selectedColorRgb=e;this.debounceInitSelectedColorPalette();this.palette=[...this.palette]}async onColorRgbChange(){this.selectedColorHex=undefined;this.selectedColorRgb=this.colorRgb;this.debounceInitSelectedColorPalette();this.palette=[...this.palette]}pickColor(t){if(!this.palette||this.palette.length<=0){return}this.selectedColorHex=t.color?t.color.hex:undefined;this.selectedColorRgb=t.color?t.color.rgb:undefined;this.colorChange.emit(t.color);this.selectedColorPalette=true;this.selectedCustomColorRgb=undefined}isHexColorSelected(t){if(!t||!t.color||!t.color.hex){return false}if(!this.selectedColorHex){return false}return this.selectedColorHex.toUpperCase()===t.color.hex.toUpperCase()}isRgbColorSelected(t){if(!t||!t.color||!t.color.rgb){return false}if(!this.selectedColorRgb){return false}return this.selectedColorRgb.replace(/\s/g,"").toUpperCase()===t.color.rgb.replace(/\s/g,"").toUpperCase()}initSelectedColorPalette(){if(!this.palette||this.palette.length<=0){return false}const t=this.palette.findIndex((t=>this.isHexColorSelected(t)||this.isRgbColorSelected(t)));return t>-1}render(){return n(s,null,this.renderPalette(),this.renderInput())}renderPalette(){if(this.palette&&this.palette.length>0){return this.palette.map((t=>{const e={"--stylo-palette-color-hex":`${t.color.hex}`,"--stylo-palette-color-rgb":`${t.color.rgb}`};if(t.display){e["--stylo-palette-border-color"]=t.display.borderColor;e["--stylo-palette-box-shadow-color"]=t.display.boxShadowColor}return n("button",{"aria-label":t.alt,class:this.isHexColorSelected(t)||this.isRgbColorSelected(t)?"selected":undefined,style:e,onClick:e=>{e.stopPropagation();this.pickColor(t)}})}))}else{return undefined}}renderInput(){return n("stylo-color-input",{colorHex:this.selectedColorHex,colorRgb:this.selectedColorRgb,customColorRgb:this.selectedCustomColorRgb,inputAlt:this.inputAlt,onSelectHexColor:this.selectColor})}get el(){return r(this)}static get watchers(){return{colorHex:["onColorHexChange"],colorRgb:["onColorRgbChange"]}}};re.style=se;const ae=":host{display:flex;position:relative;margin:var(--stylo-color-input-margin, 4px);border-radius:var(--stylo-color-input-container-border-radius);border:var(--stylo-color-input-container-border)}span{width:var(--stylo-color-hash-width, 28px);height:var(--stylo-color-hash-height, 28px);display:inline-flex;justify-content:center;align-items:center;background:var(--stylo-color-hash-background, rgb(240, 240, 240) none repeat scroll 0 0);color:var(--stylo-color-hash-color, rgb(152, 161, 164));border-radius:var(--stylo-color-hash-border-radius, 4px 0 0 4px)}input{color:var(--stylo-color-input-color, rgb(102, 102, 102));background:var(--stylo-color-input-background, inherit);border:none;outline:none;height:var(--stylo-color-input-height, 28px);box-shadow:var(--stylo-color-input-box-shadow, rgb(240, 240, 240) 0 0 0 1px inset);border-radius:var(--stylo-color-input-border-radius, 0 4px 4px 0);padding:var(--stylo-color-input-padding, 0 4px);max-width:var(--stylo-color-input-max-width, 136px);font-family:var(--stylo-color-input-font-family, inherit)}";const le=class{constructor(t){i(this,t);this.selectHexColor=o(this,"selectHexColor",7);this.debounceSelectColor=rt((t=>this.emitColor(t)),500);this.colorHex=undefined;this.colorRgb=undefined;this.customColorRgb=undefined;this.inputAlt=undefined;this.color=undefined}async componentWillLoad(){this.color=this.initColorHex()}async watchColors(){this.color=this.initColorHex()}initColorHex(){if(this.colorHex){return this.colorHex}if(this.customColorRgb){return it(this.customColorRgb)}return it(this.colorRgb)}emitColor(t){const e=`#${t.replace("#","")}`;const n=nt(e);if(!n){return}this.selectHexColor.emit({hex:e,rgb:n})}render(){var t;return n(s,null,n("span",null,"#"),n("input",{type:"text",name:"color-picker","aria-label":this.inputAlt,onInput:t=>this.debounceSelectColor(t.target.value),value:(t=this.color)===null||t===void 0?void 0:t.replace("#","")}))}static get watchers(){return{colorHex:["watchColors"],colorRgb:["watchColors"],customColorRgb:["watchColors"]}}};le.style=ae;const de=({editorRef:t,addedParagraphs:e})=>ue({editorRef:t,detail:e,message:"addParagraphs"});const ce=({editorRef:t,removedParagraphs:e})=>ue({editorRef:t,detail:e,message:"deleteParagraphs"});const he=({editorRef:t,updatedParagraphs:e})=>ue({editorRef:t,detail:e,message:"updateParagraphs"});const ue=({editorRef:t,message:e,detail:n})=>{const i=new CustomEvent(e,{detail:n,bubbles:true});t===null||t===void 0?void 0:t.dispatchEvent(i)};const fe=({mutations:t,container:e})=>{if(!t||t.length<=0){return[]}const n=t.filter((({addedNodes:t})=>(t===null||t===void 0?void 0:t.length)>0)).reduce(((t,{addedNodes:e})=>[...t,...Array.from(e)]),[]);return we({nodes:n,container:e})};const ve=({mutations:t,container:e})=>t.filter((({addedNodes:t})=>(t===null||t===void 0?void 0:t.length)>0)).filter((({addedNodes:t})=>!P({element:t[0],container:e}))).filter((({addedNodes:t})=>!k({paragraph:y({element:t[0],container:e})})));const pe=({removedNodes:t,paragraphIdentifier:e})=>Array.from(t).find((t=>{var n;return!L(t)&&((n=w(t))===null||n===void 0?void 0:n.hasAttribute(e))}))!==undefined;const ge=({mutations:t,paragraphIdentifier:e})=>t.filter((({removedNodes:t})=>(t===null||t===void 0?void 0:t.length)>0)).filter((({removedNodes:t})=>!pe({removedNodes:t,paragraphIdentifier:e})));const be=({mutations:t,container:e,paragraphIdentifier:n})=>{if(!t||t.length<=0){return[]}return t.filter((({removedNodes:t})=>(t===null||t===void 0?void 0:t.length)>0)).reduce(((t,{removedNodes:i,previousSibling:o})=>{const s=xe({nodes:Array.from(i),paragraphIdentifier:n});return[...t,...s.map((t=>({paragraph:t,previousSibling:me({container:e,previousSibling:o})})))]}),[])};const me=({previousSibling:t,container:e})=>{if(!t){return undefined}if(e.isEqualNode(t)){return undefined}if(!L(t)){return t}return me({previousSibling:t.previousSibling,container:e})};const ye=({mutations:t,container:e})=>{if(!t||t.length<=0){return[]}const n=t.reduce(((t,{target:e})=>[...t,e]),[]);return[...new Set(n.map((t=>y({element:t,container:e}))).filter((t=>t!==undefined&&(t===null||t===void 0?void 0:t.nodeType)!==Node.TEXT_NODE&&(t===null||t===void 0?void 0:t.nodeType)!==Node.COMMENT_NODE)))]};const we=({nodes:t,container:e})=>t.filter((t=>P({element:t,container:e}))).filter((t=>(t===null||t===void 0?void 0:t.nodeType)!==Node.TEXT_NODE&&(t===null||t===void 0?void 0:t.nodeType)!==Node.COMMENT_NODE));const xe=({nodes:t,paragraphIdentifier:e})=>t.filter((t=>!L(t))).map((t=>t)).filter((t=>t===null||t===void 0?void 0:t.hasAttribute(e)));const ke=({container:t,filterEmptySelection:e})=>{const{range:n,selection:i}=te(t);if(!n||e&&(i===null||i===void 0?void 0:i.toString().length)===0){return undefined}const o=w(y({element:n.startContainer,container:t}));const s=w(y({element:n.endContainer,container:t}));if(!s||!o||(o===null||o===void 0?void 0:o.isSameNode(s))){return o?[o]:[]}if(o.nextElementSibling.isSameNode(s)){return[o,s]}const r=[];let a=o.nextElementSibling;while(a!==null&&!a.isSameNode(s)){r.push(w(a));a=a.nextElementSibling}return[o,...r,s]};const Ce=({mutations:t,excludeAttributes:e})=>{const n=t.filter((({attributeName:t})=>t!==null));const i=n.find((({attributeName:t})=>e.includes(t)));if(i!==undefined){return[]}return n};class ze{constructor(){this.stackDataMutations=[];this.debounceUpdateInput=rt((()=>this.updateData()),500);this.onTreeMutation=async t=>{const e=await this.addParagraphs(t);this.deleteParagraphs(t);this.updateAddedNodesParagraphs({addedParagraphs:e,mutations:t})};this.onAttributesMutation=t=>{this.updateParagraphs({mutations:Ce({mutations:t,excludeAttributes:St.state.attributes.exclude})})};this.onDataMutation=t=>{this.stackDataMutations.push(...t);this.debounceUpdateInput()}}init({editorRef:t}){this.editorRef=t;this.treeObserver=new MutationObserver(this.onTreeMutation);this.treeObserver.observe(Dt.state.ref,{childList:true,subtree:true});this.attributesObserver=new MutationObserver(this.onAttributesMutation);this.attributesObserver.observe(Dt.state.ref,{attributes:true,subtree:true});this.dataObserver=new MutationObserver(this.onDataMutation);this.dataObserver.observe(Dt.state.ref,{characterData:true,subtree:true})}destroy(){var t,e,n;(t=this.treeObserver)===null||t===void 0?void 0:t.disconnect();(e=this.attributesObserver)===null||e===void 0?void 0:e.disconnect();(n=this.dataObserver)===null||n===void 0?void 0:n.disconnect()}async addParagraphs(t){if(!Dt.state.ref){return[]}const e=fe({mutations:t,container:Dt.state.ref});if(e.length<=0){return[]}await Promise.all(e.map((t=>H({paragraph:t,attributeName:St.state.attributes.paragraphIdentifier}))));de({editorRef:this.editorRef,addedParagraphs:e});return e}deleteParagraphs(t){if(!Dt.state.ref){return}if(!t||t.length<=0){return}const e=t.reduce(((t,{addedNodes:e})=>[...t,...Array.from(e)]),[]);const n=t.reduce(((t,{removedNodes:e})=>[...t,...Array.from(e)]),[]);const i=n.filter((t=>!L(t))).filter((t=>e.find((e=>e.isEqualNode(t)))===undefined)).map((t=>w(t))).filter((t=>t===null||t===void 0?void 0:t.hasAttribute(St.state.attributes.paragraphIdentifier)));if(i.length<=0){return}ce({editorRef:this.editorRef,removedParagraphs:i})}updateAddedNodesParagraphs({mutations:t,addedParagraphs:e}){if(!Dt.state.ref){return}if(!t||t.length<=0){return}const n=ve({mutations:t,container:Dt.state.ref});const i=ge({mutations:t,paragraphIdentifier:St.state.attributes.paragraphIdentifier});this.updateParagraphs({mutations:[...n,...i],addedParagraphs:e})}updateData(){if(!this.stackDataMutations||this.stackDataMutations.length<=0){return}const t=[...this.stackDataMutations];this.stackDataMutations=[];this.updateParagraphs({mutations:t})}updateParagraphs({mutations:t,addedParagraphs:e=[]}){if(!Dt.state.ref){return}const n=ye({mutations:t,container:Dt.state.ref});if(n.length<=0){return}const i=t=>e.find((e=>e.isSameNode(t)))!==undefined;const o=n.filter((t=>!i(t)));if(o.length<=0){return}he({editorRef:this.editorRef,updatedParagraphs:o})}}const{state:Me,onChange:Pe,reset:Le}=Ct({undo:undefined,redo:undefined,observe:true});const He={state:Me,onChange:Pe,reset:Le};const Ae=t=>{const{range:e,selection:n}=te();if(!e){return undefined}const{anchorNode:i,focusNode:o}=n;const s=w(y({element:i,container:t}));const r=w(y({element:o,container:t}));if(!s||!r){return}return{startIndex:A(s),startIndexDepths:O({target:i,paragraph:y({element:i,container:t})}),startOffset:n.anchorOffset,endIndex:A(r),endIndexDepths:O({target:o,paragraph:y({element:o,container:t})}),endOffset:n.focusOffset,reverse:!i.isEqualNode(e.startContainer)}};const Oe=({selection:t,container:e})=>{if(!t){return}const{startIndex:n,startIndexDepths:i,startOffset:o,endIndex:s,endIndexDepths:r,endOffset:a,reverse:l}=t;const d=e.children[Math.min(n,e.children.length-1)];const c=e.children[Math.min(s,e.children.length-1)];const h=T({parent:d,indexDepths:i});const u=T({parent:c,indexDepths:r});if(!h||!u){return}if(h.textContent.length<o||u.textContent.length<a){return}const f=document.createRange();if(!l){f.setStart(h,o);f.setEnd(u,a)}else{f.setEnd(h,o);f.setStart(u,a)}const v=Gt(e);v===null||v===void 0?void 0:v.removeAllRanges();v===null||v===void 0?void 0:v.addRange(f);f.detach()};const Te=({container:t,data:e})=>{if(!He.state.undo){He.state.undo=[]}He.state.undo.push({changes:e.map((e=>({type:"input",target:t,data:e})))});He.state.redo=[]};const _e=({container:t,addRemoveParagraphs:e,updateParagraphs:n,selection:i})=>{if(e.length<=0&&n.length<=0){return}if(!He.state.undo){He.state.undo=[]}const o={changes:[{type:"paragraph",target:t,data:e.map((({outerHTML:t,index:e,mutation:n})=>({outerHTML:t,mutation:n,index:e})))},{type:"update",target:t,data:n}],selection:i};He.state.undo.push(o);He.state.redo=[]};const Se=()=>Re(He.state.undo);const Ie=()=>Re(He.state.redo);const Re=t=>{if(!t){return undefined}return t[t.length-1]};const De=async()=>Ee({popFrom:()=>He.state.undo=[...He.state.undo.slice(0,He.state.undo.length-1)],pushTo:t=>He.state.redo.push(t),undoChanges:Se()});const Ne=async()=>Ee({popFrom:()=>He.state.redo=[...He.state.redo.slice(0,He.state.redo.length-1)],pushTo:t=>He.state.undo.push(t),undoChanges:Ie()});const Ee=async({popFrom:t,pushTo:e,undoChanges:n})=>{if(!n){return}const i=Ae(Dt.state.ref);const{changes:o,selection:s}=n;let r=[];for(const t of o){r=[await Ve({undoChange:t}),...r]}Oe({container:Dt.state.ref,selection:s});e({changes:r,selection:i});t()};const Ve=async({undoChange:t})=>{const{type:e}=t;if(e==="input"){return je({undoChange:t})}if(e==="paragraph"){return Be({undoChange:t})}return $e({undoChange:t})};const je=async({undoChange:t})=>{var e;const{data:n,target:i}=t;const o=w(i);const{oldValue:s,offset:r,index:a,indexDepths:l}=n;const d=o.children[a];let c=T({parent:d,indexDepths:l});if(!c||!L(c)){const t=[...l];t.pop();let n=t.length<=0?c?c.parentNode:undefined:T({parent:d,indexDepths:[...t]});if(!n&&L((e=w(d))===null||e===void 0?void 0:e.lastChild)){c=w(d).lastChild}if(!c){if(!n){n=await Ye({paragraph:w(d)||o,container:o})}c=await We({parent:w(n),container:o})}}const{previousValue:h}=await qe({text:c,oldValue:s,container:o});_({element:c,offset:Math.max(Math.min(s.length>r?r:s.length,c.nodeValue.length),0)});return{type:"input",target:o,data:{index:a,indexDepths:O({target:c!==null&&c!==void 0?c:i,paragraph:d}),oldValue:h,offset:r+(h.length-s.length)}}};const Be=async({undoChange:t})=>{const{data:e,target:n}=t;const i=w(n);const o=e;let s=[];for(const t of o){const{index:e,outerHTML:n,mutation:o}=t;if(o==="add"){await Ke({container:i,index:e});s=[{outerHTML:n,index:e,mutation:"remove"},...s]}if(o==="remove"){await Ue({container:i,index:e,outerHTML:n});s=[{outerHTML:n,mutation:"add",index:e},...s]}}return Object.assign(Object.assign({},t),{data:s})};const $e=async({undoChange:t})=>{const{data:e,target:n}=t;const i=e;const o=w(n);const s=[];for(const t of i){const{index:e,outerHTML:n}=t;const{previousOuterHTML:i}=await Fe({container:o,index:e,outerHTML:n});s.push({index:e,outerHTML:i})}return Object.assign(Object.assign({},t),{data:s})};const Ue=({container:t,index:e,outerHTML:n})=>new Promise((i=>{const o=new MutationObserver((t=>{o.disconnect();i()}));o.observe(t,{childList:true,subtree:true});const s=e-1;if(s===-1){t.insertAdjacentHTML("afterbegin",n);return}t.children[Math.min(s,t.children.length-1)].insertAdjacentHTML("afterend",n)}));const Ke=({container:t,index:e})=>new Promise((n=>{const i=new MutationObserver((()=>{i.disconnect();n()}));i.observe(t,{childList:true,subtree:true});const o=t.children[Math.min(e,t.children.length-1)];o===null||o===void 0?void 0:o.parentElement.removeChild(o)}));const Fe=({container:t,index:e,outerHTML:n})=>new Promise((i=>{const o=t.children[Math.min(e,t.children.length-1)];const s=o.outerHTML;const r=new MutationObserver((t=>{r.disconnect();i({previousOuterHTML:s})}));r.observe(t,{childList:true,subtree:true});o.outerHTML=n}));const We=({parent:t,container:e})=>new Promise((n=>{const i=document.createTextNode("");const o=new MutationObserver((()=>{o.disconnect();n(i)}));o.observe(e,{childList:true,subtree:true});t.prepend(i)}));const qe=({container:t,oldValue:e,text:n})=>new Promise((i=>{const o=n.nodeValue;const s=new MutationObserver((()=>{s.disconnect();i({previousValue:o})}));s.observe(t,{characterData:true,subtree:true});n.nodeValue=e}));const Ye=({container:t,paragraph:e})=>new Promise((n=>{var i;const o=((i=e.lastElementChild)===null||i===void 0?void 0:i.nodeName.toLowerCase())!=="br"?w(e.lastElementChild):document.createElement("span");const s=w(o.cloneNode());s.innerHTML="";const r=new MutationObserver((()=>{r.disconnect();n(s)}));r.observe(t,{childList:true,subtree:true});o.after(s)}));class Xe{constructor(){this.onKeyDown=async t=>{if(!Yt(t)){return}await this.createParagraph(t)}}init(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown)}destroy(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown)}async createParagraph(t){const{range:e,selection:n}=te(Dt.state.ref);if(!e){return}const i=w(n===null||n===void 0?void 0:n.anchorNode);if(!i){return}const o=w(y({element:i,container:Dt.state.ref}));if(!o){return}if(S({node:o})){return}t.preventDefault();const s=this.toUpdateParagraphs([o]);ee(e);e.collapse(true);e.setEndAfter(o);const r=e.cloneContents();const a=r.textContent==="";const{shiftKey:l}=t;if(l||I({paragraph:o})){await this.createLineBreak({anchor:i,paragraph:o,isEndOfParagraph:a,range:e,undoParagraphs:s});return}if(a){const t=await R({container:Dt.state.ref,paragraph:o});D(t);return}await this.createParagraphWithContent({range:e,paragraph:o,undoParagraphs:s})}async createParagraphWithContent({paragraph:t,range:e,undoParagraphs:n}){He.state.observe=false;const i=e.extractContents();const o=await N({container:Dt.state.ref,paragraph:t,fragment:i});const s=this.toAddParagraphs([w(o)]);if(t.textContent===""){await E({paragraph:t})}_e({container:Dt.state.ref,addRemoveParagraphs:s,updateParagraphs:n});He.state.observe=true;M(o)}toAddParagraphs(t){return t.map((t=>({outerHTML:t.outerHTML,index:A(t),mutation:"add"})))}toUpdateParagraphs(t){return t.map((t=>({outerHTML:t.outerHTML,index:A(t)})))}async createLineBreak({anchor:t,paragraph:e,isEndOfParagraph:n,range:i,undoParagraphs:o}){He.state.observe=false;_e({container:Dt.state.ref,addRemoveParagraphs:[],updateParagraphs:o});i.setEndAfter(Gt(Dt.state.ref).anchorNode);const s=await V({paragraph:t,range:i});if(!n||!s){M(s);He.state.observe=true;return}const r=await j({paragraph:e,element:s});M(r);He.state.observe=true}}const Ge=[{match:({key:t,lastKey:e,lastBeforeInput:n})=>{if(lt()){return["‘","’","´"].includes(n===null||n===void 0?void 0:n.key)&&t.key===" "}return t.key==="`"&&[" ","Dead"].includes(e===null||e===void 0?void 0:e.key)},transform:()=>document.createElement("mark"),active:t=>(t===null||t===void 0?void 0:t.nodeName.toLowerCase())==="mark",shouldTrimText:({nodeValue:t})=>t.charAt(t.length-1)==="`"||t.charAt(0)==="`",shouldTrimSplit:({target:t,startOffset:e})=>e!==undefined&&t.nodeValue.charAt(e-1)==="`",trim:()=>"`".length,postTransform:()=>Qe()},{match:({lastKey:t,key:e})=>(t===null||t===void 0?void 0:t.key)==="*"&&e.key==="*",transform:()=>{const t=document.createElement("span");t.style.fontWeight="bold";return t},active:t=>{if(!t){return false}const{fontWeight:e}=window.getComputedStyle(t);return parseInt(e)>400||e==="bold"},shouldTrimText:({nodeValue:t})=>t.charAt(t.length-1)==="*"||t.charAt(0)==="*",shouldTrimSplit:({target:t,startOffset:e})=>e!==undefined&&t.nodeValue.charAt(e-1)==="*",trim:()=>"*".length},{match:({lastBeforeInput:t,key:e})=>(t===null||t===void 0?void 0:t.key)===" "&&e.key==="_",transform:()=>{const t=document.createElement("span");t.style.fontStyle="italic";return t},active:t=>{if(!t){return false}const{fontStyle:e}=window.getComputedStyle(t);return e==="italic"},shouldTrimText:t=>false,shouldTrimSplit:()=>false,trim:()=>"".length}];const Je=async({$event:t,transformInput:e,target:n,parent:i})=>{if(!nn({target:n,parent:i,transformInput:e})){return}t.preventDefault();He.state.observe=false;await on({target:n,parent:i,transformInput:e});He.state.observe=true;await en({target:n,parent:i,transformInput:e})};const Qe=()=>{if(ht()){return Promise.resolve()}return Ze()};const Ze=()=>new Promise((t=>{const e=new MutationObserver((async n=>{e.disconnect();const i=n[0].target;if(!i.nodeValue.includes("`")){t();return}He.state.observe=false;await tn({target:i,searchValue:"`",replaceValue:""});He.state.observe=true;const o=w(i);const s=(o===null||o===void 0?void 0:o.nodeName.toLowerCase())==="mark";if(ct()){D(s?o.nextSibling:i.nextSibling);t();return}D(s?i:i.nextSibling);t()}));e.observe(Dt.state.ref,{characterData:true,subtree:true})}));const tn=({target:t,searchValue:e,replaceValue:n})=>new Promise((i=>{const o=new MutationObserver((t=>{o.disconnect();i(t[0].target)}));o.observe(Dt.state.ref,{characterData:true,subtree:true});t.nodeValue=t.nodeValue.replace(e,n)}));const en=({target:t,parent:e,transformInput:n})=>new Promise((async i=>{const o=new MutationObserver((t=>{var e;o.disconnect();D((e=t[0])===null||e===void 0?void 0:e.addedNodes[0]);i()}));o.observe(Dt.state.ref,{childList:true,subtree:true});const{active:s,transform:r}=n;if(s(e)){return}const a=r();a.innerHTML="​";const l=document.createTextNode("​");if(t.nextSibling){e.insertBefore(a,t.nextSibling)}else{e.append(a,l)}}));const nn=({target:t,parent:e,transformInput:n})=>{const i=B({target:t});if(t.nodeValue.length===i){return true}const{active:o}=n;return!o(e)};const on=({target:t,transformInput:e,parent:n})=>new Promise((async i=>{const o=B({target:t});if(t.nodeValue.length===o){if(!e.shouldTrimText(t)){i();return}const n=new MutationObserver((()=>{n.disconnect();i()}));n.observe(Dt.state.ref,{characterData:true,subtree:true});t.nodeValue=t.nodeValue.substring(0,t.nodeValue.length-e.trim());return}const s=await sn({target:t,index:o,transformInput:e});const r=new MutationObserver((t=>{var e;r.disconnect();D((e=t[1])===null||e===void 0?void 0:e.addedNodes[0]);i()}));r.observe(Dt.state.ref,{childList:true,subtree:true});if(t.nextSibling){n.insertBefore(s,t.nextSibling)}else{n.appendChild(s)}}));const sn=({target:t,index:e,transformInput:n})=>new Promise((i=>{var o,s;const r=new MutationObserver((async()=>{r.disconnect();if(!n.shouldTrimText(l)){i(l);return}const t=await rn({target:l,index:1});i(t)}));r.observe(Dt.state.ref,{childList:true,subtree:true});const a=(s=(o=Gt(Dt.state.ref))===null||o===void 0?void 0:o.getRangeAt(0))===null||s===void 0?void 0:s.startOffset;const l=t.splitText(e-(n.shouldTrimSplit({target:t,startOffset:a})?n.trim():0))}));const rn=({target:t,index:e})=>new Promise((n=>{const i=new MutationObserver((t=>{i.disconnect();n(t[0].target)}));i.observe(Dt.state.ref,{characterData:true,subtree:true});t.nodeValue=t.nodeValue.slice(e)}));class an{constructor(){this.lastBeforeInput=undefined;this.lastKey=undefined;this.onBeforeInput=async t=>{await this.preventTextLeaves(t);const{data:e}=t;this.lastBeforeInput={key:e}};this.onKeyDown=async t=>{await this.transformInput(t);this.deleteSelection(t)}}init(){var t,e;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("beforeinput",this.onBeforeInput);(e=Dt.state.ref)===null||e===void 0?void 0:e.addEventListener("keydown",this.onKeyDown)}destroy(){var t,e;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("beforeinput",this.onBeforeInput);(e=Dt.state.ref)===null||e===void 0?void 0:e.removeEventListener("keydown",this.onKeyDown)}async preventTextLeaves(t){var e;const{range:n,selection:i}=te(Dt.state.ref);if(!n){return}const o=i===null||i===void 0?void 0:i.anchorNode;if(!Dt.state.ref.isEqualNode(o)){return}const{data:s}=t;if(s===null){return}const{startOffset:r}=n;const a=T({parent:Dt.state.ref,indexDepths:[r]});if((e=St.state.textParagraphs)===null||e===void 0?void 0:e.includes(a===null||a===void 0?void 0:a.nodeName.toLowerCase())){n.setStart(a,0);return}t.preventDefault();const l=await $({container:Dt.state.ref,range:n,text:s});D(l)}async transformInput(t){var e;const{key:n}=t;const i=Gt(Dt.state.ref);if(!i){return}const{focusNode:o}=i;const s=w(o);const r=Ge.find((({active:t})=>t(s)))!==undefined;if(r){return}const a=Ge.find((({match:t})=>t({key:{key:n},lastKey:this.lastKey,lastBeforeInput:this.lastBeforeInput})));if(a!==undefined){await Je({$event:t,transformInput:a,target:o,parent:s});await((e=a.postTransform)===null||e===void 0?void 0:e.call(a));this.lastKey=undefined;return}this.lastKey={key:n}}deleteSelection(t){const{key:e}=t;if(!["Delete","Backspace"].includes(e)){return}const{range:n}=te(Dt.state.ref);if(!n){return}if(!Dt.state.ref.isEqualNode(n===null||n===void 0?void 0:n.commonAncestorContainer)){return}const i=n.startOffset===1&&n.startContainer.textContent.charAt(0)==="​";if(i){n.setStart(n.startContainer,0)}if(n.startOffset>0){return}if(!U({element:n.startContainer,container:Dt.state.ref})){return}const o=w(y({element:n.startContainer,container:Dt.state.ref}));if(!o){return}n.setStartBefore(o);t.preventDefault();t.stopImmediatePropagation();n.deleteContents()}}const ln=({range:t,linkUrl:e})=>{const n=t.extractContents();const i=hn({fragment:n,linkUrl:e});t.insertNode(i)};const dn=t=>{const{range:e,selection:n}=te(t);if(!e){return}if(ct()){cn(n);return}const i=w(n.anchorNode);const o=e.extractContents();i.parentElement.replaceChild(o,i)};const cn=t=>{const e=w(t.anchorNode);if(!e||e.nodeName.toLowerCase()!=="a"){return}e.parentElement.insertBefore(document.createTextNode(e.textContent),e);e.parentElement.removeChild(e)};const hn=({fragment:t,linkUrl:e})=>{const n=un({linkUrl:e});n.appendChild(t);return n};const un=({linkUrl:t})=>{const e=document.createElement("a");e.href=t;e.rel="noopener noreferrer";e.target="_blank";return e};class fn{constructor(){this.onPaste=async t=>{const e=t.clipboardData.getData("text/html");const n=document.createElement("div");n.innerHTML=e;const i=n.children.length<=0;if(i){const e=t.clipboardData.getData("text/plain");const i=t=>{try{const{protocol:e}=new URL(t);return["http:","https:"].includes(e)}catch(t){return false}};if(i(e)){const t=un({linkUrl:e});t.innerHTML=e;n.append(t)}}if(i&&n.children.length<=0){return}const{range:o,selection:s}=te(Dt.state.ref);if(!o){return}const r=w(s===null||s===void 0?void 0:s.anchorNode);if(!r){return}t.preventDefault();const a=w(y({element:r,container:Dt.state.ref}));this.cleanAttributes(n);this.cleanMetas(n);const l=Array.from(n.childNodes).find((t=>!K(t)))!==undefined;ee(o);if(!l){if(!a){F({paragraph:a,container:Dt.state.ref,nodes:[n]});return}await this.insertNodes({range:o,div:n});return}const d=Array.from(n.childNodes).map((t=>{if(L(t)||t.nodeName.toLowerCase().trim()==="span"){const e=document.createElement("div");e.appendChild(t);return e}return t}));const c=k({paragraph:a});if(c){W({elements:d,paragraph:a,container:Dt.state.ref});return}const h=this.splitCurrentParagraph({range:o,paragraph:a});F({paragraph:a,container:Dt.state.ref,nodes:[...d,...h!==undefined?[h]:[]]})}}init(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("paste",this.onPaste)}destroy(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("paste",this.onPaste)}async insertNodes({range:t,div:e}){const n=document.createDocumentFragment();n.append(...Array.from(e.childNodes));const i=await q({observerRoot:Dt.state.ref,range:t,element:n});D(i)}splitCurrentParagraph({range:t,paragraph:e}){if(!e){return undefined}t.collapse(true);t.setEndAfter(e);return t.extractContents()}cleanAttributes(t){const e=[...new Set([...St.state.attributes.exclude,"class","style"])];const n=({element:t,attributes:e})=>{for(const n of e){t.removeAttribute(n)}};const i=t.querySelectorAll(e.map((t=>`[${t}]`)).join(","));for(const t of Array.from(i)){n({element:t,attributes:e})}return t}cleanMetas(t){const e=Array.from(t.children).filter((t=>Y(t)));for(const t of e){t.parentElement.removeChild(t)}return t}}class vn{constructor(){this.onSelectParagraph=({detail:t})=>{var e,n,i,o,s,r;const a=(e=Dt.state.ref)===null||e===void 0?void 0:e.firstElementChild;const l=(n=Dt.state.ref)===null||n===void 0?void 0:n.children[1];const d=a&&t&&t.isEqualNode(a);const c=l&&t&&t.isEqualNode(l);(i=Dt.state.ref)===null||i===void 0?void 0:i.removeEventListener("keydown",this.onKeyChange);(o=Dt.state.ref)===null||o===void 0?void 0:o.removeEventListener("keyup",this.onKeyChange);if(d||c){(s=Dt.state.ref)===null||s===void 0?void 0:s.addEventListener("keydown",this.onKeyChange);(r=Dt.state.ref)===null||r===void 0?void 0:r.addEventListener("keyup",this.onKeyChange)}this.classesEmpty();this.cleanEmpty()};this.onKeyChange=()=>{var t;const e=y({element:(t=getSelection())===null||t===void 0?void 0:t.anchorNode,container:Dt.state.ref});if(!e||L(e)){return}setTimeout((()=>this.toggleClassEmpty(e)),250)}}init({editorRef:t}){var e,n;this.editorRef=t;(e=this.editorRef)===null||e===void 0?void 0:e.addEventListener("selectParagraph",this.onSelectParagraph);(n=Dt.state.ref)===null||n===void 0?void 0:n.addEventListener("focusin",this.onSelectParagraph,{passive:true});this.classesEmpty()}destroy(){var t,e;(t=this.editorRef)===null||t===void 0?void 0:t.removeEventListener("selectParagraph",this.onSelectParagraph);(e=Dt.state.ref)===null||e===void 0?void 0:e.removeEventListener("focusin",this.onSelectParagraph)}classesEmpty(){var t,e;const n=(t=Dt.state.ref)===null||t===void 0?void 0:t.firstElementChild;const i=(e=Dt.state.ref)===null||e===void 0?void 0:e.children[1];this.classEmpty(n);this.classEmpty(i)}classEmpty(t){if(!t){return}const e=y({element:t,container:Dt.state.ref});if(!e||L(e)){return}this.toggleClassEmpty(e)}toggleClassEmpty(t){var e;const{classList:n,nodeName:i}=t;if(!St.state.textParagraphs.includes(i.toLowerCase())){n.remove("stylo-placeholder-empty");return}const o=k({paragraph:t});const s=A(t);if(o&&(s===0||((e=Dt.state.ref)===null||e===void 0?void 0:e.children.length)<=2)){n.add("stylo-placeholder-empty");return}n.remove("stylo-placeholder-empty")}cleanEmpty(){var t;const e=(t=Dt.state.ref)===null||t===void 0?void 0:t.querySelectorAll(".stylo-empty");const n=Array.from(e||[]).filter((t=>A(t)>1));for(const t of n){t.classList.remove("stylo-empty")}}}class pn{constructor(){this.onKeyDown=async t=>{const{key:e}=t;if(!["Tab"].includes(e)){return}t.preventDefault();await this.catchTab(t)}}init(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown)}destroy(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown)}async catchTab({shiftKey:t}){const{range:e,selection:n}=te(Dt.state.ref);if(!e){return}const i=n===null||n===void 0?void 0:n.focusNode;const o=y({element:i,container:Dt.state.ref});if(o&&S({node:o})){await this.createSublist({paragraph:o,node:i,range:e,shiftKey:t});return}if(t){return}this.createTabulation({range:e,node:i,paragraph:o})}createTabulation({range:t,node:e,paragraph:n}){if(!L(e)){if(n!==undefined){this.insertSpanTabulation({range:t});return}return}this.insertSpanTabulation({range:t})}insertSpanTabulation({range:t}){const e=document.createElement("span");e.innerHTML="\t";t===null||t===void 0?void 0:t.insertNode(e);D(e)}async createSublist({paragraph:t,node:e,range:n,shiftKey:i}){const o=e!==undefined&&S({node:e});const s=t.nodeName.toLowerCase();const r=o?e.firstChild:this.findParentElement({element:e,paragraph:t,nodeName:"li"});if(!r){this.createTabulation({range:n,node:e,paragraph:t});return}const a=o?e:this.findParentElement({element:e,paragraph:t,nodeName:s});if(!a){this.createTabulation({range:n,node:e,paragraph:t});return}if(i){if(P({element:a,container:Dt.state.ref})){return}const e=new MutationObserver((t=>{var n;e.disconnect();const i=(n=t.find((({addedNodes:t})=>t.length>0)))===null||n===void 0?void 0:n.addedNodes[0];M(i)}));e.observe(t,{childList:true,subtree:true});const n=new Range;n.setStartBefore(r);n.setEndAfter(a.lastChild);const i=X(r);const o=n.extractContents();if(i===0){a.parentElement.replaceChild(o,a);return}a.parentElement.insertBefore(o,a.nextSibling);return}const{endOffset:l,commonAncestorContainer:d}=n;const c=d.textContent.length===0;const h=l===d.textContent.length;const u=d.isSameNode(this.findLastChild(r));if((!h||!u)&&!c){this.createTabulation({range:n,node:e,paragraph:t});return}if(a.childNodes.length===1){this.createTabulation({range:n,node:e,paragraph:t});return}const f=new MutationObserver((t=>{var e;f.disconnect();const n=(e=t.find((({addedNodes:t})=>t.length>0)))===null||e===void 0?void 0:e.addedNodes[0];if(!n){return}const i=S({node:n})?n.firstChild:n;if(n.textContent.length===0){M(i);return}D(i)}));f.observe(t,{childList:true,subtree:true});if(r.previousSibling&&S({node:r.previousSibling})){r.previousSibling.appendChild(r);return}const v=new Range;v.selectNode(r);const p=v.cloneContents();const g=document.createElement(s);g.append(p);a.replaceChild(g,r)}findParentElement({element:t,paragraph:e,nodeName:n}){const{nodeName:i,parentElement:o}=t;if(i.toLowerCase()===n){return t}if(P({element:t,container:Dt.state.ref})){return undefined}return this.findParentElement({element:o,paragraph:e,nodeName:n})}findLastChild(t){if(t.lastChild!==null){return this.findLastChild(t.lastChild)}return t}}class gn{constructor(){this.undoInputs=undefined;this.undoUpdateParagraphs=[];this.undoSelection=undefined;this.debounceUpdateInputs=rt((()=>this.stackUndoInputs()),350);this.onKeydown=async t=>{const{key:e,ctrlKey:n,metaKey:i,shiftKey:o}=t;if(Yt(t)){this.stackUndoInputs();return}if(e==="z"&&(n||i)&&!o){await this.undo(t);return}if(e==="z"&&(n||i)&&o){await this.redo(t);return}if(e==="Backspace"){this.stackBackspace()}};this.onKeyup=()=>{var t;this.onEventUpdateParagraphs((t=Gt(Dt.state.ref))===null||t===void 0?void 0:t.anchorNode)};this.onSelectionChange=()=>this.undoSelection=Ae(Dt.state.ref);this.onToolbarActivated=()=>{this.copySelectedParagraphs({filterEmptySelection:true})};this.onMenuActivated=({detail:t})=>{const{paragraph:e}=t;this.undoUpdateParagraphs=this.toUpdateParagraphs([e])};this.onSnapshotParagraph=({target:t})=>{this.onEventUpdateParagraphs(t)};this.onMouseTouchDown=({target:t})=>{this.onEventUpdateParagraphs(t)};this.onMutation=t=>{const e=this.onParagraphsMutations(t);const n=this.onNodesParagraphsMutation(t);_e({container:Dt.state.ref,addRemoveParagraphs:e,updateParagraphs:n,selection:this.undoSelection});if(n.length>0){return}this.onAttributesMutation(t);this.onCharacterDataMutations(t)}}init(){var t,e,n,i,o;this.undoInputs=undefined;this.undoUpdateParagraphs=[];this.observer=new MutationObserver(this.onMutation);this.observe();(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeydown);(e=Dt.state.ref)===null||e===void 0?void 0:e.addEventListener("keyup",this.onKeyup);(n=Dt.state.ref)===null||n===void 0?void 0:n.addEventListener("mousedown",this.onMouseTouchDown);(i=Dt.state.ref)===null||i===void 0?void 0:i.addEventListener("touchstart",this.onMouseTouchDown);(o=Dt.state.ref)===null||o===void 0?void 0:o.addEventListener("snapshotParagraph",this.onSnapshotParagraph);document.addEventListener("selectionchange",this.onSelectionChange);document.addEventListener("toolbarActivated",this.onToolbarActivated);document.addEventListener("menuActivated",this.onMenuActivated);this.unsubscribe=He.onChange("observe",(t=>{if(t){this.copySelectedParagraphs({filterEmptySelection:false});this.undoInputs=undefined;this.observe();return}this.disconnect()}))}destroy(){var t,e,n,i,o,s;this.disconnect();(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeydown);(e=Dt.state.ref)===null||e===void 0?void 0:e.removeEventListener("keyup",this.onKeyup);(n=Dt.state.ref)===null||n===void 0?void 0:n.removeEventListener("mousedown",this.onMouseTouchDown);(i=Dt.state.ref)===null||i===void 0?void 0:i.removeEventListener("touchstart",this.onMouseTouchDown);(o=Dt.state.ref)===null||o===void 0?void 0:o.removeEventListener("snapshotParagraph",this.onSnapshotParagraph);document.removeEventListener("selectionchange",this.onSelectionChange);document.removeEventListener("toolbarActivated",this.onToolbarActivated);document.removeEventListener("menuActivated",this.onMenuActivated);(s=this.unsubscribe)===null||s===void 0?void 0:s.call(this)}async undo(t){t.preventDefault();if(Se()===undefined){return}await this.undoRedo({undoRedo:De})}async redo(t){t.preventDefault();if(Ie()===undefined){return}await this.undoRedo({undoRedo:Ne})}stackUndoInputs(){this.copySelectedParagraphs({filterEmptySelection:false});if(!this.undoInputs){return}Te({data:this.undoInputs,container:Dt.state.ref});this.undoInputs=undefined}stackBackspace(){var t;const{range:e}=te(Dt.state.ref);if(!e){return}const n=e.startOffset===1&&e.startContainer.textContent.charAt(0)==="​";if(!(e.startOffset===0||n)){return}const i=(t=Gt(Dt.state.ref))===null||t===void 0?void 0:t.anchorNode;if(!i){return}const o=w(y({element:i,container:Dt.state.ref}));if(!o){return}this.undoUpdateParagraphs=this.toUpdateParagraphs([...o.previousElementSibling?[o.previousElementSibling]:[],o])}async undoRedo({undoRedo:t}){this.disconnect();await t();this.observe()}observe(){this.observer.observe(Dt.state.ref,{childList:true,characterData:true,characterDataOldValue:true,attributes:true,subtree:true})}disconnect(){var t;(t=this.observer)===null||t===void 0?void 0:t.disconnect()}onEventUpdateParagraphs(t){if(!t){return}const e=w(y({element:t,container:Dt.state.ref}));if(!e){return}this.undoUpdateParagraphs=this.toUpdateParagraphs([e])}copySelectedParagraphs({filterEmptySelection:t}){const e=ke({container:Dt.state.ref,filterEmptySelection:t});if(!e){return}this.undoUpdateParagraphs=this.toUpdateParagraphs(e)}toUpdateParagraphs(t){return t.map((t=>({outerHTML:this.cleanOuterHTML(t),index:A(t),paragraph:t})))}onCharacterDataMutations(t){const e=t.filter((({oldValue:t})=>t!==null));if(e.length<=0){return}if(!this.undoInputs){this.undoInputs=e.map((t=>this.toUndoInput(t))).filter((t=>t!==undefined))}if(this.undoInputs.length<=0){this.undoInputs=undefined;return}this.debounceUpdateInputs()}toUndoInput(t){const e=t.target;const n=e.nodeValue;if(n===t.oldValue){return undefined}const i=w(y({element:e,container:Dt.state.ref}));if(!i||!e.parentNode){return undefined}const o=O({target:e,paragraph:i});return{oldValue:t.oldValue,offset:B({target:e})+(t.oldValue.length-n.length),index:A(i),indexDepths:o}}onParagraphsMutations(t){const e=[];const n=fe({mutations:t,container:Dt.state.ref});n.forEach((t=>e.push({outerHTML:this.cleanOuterHTML(t),mutation:"add",index:t.previousElementSibling?A(w(t.previousElementSibling))+1:0})));e.sort((({index:t},{index:e})=>e-t));const i=be({mutations:t,container:Dt.state.ref,paragraphIdentifier:St.state.attributes.paragraphIdentifier});const o=Math.min(...i.map((({previousSibling:t})=>t?A(w(t))+1:0)));i.forEach((({paragraph:t},n)=>{const i=n+(Number.isFinite(o)?o:0);const s=this.undoUpdateParagraphs.find((({index:t})=>t===i));return e.push({outerHTML:(s===null||s===void 0?void 0:s.outerHTML)||this.cleanOuterHTML(t),mutation:"remove",index:i})}));return e}onNodesParagraphsMutation(t){const e=ve({mutations:t,container:Dt.state.ref});const n=ge({mutations:t,paragraphIdentifier:St.state.attributes.paragraphIdentifier});const i=e.length>0||n.length>0;if(!i){return[]}if(this.undoUpdateParagraphs.length<=0){return[]}const o=fe({mutations:t,container:Dt.state.ref});const s=this.undoUpdateParagraphs.filter((({paragraph:t})=>t.isConnected&&o.find((e=>e.isEqualNode(t)))===undefined));if(s.length<=0){this.copySelectedParagraphs({filterEmptySelection:true});return[]}this.copySelectedParagraphs({filterEmptySelection:true});this.undoInputs=undefined;return s}cleanOuterHTML(t){const e=t.cloneNode(true);e.removeAttribute("placeholder");return e.outerHTML}onAttributesMutation(t){const e=ye({mutations:Ce({mutations:t,excludeAttributes:St.state.attributes.exclude}),container:Dt.state.ref});if(e.length<=0){return}if(this.undoUpdateParagraphs.length<=0){return}_e({container:Dt.state.ref,addRemoveParagraphs:[],updateParagraphs:this.undoUpdateParagraphs,selection:this.undoSelection});this.undoUpdateParagraphs=this.toUpdateParagraphs(e)}}const bn=({rootNode:t})=>{let e=(t===document?document.head:t).querySelector("style[stylo-editor]");if(e!==null){return}e=document.createElement("style");e.setAttribute("stylo-editor","");e.innerHTML=`\n    .stylo-container > * {\n      white-space: pre-wrap;\n      position: relative;\n    }\n\n    .stylo-container > *:after {\n      content: attr(placeholder);\n      color: var(--stylo-placeholder-color, rgba(55, 53, 47, 0.5));\n      position: absolute;\n      top: 0;\n    }\n  `;if(t===document){document.head.append(e);return}t.prepend(e)};const mn=":host{display:block}";const yn=class{constructor(t){i(this,t);this.debounceSize=rt((()=>this.applySize()),250);this.undoRedoEvents=new gn;this.enterEvents=new Xe;this.placeHolderEvents=new vn;this.inputEvents=new an;this.tabEvents=new pn;this.dataEvents=new ze;this.pasteEvents=new fn;this.mobile=Xt();this.config=undefined;this.containerRef=undefined;this.contentEditable=true}componentWillLoad(){this.init();this.applyConfig()}componentDidLoad(){window===null||window===void 0?void 0:window.addEventListener("resize",this.debounceSize)}disconnectedCallback(){var t;window===null||window===void 0?void 0:window.removeEventListener("resize",this.debounceSize);this.destroy();(t=this.attributesObserver)===null||t===void 0?void 0:t.disconnect()}onContainerRefChange(){this.destroy();this.init()}onConfigChange(){this.destroy();this.applyConfig();this.initEvents()}applySize(){var t;if(this.mobile){return}Dt.state.size=(t=this.containerRef)===null||t===void 0?void 0:t.getBoundingClientRect()}init(){Dt.state.ref=this.containerRef;if(!this.containerRef){return}bn({rootNode:this.containerRef.getRootNode()});Dt.state.ref.classList.add("stylo-container");this.containerRefEditable();this.applySize();this.initEvents()}containerRefEditable(){var t;(t=this.attributesObserver)===null||t===void 0?void 0:t.disconnect();this.attributesObserver=new MutationObserver((t=>{const e=t.find((({attributeName:t})=>["contenteditable"].includes(t.toLowerCase())));if(!e){return}this.contentEditable=this.isContentEditable();if(this.contentEditable){this.initEvents();return}this.destroy()}));this.attributesObserver.observe(Dt.state.ref,{attributes:true});this.contentEditable=this.isContentEditable()}isContentEditable(){return["true",""].includes(this.containerRef.getAttribute("contenteditable"))}applyConfig(){var t,e;if(!this.config){return}const{plugins:n,toolbar:i,i18n:o,placeholders:s,textParagraphs:r,menus:a,attributes:l}=this.config;qt.state.custom=o===null||o===void 0?void 0:o.custom;qt.state.lang=(o===null||o===void 0?void 0:o.lang)||"en";St.state.plugins=n||zt;St.state.toolbar=i?Object.assign(Object.assign({},St.state.toolbar),i):Mt;St.state.placeholders=s||Pt;St.state.textParagraphs=r||Lt;St.state.menus=a;const d=(t=l===null||l===void 0?void 0:l.paragraphIdentifier)!==null&&t!==void 0?t:At;St.state.attributes={paragraphIdentifier:d,exclude:[...new Set([...(e=l===null||l===void 0?void 0:l.exclude)!==null&&e!==void 0?e:[],...Ht,d])]}}destroy(){this.undoRedoEvents.destroy();this.inputEvents.destroy();this.enterEvents.destroy();this.placeHolderEvents.destroy();this.tabEvents.destroy();this.dataEvents.destroy();this.pasteEvents.destroy();He.state.undo=[];He.state.redo=[]}initEvents(){if(!this.contentEditable){return}this.inputEvents.init();this.enterEvents.init();this.placeHolderEvents.init({editorRef:this.el});this.tabEvents.init();this.dataEvents.init({editorRef:this.el});this.undoRedoEvents.init();this.pasteEvents.init()}render(){var t;if(!this.contentEditable){return undefined}return n(a,null,n("stylo-add",null),n("stylo-plugins",null),this.renderToolbar(),((t=St.state.menus)===null||t===void 0?void 0:t.length)&&n("stylo-menus",null))}renderToolbar(){if(this.mobile){return undefined}return n("stylo-toolbar",{containerRef:this.containerRef})}get el(){return r(this)}static get watchers(){return{containerRef:["onContainerRefChange"],config:["onConfigChange"]}}};yn.style=mn;const wn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},n("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n("path",{d:"M18.62 18h-5.24l2-4H13V6h8v7.24L18.62 18zm-2-2h.76L19 12.76V8h-4v4h3.62l-2 4zm-8 2H3.38l2-4H3V6h8v7.24L8.62 18zm-2-2h.76L9 12.76V8H5v4h3.62l-2 4z"}));const xn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}));const kn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}));const Cn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}));const zn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}));const Mn=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0V0z",fill:"none"}),n("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}));const Pn=t=>{switch(t){case"code":return n(xn,null);case"ul":return n(Mn,null);case"ol":return n(zn,null);case"hr":return n(Cn,null);case"img":return n(kn,null);case"blockquote":return n(wn,null);default:return undefined}};const Ln=":host{display:flex;flex-direction:column;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;--background-active:var(--stylo-list-background-active, var(--light));--border-active:var(--stylo-list-border-active, 1px solid var(--background-active));--color-active:var(--stylo-list-color-active, var(--light-contrast))}button{display:flex;position:relative;isolation:isolate;overflow:hidden;background:transparent;border:none;outline:none;cursor:pointer;transition:color 0.25s ease-out, background 0.25s ease-out, transform 0.15s ease-out;justify-content:flex-start;align-items:center;font-size:1rem;color:var(--stylo-toolbar-button-color, black);white-space:pre}button:active{box-shadow:none;transform:translateX(1px) translateY(1px)}button:hover,button:focus{background:var(--background-active);color:var(--color-active)}svg,span.placeholder{width:1.4rem;height:1.4rem;border:var(--border-active);border-radius:var(--stylo-border, 4px);margin:4px 12px 4px 8px;background:var(--white)}svg{padding:8px}span.placeholder{padding:10px 8px 6px;font-size:0.8rem;font-weight:700}span.placeholder::first-letter{font-size:125%}div.icon{display:flex}.empty{padding:10px 16px 6px}.empty strong{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}";const Hn=class{constructor(t){i(this,t);this.applyPlugin=o(this,"applyPlugin",7);this.cancelPlugins=o(this,"cancelPlugins",7);this.filter="";this.onKeyDown=t=>{const{code:e}=t;if(["Enter"].includes(e)){return}t.preventDefault();if(["Escape"].includes(e)){this.cancelPlugins.emit();return}if(["ArrowDown"].includes(e)){this.focusNext();return}if(["ArrowUp"].includes(e)){this.focusPrevious();return}this.filterPlugins(t)};this.display=false;this.plugins=undefined}componentWillLoad(){this.plugins=[...St.state.plugins]}componentDidUpdate(){this.focusOnUpdate()}focusOnUpdate(){const t=this.el.shadowRoot.querySelectorAll("button");if(t.length===1){t[0].focus()}}emitPlugin(t,e){t.stopPropagation();this.applyPlugin.emit(e)}onDisplay(){if(this.display){document.addEventListener("keydown",this.onKeyDown);return}document.removeEventListener("keydown",this.onKeyDown,false);this.reset()}reset(){this.filter="";this.plugins=[...St.state.plugins]}async focusFirstButton(){var t;this.focusButton=this.el.shadowRoot.querySelector("button");(t=this.focusButton)===null||t===void 0?void 0:t.focus()}focusNext(){var t,e;this.focusButton=w((t=this.focusButton||this.el.shadowRoot.firstElementChild)===null||t===void 0?void 0:t.nextElementSibling);(e=this.focusButton)===null||e===void 0?void 0:e.focus()}focusPrevious(){var t,e;this.focusButton=w((t=this.focusButton||this.el.shadowRoot.lastElementChild)===null||t===void 0?void 0:t.previousElementSibling);(e=this.focusButton)===null||e===void 0?void 0:e.focus()}filterPlugins(t){const{code:e,metaKey:n,ctrlKey:i,key:o}=t;if(n||i){return}if(o.length>1&&!["Backspace"].includes(e)){return}this.filter=e==="Backspace"?this.filter.length>0?this.filter.slice(0,-1):this.filter:`${this.filter}${o}`;this.plugins=[...St.state.plugins].filter((({text:t})=>{var e,n;const i=(n=(e=qt.state.plugins[t])!==null&&e!==void 0?e:qt.state.custom[t])!==null&&n!==void 0?n:t;return i.toLowerCase().indexOf(this.filter.toLowerCase())>-1}))}render(){return n(a,null,this.plugins.map(((t,e)=>this.renderPlugin(t,`plugin-${e}`))),this.renderEmpty())}renderEmpty(){if(this.plugins.length>0){return undefined}return n("span",{class:"empty"},qt.state.plugins.no_matches,": ",n("strong",null,this.filter))}renderPlugin(t,e){const{text:i,icon:o}=t;const s=Pn(o);return n("button",{key:e,onClick:e=>this.emitPlugin(e,t)},s===undefined&&n("div",Object.assign({class:"icon"},s===undefined&&{innerHTML:o})),s,this.renderText(i))}renderText(t){var e,i,o,s,r;const l=(i=(e=qt.state.plugins[t])!==null&&e!==void 0?e:qt.state.custom[t])!==null&&i!==void 0?i:t;if(this.filter.length>0){const t=new RegExp(this.filter+"(.*)","gi");const e=l.split(t);const i=new RegExp(this.filter,"gi");const d=l.match(i);return n(a,null,(o=e[0])!==null&&o!==void 0?o:"",n("strong",null,(s=d[0])!==null&&s!==void 0?s:""),(r=e[1])!==null&&r!==void 0?r:"")}return l}get el(){return r(this)}static get watchers(){return{display:["onDisplay"]}}};Hn.style=Ln;const An=":host{display:flex;justify-content:center;align-items:center;position:absolute;top:var(--menu-top);left:50%;transform:translate(-50%, calc(-100% - 16px));--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);padding:var(--stylo-toolbar-padding, 0 8px);z-index:var(--stylo-toolbar-zindex, 1)}div.icon{display:flex;flex-direction:column}";const On=class{constructor(t){i(this,t);this.menuActivated=o(this,"menuActivated",7);this.onKeyDown=()=>{this.hide()};this.top=undefined;this.menu=undefined}componentDidLoad(){this.destroyListener=Dt.onChange("ref",(()=>{this.removeContainerListener();this.addContainerListener()}));this.addContainerListener()}disconnectedCallback(){var t;this.removeContainerListener();(t=this.destroyListener)===null||t===void 0?void 0:t.call(this)}addContainerListener(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown,{passive:true})}removeContainerListener(){var t;(t=Dt.state.ref)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown)}onResize(){this.hide()}onClick({target:t}){var e,n;const i=y({element:t,container:Dt.state.ref});this.paragraph=w(i);if(!this.paragraph){this.hide();return}this.menuActivated.emit({paragraph:this.paragraph});this.menu=(e=St.state.menus)===null||e===void 0?void 0:e.find((({match:t})=>t({paragraph:this.paragraph})));this.top=this.menu&&((n=this.paragraph)===null||n===void 0?void 0:n.offsetTop)}async selectMenuAction({action:t}){if(!this.paragraph){this.hide();return}await t({paragraph:this.paragraph});this.hide()}hide(){this.paragraph=undefined;this.menu=undefined;this.top=undefined}render(){const t=this.top===undefined?{display:"none"}:{"--menu-top":`${this.top}px`};return n(s,{style:t},this.renderMenu(),n("stylo-toolbar-triangle",{style:{"--stylo-toolbar-triangle-center":`50%`}}))}renderMenu(){var t;return(t=this.menu)===null||t===void 0?void 0:t.actions.map((t=>this.renderAction(t)))}renderAction(t){var e,i;const{icon:o,text:s}=t;const r=Pn(o);return n("stylo-toolbar-button",{onAction:async()=>await this.selectMenuAction(t),label:(i=(e=qt.state.menus[s])!==null&&e!==void 0?e:qt.state.custom[s])!==null&&i!==void 0?i:s},r?r:n("div",{class:"icon",innerHTML:o}))}};On.style=An;const Tn=":host{display:flex;flex-direction:column;position:absolute;top:var(--actions-top);left:var(--actions-left);transform:translate(0, var(--actions-translate-y)) scale(0.95);opacity:0;margin:2px 0;width:220px;max-height:220px;overflow:auto;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);pointer-events:none;transition-property:opacity, transform;transition-duration:0.15s, 0.15s;transition-timing-function:cubic-bezier(0.175, 0.885, 0.32, 1.275), cubic-bezier(0.175, 0.885, 0.32, 1.275)}:host(.display){opacity:1;transform:translate(0, var(--actions-translate-y)) scale(1);pointer-events:all}input{visibility:hidden;opacity:0}";const _n=class{constructor(t){i(this,t);this.display=false;this.position=undefined}componentWillLoad(){this.destroyListener=Dt.onChange("size",(()=>{if(Xt()){return}this.hide()}))}disconnectedCallback(){var t;(t=this.destroyListener)===null||t===void 0?void 0:t.call(this)}onClick(t){this.hide()}onHidePlugins(){this.hide()}hide(){this.display=false;setTimeout((()=>this.position=undefined),150)}onListPlugins({detail:t}){if(!t){this.hide();return}const{height:e,top:n}=t.getBoundingClientRect();const i=n+220+16<(window.innerHeight||screen.height);this.position={top:t.offsetTop+(i?e:-1*e),left:t.offsetLeft,downward:i};this.paragraph=t;this.displayAndFocus()}displayAndFocus(){const t=async(t,e)=>{var n;if(this.el.style.visibility!=="visible"){return}e.disconnect();await((n=this.el.shadowRoot.querySelector("stylo-list"))===null||n===void 0?void 0:n.focusFirstButton())};const e=new MutationObserver(t);e.observe(this.el,{attributes:true,subtree:true});setTimeout((()=>this.display=true),150)}onCancelPlugins(){this.hide();C({paragraph:this.paragraph})}async onApplyPlugin(t){if(!Dt.state.ref||!this.paragraph){return}this.hide();const{files:e}=t;if(e!==undefined){this.openFilePicker(t);return}await this.transformParagraph({plugin:t})}async transformParagraph({plugin:t,files:e}){const{createParagraphs:n}=t;await n({paragraph:w(this.paragraph),container:Dt.state.ref,files:e})}openFilePicker(t){const e=this.filePicker(t);e===null||e===void 0?void 0:e.click()}async onFilePickerChange(t){const e=this.filePicker(t);if(!e||e.files.length<=0){return}await this.transformParagraph({plugin:t,files:e.files});e.value=""}filePicker({files:t}){const{accept:e}=t;return this.el.shadowRoot.querySelector(`input[accept="${e}"]`)}render(){const t=Object.assign(Object.assign({visibility:this.display?"visible":"hidden"},!this.display&&{height:"0px"}),this.position===undefined?{}:{"--actions-top":`${this.position.top}px`,"--actions-left":`${this.position.left}px`,"--actions-translate-y":`${this.position.downward?"0":"-100%"}`});return n(s,{style:t,class:`${this.display?"display":"hidden"}`},this.renderList(),this.renderInputs())}renderInputs(){return St.state.plugins.filter((({files:t})=>t!==undefined)).map((t=>{const{accept:e,multiple:i}=t.files;return n("input",{type:"file",accept:e,multiple:i,onChange:async()=>await this.onFilePickerChange(t)})}))}renderList(){return n("stylo-list",{onApplyPlugin:async({detail:t})=>await this.onApplyPlugin(t),onCancelPlugins:()=>this.onCancelPlugins(),display:this.display})}get el(){return r(this)}};_n.style=Tn;const Sn={cmd:"style",detail:{style:"font-weight",value:"bold",initial:t=>t&&t.style["font-weight"]==="bold"}};const In={cmd:"style",detail:{style:"font-style",value:"italic",initial:t=>t&&t.style["font-style"]==="italic"}};const Rn={cmd:"style",detail:{style:"text-decoration",value:"underline",initial:t=>t&&t.style["text-decoration"]==="underline"}};const Dn={cmd:"style",detail:{style:"text-decoration",value:"line-through",initial:t=>t&&t.style["text-decoration"]==="line-through"}};function Nn(t,e,n){const i=t.anchorNode;if(!i){return}const o=w(y({element:i,container:n}));if(!o){return}if(o.nodeName.toLowerCase()===e.type){jn(o);return}if(!["ol","ul","dl"].includes(o.nodeName.toLowerCase())){En(o,t,e.type);return}Vn(o,t,e.type);jn(o,false)}function En(t,e,n){const i=e.getRangeAt(0);const o=i.extractContents();const s=document.createElement(n);const r=document.createElement("li");r.style.cssText=t.style.cssText;r.appendChild(o);s.appendChild(r);i.insertNode(s);e.selectAllChildren(s)}function Vn(t,e,n){const i=document.createElement(n);i.append(...Array.from(t.childNodes));Array.from(t.attributes).forEach((t=>i.setAttribute(t.nodeName,t.nodeValue)));t.parentElement.insertBefore(i,t);e.selectAllChildren(i)}function jn(t,e=true){if(t.hasChildNodes()&&e){Array.from(t.childNodes).forEach((e=>{if(e.hasChildNodes()&&e.childNodes.length>1&&e.firstChild.nodeType!==Node.TEXT_NODE&&e.firstChild.nodeType!==Node.COMMENT_NODE){const n=document.createElement("span");n.append(...Array.from(e.childNodes));t.parentElement.insertBefore(n,t)}else{const n=document.createTextNode(e.textContent);t.parentElement.insertBefore(n,t)}}))}t.parentElement.removeChild(t)}const Bn=(t,e,n)=>{if(t.nodeName.toUpperCase()==="HTML"||t.nodeName.toUpperCase()==="BODY"){return null}if(!t.parentNode){return null}if(P({element:t,container:n})){return null}const{style:i}=w(t);const o=i[e]!==null&&i[e]!==undefined&&i[e]!=="";if(o){return t}return Bn(t.parentNode,e,n)};const $n=t=>{if(Xn(t,"b")){return"bold"}if(Xn(t,"strong")){return"bold"}return t.style.fontWeight==="bold"?"bold":t.style.fontWeight==="initial"?"initial":undefined};const Un=t=>{if(!t){return undefined}if(t.hasAttribute("size")){return t.getAttribute("size")}return t.style.fontSize!==""?G[t.style.fontSize.replace("-","_").toUpperCase()]:undefined};const Kn=t=>{const e=window.getComputedStyle(t);if(e.textAlign==="center"){return J.CENTER}else if(e.textAlign==="right"){return J.RIGHT}else if(e.textAlign==="left"){return J.LEFT}return ut()?J.RIGHT:J.LEFT};const Fn=t=>{if(!t){return undefined}if(t.nodeName&&t.nodeName.toLowerCase()==="li"&&t.parentElement&&t.parentElement.nodeName){return t.parentElement.nodeName.toLowerCase()==="ol"?Q.ORDERED:t.parentElement.nodeName.toLowerCase()==="ul"?Q.UNORDERED:undefined}return undefined};const Wn=t=>{var e,n,i,o,s;if(Xn(t,"strike")){return"strikethrough"}if(((e=t.style.textDecoration)===null||e===void 0?void 0:e.indexOf("line-through"))>-1||((n=t.style.textDecorationLine)===null||n===void 0?void 0:n.indexOf("line-through"))>-1){return"strikethrough"}if(((i=t.style.textDecoration)===null||i===void 0?void 0:i.indexOf("initial"))>-1||((o=t.style.textDecorationLine)===null||o===void 0?void 0:o.indexOf("initial"))>-1){return"initial"}if(!t.hasChildNodes()){return undefined}const r=t.children;if(r&&r.length>0){const t=Array.from(r).find((t=>{var e,n,i;return((e=t.style.textDecoration)===null||e===void 0?void 0:e.indexOf("line-through"))>-1||((n=t.style.textDecorationLine)===null||n===void 0?void 0:n.indexOf("line-through"))>-1||((i=t.style.textDecorationLine)===null||i===void 0?void 0:i.indexOf("initial"))>-1}));if(t){return((s=t.style.fontStyle)===null||s===void 0?void 0:s.indexOf("line-through"))>-1?"strikethrough":"initial"}}return undefined};const qn=t=>{var e,n,i,o,s;if(Xn(t,"u")){return"underline"}if(((e=t.style.textDecoration)===null||e===void 0?void 0:e.indexOf("underline"))>-1||((n=t.style.textDecorationLine)===null||n===void 0?void 0:n.indexOf("underline"))>-1){return"underline"}if(((i=t.style.textDecoration)===null||i===void 0?void 0:i.indexOf("initial"))>-1||((o=t.style.textDecorationLine)===null||o===void 0?void 0:o.indexOf("initial"))>-1){return"initial"}if(!t.hasChildNodes()){return undefined}const r=t.children;if(r&&r.length>0){const t=Array.from(r).find((t=>{var e,n,i;return((e=t.style.textDecoration)===null||e===void 0?void 0:e.indexOf("underline"))>-1||((n=t.style.textDecorationLine)===null||n===void 0?void 0:n.indexOf("underline"))>-1||((i=t.style.textDecorationLine)===null||i===void 0?void 0:i.indexOf("initial"))>-1}));if(t){return((s=t.style.fontStyle)===null||s===void 0?void 0:s.indexOf("underline"))>-1?"underline":"initial"}}return undefined};const Yn=t=>{if(Xn(t,"i")){return"italic"}if(Xn(t,"em")){return"italic"}if(t.style.fontStyle==="italic"){return"italic"}if(t.style.fontStyle==="initial"){return"initial"}if(!t.hasChildNodes()){return undefined}const e=t.children;if(e&&e.length>0){const t=Array.from(e).find((t=>t.style.fontStyle==="italic"||t.style.fontStyle==="initial"));if(t){return t.style.fontStyle==="italic"?"italic":"initial"}}return undefined};const Xn=(t,e)=>{if(!t){return false}if(t.nodeName.toLowerCase()===e){return true}if(t.hasChildNodes()){const n=t.getElementsByTagName(e);return n&&n.length>0}return false};function Gn(t,e,n){const i=Z(t);if(!i){return}const o=i&&i.innerText===t.toString();if(o&&!P({element:i,container:n})&&i.style[e.style]!==undefined){Jn(i,e,n);return}Qn(i,e,t,n)}function Jn(t,e,n){t.style[e.style]=ei(n,e,n);Zn(e,t)}function Qn(t,e,n,i){const o=n.getRangeAt(0);if(o.commonAncestorContainer&&["ol","ul","dl"].some((t=>t===o.commonAncestorContainer.nodeName.toLowerCase()))){Jn(o.commonAncestorContainer,e,i);return}const s=o.extractContents();const r=ti(t,e,i);r.appendChild(s);Zn(e,r);ni(e,r);o.insertNode(r);n.selectAllChildren(r)}function Zn(t,e){if(!e.hasChildNodes()){return}const n=Array.from(e.children).filter((e=>e.style[t.style]!==undefined&&e.style[t.style]!==""));if(n&&n.length>0){n.forEach((e=>{e.style[t.style]="";if(e.getAttribute("style")===""||e.style===null){e.removeAttribute("style")}}))}Array.from(e.children).forEach((e=>Zn(t,e)))}function ti(t,e,n){const i=document.createElement("span");i.style[e.style]=ei(t,e,n);return i}function ei(t,e,n){if(!t){return e.value}if(e.initial(t)){return"initial"}const i=Bn(t,e.style,n);if(e.initial(i)){return"initial"}return e.value}function ni(t,e){if(!e.hasChildNodes()){return}const n=Array.from(e.children).filter((t=>{const e=t.getAttribute("style");return!e||e===""}));if(n&&n.length>0){n.forEach((t=>{const e=t.querySelectorAll("[style]");if(!e||e.length===0){const e=document.createTextNode(t.textContent);t.parentElement.replaceChild(e,t)}}));return}Array.from(e.children).forEach((e=>ni(t,e)))}function ii(t,e,n){if(!document||!t){return}if(e.cmd==="style"){Gn(t,e.detail,n)}else if(e.cmd==="list"){Nn(t,e.detail,n)}}const oi=t=>{if(t.cmd==="style"){si(t)}else if(t.cmd==="list"){ri(t)}};const si=t=>{const e=t.detail;document.execCommand("styleWithCSS",false,true);switch(e.style){case"color":document.execCommand("foreColor",false,e.value);break;case"background-color":document.execCommand("backColor",false,e.value);break;case"font-size":document.execCommand("fontSize",false,G[e.value.replace("-","_").toUpperCase()]);break;case"font-weight":document.execCommand("bold",false,null);break;case"font-style":document.execCommand("italic",false,null);break;case"text-decoration":document.execCommand(e.value==="line-through"?"strikeThrough":"underline",false,null);break}};const ri=t=>{const e=t.detail;switch(e.type){case"ol":document.execCommand("insertOrderedList",false,null);break;case"ul":document.execCommand("insertUnorderedList",false,null);break}};const ai=t=>{switch(t){case J.CENTER:document.execCommand("justifyCenter",false,null);break;case J.RIGHT:document.execCommand("justifyRight",false,null);break;default:document.execCommand("justifyLeft",false,null)}};const li=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}));const di=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}));const ci=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}));const hi=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("g",null,n("rect",{fill:"none",height:"24",width:"24"})),n("g",null,n("path",{d:"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"})));const ui=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("path",{d:"M0 0h24v24H0z",fill:"none"}),n("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}));const fi=()=>n("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},n("g",null,n("rect",{fill:"none",height:"24",width:"24"})),n("g",null,n("g",null,n("g",null,n("g",null,n("path",{d:"M12,22C6.49,22,2,17.51,2,12S6.49,2,12,2s10,4.04,10,9c0,3.31-2.69,6-6,6h-1.77c-0.28,0-0.5,0.22-0.5,0.5 c0,0.12,0.05,0.23,0.13,0.33c0.41,0.47,0.64,1.06,0.64,1.67C14.5,20.88,13.38,22,12,22z M12,4c-4.41,0-8,3.59-8,8s3.59,8,8,8 c0.28,0,0.5-0.22,0.5-0.5c0-0.16-0.08-0.28-0.14-0.35c-0.41-0.46-0.63-1.05-0.63-1.65c0-1.38,1.12-2.5,2.5-2.5H16 c2.21,0,4-1.79,4-4C20,7.14,16.41,4,12,4z"}),n("circle",{cx:"6.5",cy:"11.5",r:"1.5"}),n("circle",{cx:"9.5",cy:"7.5",r:"1.5"}),n("circle",{cx:"14.5",cy:"7.5",r:"1.5"}),n("circle",{cx:"17.5",cy:"11.5",r:"1.5"}))))));const vi=({align:t,list:e,switchToolbarActions:i,disabledTitle:o,bold:s,italic:r,strikethrough:l,underline:d,link:c,onExecCommand:h,toggleLink:u})=>{const f=()=>n("stylo-toolbar-separator",null);const v=()=>{if(!e&&!t){return undefined}return f()};const p=()=>n("stylo-toolbar-button",{onAction:()=>i(tt.LIST),label:qt.state.toolbar.style_list},e===Q.UNORDERED?n(Mn,null):n(zn,null));const g=()=>{if(!St.state.toolbar.style.align){return undefined}return n("stylo-toolbar-button",{onAction:()=>i(tt.ALIGNMENT),label:qt.state.toolbar.style_align},t===J.LEFT?n(di,null):t===J.CENTER?n(li,null):n(ci,null))};const b=()=>{if(!St.state.toolbar.style.fontSize){return undefined}return n(a,null,n("stylo-toolbar-button",{onAction:()=>i(tt.FONT_SIZE),label:qt.state.toolbar.style_font_size},n("span",null,"A",n("small",null,"A"))),f())};const m=()=>{const t=[n("stylo-toolbar-button",{onAction:()=>i(tt.COLOR),label:qt.state.toolbar.style_color},n(fi,null))];if(St.state.toolbar.style.backgroundColor){t.push(n("stylo-toolbar-button",{onAction:()=>i(tt.BACKGROUND_COLOR),label:qt.state.toolbar.style_background},n(hi,null)))}return t};return n(a,null,n("stylo-toolbar-text",{disabledTitle:o,bold:s==="bold",italic:r==="italic",underline:d==="underline",strikethrough:l==="strikethrough",onExecCommand:t=>h(t)}),f(),b(),m(),f(),g(),p(),v(),n("stylo-toolbar-button",{onAction:u,cssClass:c?"active":undefined,label:qt.state.toolbar.link},n(ui,null)))};const pi=":host{direction:ltr;position:absolute;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}div.tools{display:flex;justify-content:center;align-items:center;visibility:hidden;opacity:0;height:0;animation:0s ease 0s 1 normal none running none;transition:opacity 0.1s ease-out;position:absolute;top:var(--actions-top);left:var(--actions-left);right:var(--actions-right);transform:translate(var(--actions-translate-x), var(--actions-translate-y));z-index:var(--stylo-toolbar-zindex, 2);--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);padding:var(--stylo-toolbar-padding, 0 8px);min-width:var(--stylo-toolbar-min-width, 280px)}div.tools.tools-activated{visibility:visible;opacity:1;height:unset;min-height:var(--stylo-toolbar-min-height, 44px)}";const gi=class{constructor(t){i(this,t);this.toolbarActivated=o(this,"toolbarActivated",7);this.linkCreated=o(this,"linkCreated",7);this.styleDidChange=o(this,"styleDidChange",7);this.debounceDisplayToolsActivated=rt((()=>{this.displayToolsActivated=true;this.toolbarActivated.emit(true)}));this.selection=null;this.selectionParagraph=undefined;this.anchorLink=null;this.rtl=ut();this.onKeyDown=t=>{const{code:e}=t;if(["Escape"].includes(e)){this.reset(false);return}this.styleKeyboardShortcuts(t)};this.startSelection=t=>{this.anchorEvent={$event:t,composedPath:t.composedPath()}};this.toggleLink=()=>{if(this.link){dn(this.containerRef);this.reset(true)}else{this.openLink()}};this.switchToolbarActions=t=>this.toolbarActions=t;this.onExecCommand=t=>{this.execCommand(t.detail)};this.config=undefined;this.containerRef=undefined;this.bold=undefined;this.italic=undefined;this.underline=undefined;this.strikethrough=undefined;this.align=undefined;this.list=undefined;this.fontSize=undefined;this.disabledTitle=false;this.toolsActivated=false;this.displayToolsActivated=false;this.link=false;this.toolbarActions=tt.STYLE;this.toolsPosition=undefined;this.onSelectionChange=this.onSelectionChange.bind(this)}componentWillLoad(){this.initDefaultContentAlign();this.applyStandaloneConfig()}connectedCallback(){this.addListener()}disconnectedCallback(){this.removeListener()}onContainerRef(){if(!this.containerRef){return}this.removeListener();this.addListener()}onConfigChange(){this.applyStandaloneConfig()}applyStandaloneConfig(){if(!this.config){return}St.state.toolbar=Object.assign(Object.assign({},St.state.toolbar),this.config)}styleKeyboardShortcuts(t){const{metaKey:e,ctrlKey:n,key:i}=t;if(!e&&!n){return}if(!["b","i","u","k"].includes(i)){return}t.preventDefault();t.stopPropagation();switch(i){case"b":this.execCommand(Sn);break;case"i":this.execCommand(In);break;case"u":this.execCommand(Rn);break;case"k":this.openLink();break}}onContextMenu(){this.reset(false)}onSelectionChange(){if([tt.COLOR,tt.BACKGROUND_COLOR,tt.LINK].includes(this.toolbarActions)){return}this.displayTools()}onResize(){if(Xt()){return}this.reset(true)}onContainerClick(t){if([tt.COLOR,tt.BACKGROUND_COLOR,tt.LINK].includes(this.toolbarActions)){return}t.preventDefault()}addListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.addEventListener("mousedown",this.startSelection,{passive:true});t===null||t===void 0?void 0:t.addEventListener("touchstart",this.startSelection,{passive:true});t===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown)}removeListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.removeEventListener("mousedown",this.startSelection);t===null||t===void 0?void 0:t.removeEventListener("touchstart",this.startSelection);t===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown)}displayTools(){let t=Gt(this.containerRef);if(!this.anchorEvent){this.reset(false);return}const{$event:e,composedPath:n}=this.anchorEvent;if(this.containerRef&&!this.containerRef.contains(e.target)&&!this.containerRef.contains(n[0])){this.reset(false);return}if(!t||!t.toString()||t.toString().trim().length<=0){this.reset(false);return}const i=this.activateToolbar(t);this.setToolsActivated(i);if(!this.toolsActivated){return}this.selection=t;this.selectionParagraph=y({element:!this.selection?document.activeElement:this.selection.anchorNode,container:this.containerRef});if(t.rangeCount>0){const e=t.getRangeAt(0);this.anchorLink={range:e.cloneRange()};this.setToolbarAnchorPosition()}}setToolbarAnchorPosition(){if(!this.tools){return}const{$event:t}=this.anchorEvent;const e=st(t).clientX;const n=st(t).clientY;const{range:i}=te(this.containerRef);const o=i===null||i===void 0?void 0:i.getBoundingClientRect();const s=o?o.x+o.width/2:e;const r=o?o.y:n;const{x:a,y:l}=this.el.shadowRoot.host.getBoundingClientRect();const d=s-a;const c=r-l;const h=n>100?"above":"under";const{innerWidth:u}=window;const f=16;const v=h==="above"?c-f:c+((o===null||o===void 0?void 0:o.height)||0)+8;const p=32;const g=this.tools.offsetWidth/2+p>d;const b=((o===null||o===void 0?void 0:o.left)||e)-40;const m=u>0&&b>u-(this.tools.offsetWidth/2+p);const y=m?`${u-a-this.tools.offsetWidth-p}px`:g?`${p}px`:`${d}px`;const w=`auto`;this.toolsPosition={top:v,left:y,right:w,position:h,align:m?"end":g?"start":"center",anchorLeft:g?d-p:m?d-(u-p-this.tools.offsetWidth):this.tools.offsetWidth/2}}activateToolbar(t){const e=t&&t.toString()&&t.toString().length>0;if(e){this.initStyle(t);this.initLink(t)}return e}initStyle(t){if(!t||t.rangeCount<=0){return}const e=Z(t);if(!e){return}this.initStyleForNode(e)}initStyleForNode(t){this.bold=undefined;this.italic=undefined;this.underline=undefined;this.strikethrough=undefined;this.list=undefined;this.fontSize=undefined;this.initDefaultContentAlign();this.findStyle(t)}initDefaultContentAlign(){this.align=this.rtl?J.RIGHT:J.LEFT}findStyle(t){if(!t||t instanceof ShadowRoot){return}if(t.nodeName.toUpperCase()==="HTML"||t.nodeName.toUpperCase()==="BODY"){return}if(this.bold===undefined){this.bold=$n(w(t))}if(this.italic===undefined){this.italic=Yn(w(t))}if(this.underline===undefined){this.underline=qn(w(t))}if(this.strikethrough===undefined){this.strikethrough=Wn(w(t))}if(this.list===undefined){this.list=Fn(w(t))}if(this.fontSize===undefined){this.fontSize=Un(w(t))}if(P({element:t,container:this.containerRef})){const e=t.nodeName.toUpperCase();this.disabledTitle=e==="H1"||e==="H2"||e==="H3"||e==="H4"||e==="H5"||e==="H6";this.align=Kn(w(t));return}this.findStyle(t.parentNode)}initLink(t){if(!t){return}let e=t.anchorNode;if(!e){return}if(e.nodeType===3){e=e.parentElement}this.link=e.nodeName&&e.nodeName.toLowerCase()==="a"}reset(t,e){if(t){et()}this.setToolsActivated(false);if(t){this.toolbarActivated.emit(false)}this.selection=null;this.selectionParagraph=null;this.toolbarActions=tt.STYLE;this.anchorLink=null;this.link=false;if(e&&document.activeElement&&document.activeElement instanceof HTMLElement){document.activeElement.blur()}}openLink(){this.toolbarActions=tt.LINK}setToolsActivated(t){this.toolsActivated=t;if(t){this.debounceDisplayToolsActivated()}else{this.displayToolsActivated=false}}execCommand(t){this.onAttributesChangesInitStyle();if(St.state.toolbar.command==="native"){oi(t)}else{ii(this.selection,t,this.containerRef)}const{cmd:e}=t;if(e==="list"||lt()){this.reset(true)}if(!this.selectionParagraph){return}this.styleDidChange.emit(w(this.selectionParagraph))}onAttributesChangesInitStyle(){const t=Z(this.selection);if(!t){return}const e=new MutationObserver((()=>{e.disconnect();this.initStyleForNode(t)}));e.observe(t,{attributes:true})}render(){var t,e;let i=this.displayToolsActivated?"tools tools-activated":"tools";const o=((t=this.toolsPosition)===null||t===void 0?void 0:t.position)||"above";const s=this.toolsPosition?{"--actions-top":`${this.toolsPosition.top}px`,"--actions-left":this.toolsPosition.left,"--actions-right":this.toolsPosition.right,"--actions-translate-x":`${this.toolsPosition.align==="center"?"-50%":"0"}`,"--actions-translate-y":`${this.toolsPosition.position==="above"?"-100%":"0"}`}:undefined;return n("div",{class:i,ref:t=>this.tools=t,style:s,onClick:t=>t.stopPropagation(),onMouseDown:t=>this.onContainerClick(t),onTouchStart:t=>this.onContainerClick(t)},n("stylo-toolbar-triangle",{class:o==="above"?"bottom":"top",style:{"--stylo-toolbar-triangle-start":`${(e=this.toolsPosition)===null||e===void 0?void 0:e.anchorLeft}px`}}),this.renderActions())}renderActions(){if(this.toolbarActions===tt.LINK){return n("stylo-toolbar-link",{containerRef:this.containerRef,toolbarActions:this.toolbarActions,anchorLink:this.anchorLink,linkCreated:this.linkCreated,onLinkModified:t=>this.reset(t.detail),onClose:()=>this.reset(false)})}if(this.toolbarActions===tt.COLOR||this.toolbarActions===tt.BACKGROUND_COLOR){return n("stylo-toolbar-color",{containerRef:this.containerRef,action:this.toolbarActions===tt.BACKGROUND_COLOR?"background-color":"color",onExecCommand:this.onExecCommand,onClose:()=>this.reset(false)})}if(this.toolbarActions===tt.ALIGNMENT){return n("stylo-toolbar-align",{containerRef:this.containerRef,anchorEvent:this.anchorEvent.$event,align:this.align,onAlignModified:()=>this.reset(true)})}if(this.toolbarActions===tt.LIST){return n("stylo-toolbar-list",{list:this.list,onExecCommand:this.onExecCommand})}if(this.toolbarActions===tt.FONT_SIZE){return n("stylo-toolbar-font-size",{fontSize:this.fontSize,onExecCommand:this.onExecCommand})}return n(vi,{align:this.align,list:this.list,switchToolbarActions:this.switchToolbarActions,bold:this.bold,disabledTitle:this.disabledTitle,italic:this.italic,strikethrough:this.strikethrough,underline:this.underline,link:this.link,onExecCommand:this.onExecCommand,toggleLink:this.toggleLink})}get el(){return r(this)}static get watchers(){return{containerRef:["onContainerRef"],config:["onConfigChange"]}}};gi.style=pi;const bi=(t,e,n)=>{const i=w(t.target);const o=w(y({element:i,container:e}));if(!o){return}o.style.textAlign=(o===null||o===void 0?void 0:o.style.textAlign)===n?"":n};const mi=":host{display:flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}";const yi=class{constructor(t){i(this,t);this.alignModified=o(this,"alignModified",7);this.anchorEvent=undefined;this.align=undefined;this.containerRef=undefined}justifyContent(t,e){t.stopPropagation();if(St.state.toolbar.command==="native"){ai(e)}else{bi(this.anchorEvent,this.containerRef,e)}this.alignModified.emit()}render(){return n(s,null,n("stylo-toolbar-button",{label:qt.state.toolbar.align_left,onAction:t=>this.justifyContent(t.detail,J.LEFT),class:this.align===J.LEFT?"active":undefined},n(di,null)),n("stylo-toolbar-button",{label:qt.state.toolbar.align_center,onAction:t=>this.justifyContent(t.detail,J.CENTER),class:this.align===J.CENTER?"active":undefined},n(li,null)),n("stylo-toolbar-button",{label:qt.state.toolbar.align_right,onAction:t=>this.justifyContent(t.detail,J.RIGHT),class:this.align===J.RIGHT?"active":undefined},n(ci,null)))}};yi.style=mi;const wi=".host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}button{pointer-events:initial;cursor:pointer;margin:0;padding:4px 6px 6px;height:40px;z-index:var(--stylo-toolbar-button-zindex, 2);display:flex;justify-content:center;align-items:center;border:0;color:var(--stylo-toolbar-button-color, black);transition:0.1s background-color, 0.1s border-color, 0.1s fill;background:transparent;font-size:var(--stylo-toolbar-button-font-size, 1.4rem);font-family:var(--stylo-toolbar-button-font-family, inherit);-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:0}button.active{color:var(--stylo-toolbar-button-color-active, var(--highlight))}button[disabled]{color:var(--stylo-toolbar-button-color-disabled, var(--light));display:var(--stylo-toolbar-button-display-disabled, none)}button.active>div{background-color:var(--stylo-toolbar-button-color-active, var(--highlight))}button[disabled]>div{background-color:var(--stylo-toolbar-button-color-disabled, var(--light))}::slotted(*){pointer-events:none}::slotted(svg){width:18px;height:18px;padding-bottom:2px}";const xi=class{constructor(t){i(this,t);this.action=o(this,"action",7);this.disableAction=false;this.cssClass=undefined;this.label=undefined}render(){return n("button",{onMouseDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>{t.stopPropagation();this.action.emit(t)},disabled:this.disableAction,class:this.cssClass,"aria-label":this.label},n("slot",null))}};xi.style=wi;const ki=":host{padding:4px 0}:host stylo-color{pointer-events:all}";const Ci=class{constructor(t){i(this,t);this.execCommand=o(this,"execCommand",7);this.close=o(this,"close",7);this.closeToolbar=()=>{this.close.emit()};this.action=undefined;this.containerRef=undefined;this.colorRgb=undefined}componentWillLoad(){this.initColor()}connectedCallback(){this.addListener()}disconnectedCallback(){this.removeListener()}addListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.addEventListener("click",this.closeToolbar,{passive:true})}removeListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.removeEventListener("click",this.closeToolbar)}initColor(){const{range:t,selection:e}=te(this.containerRef);this.range=t;const n=Z(e);if(!n){return}const i=Bn(n,this.action==="color"?"color":"background-color",this.containerRef);if(!i){return}const o=window===null||window===void 0?void 0:window.getComputedStyle(w(i));this.colorRgb=(this.action==="color"?o.color:o.backgroundColor).replace("rgb(","").replace(")","")}selectColor(t){const e=Gt(this.containerRef);if(!e||!t||!t.detail){return}if(!this.action){return}e===null||e===void 0?void 0:e.removeAllRanges();e===null||e===void 0?void 0:e.addRange(this.range);const n=new MutationObserver((t=>{n.disconnect();this.range=e===null||e===void 0?void 0:e.getRangeAt(0)}));const i=Z(e);if(!i){return}n.observe(i,{childList:true});this.execCommand.emit({cmd:"style",detail:{style:this.action,value:t.detail.hex,initial:e=>{const n=nt(t.detail.hex);return e&&(e.style[this.action]===t.detail.hex||e.style[this.action]===`rgb(${n})`)}}})}render(){return n("stylo-color",{"color-rgb":this.colorRgb,onColorChange:t=>this.selectColor(t),palette:St.state.toolbar.palette})}};Ci.style=ki;const zi=":host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;display:flex}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}stylo-toolbar-button:first-of-type{--stylo-toolbar-button-font-size:0.8rem}stylo-toolbar-button:nth-of-type(2){--stylo-toolbar-button-font-size:1rem}stylo-toolbar-button:nth-of-type(3){--stylo-toolbar-button-font-size:1.2rem}stylo-toolbar-button:nth-of-type(5){--stylo-toolbar-button-font-size:1.6rem}stylo-toolbar-button:nth-of-type(6){--stylo-toolbar-button-font-size:1.8rem}stylo-toolbar-button:nth-of-type(7){--stylo-toolbar-button-font-size:2rem}";const Mi=class{constructor(t){i(this,t);this.execCommand=o(this,"execCommand",7);this.fontSize=undefined}modifyFontSize(t,e){t.stopPropagation();const n=Object.keys(G).find((t=>G[t]===e));this.execCommand.emit({cmd:"style",detail:{style:"font-size",value:n.toLowerCase().replace("_","-"),initial:t=>t&&t.style["font-size"]===n.toLowerCase().replace("_","-")}});this.fontSize=e}render(){return n(s,null,this.renderAction(G.X_SMALL),this.renderAction(G.SMALL),this.renderAction(G.MEDIUM),this.renderAction(G.LARGE),this.renderAction(G.X_LARGE),this.renderAction(G.XX_LARGE),this.renderAction(G.XXX_LARGE))}renderAction(t){return n("stylo-toolbar-button",{label:`${qt.state.toolbar.font_size} ${t}`,onAction:e=>this.modifyFontSize(e.detail,t),class:this.fontSize===t?"active":undefined},n("span",null,t.toString()))}};Mi.style=zi;const Pi=":host{width:100%;height:100%;z-index:var(--stylo-toolbar-link-zindex, 2)}:host input{pointer-events:visible;background:transparent;width:97%;height:100%;color:var(--stylo-toolbar-link-color, black);border:none;outline:0;font-size:16px}:host input::-moz-placeholder{color:var(--stylo-toolbar-link-placeholder-color, black)}:host input::placeholder{color:var(--stylo-toolbar-link-placeholder-color, black)}";const Li=class{constructor(t){i(this,t);this.linkModified=o(this,"linkModified",7);this.close=o(this,"close",7);this.closeToolbar=()=>{this.close.emit()};this.containerRef=undefined;this.toolbarActions=undefined;this.anchorLink=undefined;this.linkCreated=undefined}componentDidLoad(){setTimeout((()=>{var t;return(t=this.input)===null||t===void 0?void 0:t.focus()}),250)}connectedCallback(){this.addListener()}disconnectedCallback(){this.removeListener()}addListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.addEventListener("click",this.closeToolbar,{passive:true})}removeListener(){const t=this.containerRef||document;t===null||t===void 0?void 0:t.removeEventListener("click",this.closeToolbar)}handleLinkInput(t){this.linkUrl=t.target.value}createLink(){if(!this.anchorLink){return}const{range:t}=this.anchorLink;if(!t){return}if(!this.linkUrl||this.linkUrl.length<=0){return}ln({range:t,linkUrl:this.linkUrl});const e=y({element:t.commonAncestorContainer,container:this.containerRef});if(!e){return}this.linkCreated.emit(w(e))}handleLinkEnter(t){if(!t){return}if(this.toolbarActions===tt.STYLE&&(t.key.toLowerCase()==="backspace"||t.key.toLowerCase()==="delete")){this.linkModified.emit(false)}else if(this.toolbarActions===tt.LINK&&t.key.toLowerCase()==="enter"){this.createLink();this.linkModified.emit(true)}}render(){return n(s,null,n("input",{ref:t=>this.input=t,placeholder:"Add a link...",onInput:t=>this.handleLinkInput(t),onKeyUp:t=>this.handleLinkEnter(t)}))}};Li.style=Pi;const Hi=":host{display:flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}";const Ai=class{constructor(t){i(this,t);this.execCommand=o(this,"execCommand",7);this.list=undefined}toggleList(t,e){t.stopPropagation();this.execCommand.emit({cmd:"list",detail:{type:e}})}render(){return n(s,null,n("stylo-toolbar-button",{label:qt.state.toolbar.list_ol,onAction:t=>this.toggleList(t.detail,"ol"),class:this.list===Q.ORDERED?"active":undefined},n(zn,null)),n("stylo-toolbar-button",{label:qt.state.toolbar.list_ul,onAction:t=>this.toggleList(t.detail,"ul"),class:this.list===Q.UNORDERED?"active":undefined},n(Mn,null)))}};Ai.style=Hi;const Oi=":host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}div.separator{display:inline-block;vertical-align:middle;width:1px;min-width:1px;margin:0 6px;height:24px;background:var(--stylo-toolbar-separator-background, var(--light))}";const Ti=class{constructor(t){i(this,t)}render(){return n("div",{class:"separator"})}};Ti.style=Oi;const _i=":host{display:inline-flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button{margin:0 2px}stylo-toolbar-button.italic span{font-style:italic}stylo-toolbar-button.underline.active span{border-bottom:1px solid var(--stylo-toolbar-button-color-active, var(--highlight))}stylo-toolbar-button.underline span{border-bottom:1px solid var(--stylo-toolbar-button-color, black)}";const Si=class{constructor(t){i(this,t);this.execCommand=o(this,"execCommand",7);this.disabledTitle=false;this.bold=undefined;this.italic=undefined;this.underline=undefined;this.strikethrough=undefined}styleBold(t){t.stopPropagation();this.execCommand.emit(Sn)}styleItalic(t){t.stopPropagation();this.execCommand.emit(In)}styleUnderline(t){t.stopPropagation();this.execCommand.emit(Rn)}styleStrikeThrough(t){t.stopPropagation();this.execCommand.emit(Dn)}render(){return n(s,null,n("stylo-toolbar-button",{label:qt.state.toolbar.bold,onAction:t=>this.styleBold(t.detail),disableAction:this.disabledTitle,cssClass:this.bold?"active":undefined,class:"bold"},n("span",null,"B")),n("stylo-toolbar-button",{label:qt.state.toolbar.italic,onAction:t=>this.styleItalic(t.detail),cssClass:this.italic?"active":undefined,class:"italic"},n("span",null,"I")),n("stylo-toolbar-button",{label:qt.state.toolbar.underline,onAction:t=>this.styleUnderline(t.detail),cssClass:this.underline?"active":undefined,class:this.underline?"active underline":"underline"},n("span",null,"U")),n("stylo-toolbar-button",{label:qt.state.toolbar.strikethrough,onAction:t=>this.styleStrikeThrough(t.detail),cssClass:this.strikethrough?"active":undefined,class:"strikethrough"},n("span",{style:{"text-decoration":"line-through"}},"S")))}};Si.style=_i;const Ii=":host(.top) div.triangle{bottom:unset;top:0;transform:rotate(180deg) translate(50%, 100%)}div.triangle{z-index:1;--triangle-width:var(--stylo-triangle-width, 22px);--triangle-half-width:calc(var(--triangle-width) / 2);--triangle-start:calc(var(--stylo-toolbar-triangle-center) - var(--triangle-half-width));position:absolute;width:0;height:0;bottom:0;left:var(--triangle-start, var(--stylo-toolbar-triangle-start));transform:translate(0, 100%);background:transparent;border-left:var(--triangle-half-width) solid transparent;border-right:var(--triangle-half-width) solid transparent;border-top:var(--triangle-half-width) solid var(--stylo-background, var(--white));filter:drop-shadow(var(--stylo-triangle-drop-shadow))}";const Ri=class{constructor(t){i(this,t);this.mobile=undefined}render(){if(this.mobile){return undefined}return n("div",{class:"triangle"})}};Ri.style=Ii;export{oe as stylo_add,re as stylo_color,le as stylo_color_input,yn as stylo_editor,Hn as stylo_list,On as stylo_menus,_n as stylo_plugins,gi as stylo_toolbar,yi as stylo_toolbar_align,xi as stylo_toolbar_button,Ci as stylo_toolbar_color,Mi as stylo_toolbar_font_size,Li as stylo_toolbar_link,Ai as stylo_toolbar_list,Ti as stylo_toolbar_separator,Si as stylo_toolbar_text,Ri as stylo_toolbar_triangle};
//# sourceMappingURL=p-dfa8c704.entry.js.map