import{g as t,f as o,h as i,r as e,c as n,H as r,a as s,F as a}from"./p-cd9043c8.js";import{h as l,b as c,d as h,u as d,i as u,a as f,e as p,D as v,k as g,l as b,m as y,n as m,o as w,p as x,c as k,q as C,r as M,s as L,v as P,w as A,x as z,y as R,z as _,A as O,B as T,C as H,E as S,F as j,G as D,H as I,I as W,J as N,K as E,L as B,j as $,g as U,f as K,M as V,T as F,N as Z}from"./p-4d44848e.js";function Y(t){if(!t||void 0===t||""===t)return;let o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o?`${parseInt(o[1],16)}, ${parseInt(o[2],16)}, ${parseInt(o[3],16)}`:void 0}function X(t){return t.changedTouches?t.changedTouches[0]:t}function q(t,o){let i;return(...e)=>{i&&clearTimeout(i),i=setTimeout((()=>t(...e)),o&&o>0?o:300)}}function G(){if(!window)return!1;let t=window.matchMedia("(any-pointer:coarse)").matches,o=window.matchMedia("(any-pointer:fine)").matches;return t&&!o}function J(){if(!window||!navigator)return!1;let t=it();return/iPhone|iPod/i.test(t)||function(){if(!window||!navigator)return!1;let t=it();return!!/iPad/i.test(t)||/Macintosh/i.test(t)&&G()}()}function Q(){if(!window||!navigator)return!1;let t=it();return/firefox/i.test(t)}var tt=()=>/apple/i.test(navigator.vendor);function ot(){let t=document.documentElement.getAttribute("dir");return null!==t&&"rtl"===t}var it=()=>navigator.userAgent||navigator.vendor||window.opera;const et=t=>!("isConnected"in t)||t.isConnected,nt=(()=>{let t;return(...o)=>{t&&clearTimeout(t),t=setTimeout((()=>{t=0,(t=>{for(let o of t.keys())t.set(o,t.get(o).filter(et))})(...o)}),2e3)}})(),rt=(i,e)=>{const n=((t,o=((t,o)=>t!==o))=>{let i=new Map(Object.entries(null!=t?t:{}));const e={dispose:[],get:[],set:[],reset:[]},n=()=>{i=new Map(Object.entries(null!=t?t:{})),e.reset.forEach((t=>t()))},r=t=>(e.get.forEach((o=>o(t))),i.get(t)),s=(t,n)=>{const r=i.get(t);o(n,r,t)&&(i.set(t,n),e.set.forEach((o=>o(t,n,r))))},a="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t,o)=>r(o),ownKeys:()=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,o)=>i.has(o),set:(t,o,i)=>(s(o,i),!0)}),l=(t,o)=>(e[t].push(o),()=>{((t,o)=>{const i=t.indexOf(o);i>=0&&(t[i]=t[t.length-1],t.length--)})(e[t],o)});return{state:a,get:r,set:s,on:l,onChange:(o,i)=>{const e=l("set",((t,e)=>{t===o&&i(e)})),n=l("reset",(()=>i(t[o])));return()=>{e(),n()}},use:(...t)=>{const o=t.reduce(((t,o)=>(o.set&&t.push(l("set",o.set)),o.get&&t.push(l("get",o.get)),o.reset&&t.push(l("reset",o.reset)),o.dispose&&t.push(l("dispose",o.dispose)),t)),[]);return()=>o.forEach((t=>t()))},dispose:()=>{e.dispose.forEach((t=>t())),n()},reset:n,forceUpdate:t=>{const o=i.get(t);e.set.forEach((i=>i(t,o,o)))}}})(i,e);return n.use((()=>{if("function"!=typeof t)return{};const i=new Map;return{dispose:()=>i.clear(),get:o=>{const e=t();e&&((t,o,i)=>{const e=t.get(o);e?e.includes(i)||e.push(i):t.set(o,[i])})(i,o,e)},set:t=>{const e=i.get(t);e&&i.set(t,e.filter(o)),nt(i)},reset:()=>{i.forEach((t=>t.forEach(o))),nt(i)}}})()),n},st=[l,c,h,d,u,f,p],at={palette:v,command:"native",style:{list:!1,align:!0,fontSize:!0,backgroundColor:!0}},lt=["div","p","span"],ct=["h1","h2","h3","div","p"],ht=["placeholder","data-gramm","class","spellcheck","contenteditable"],{state:dt,onChange:ut}=rt({plugins:st,toolbar:at,placeholders:lt,textParagraphs:ct,menus:void 0,excludeAttributes:ht}),ft={state:dt,onChange:ut},{state:pt,onChange:vt}=rt({ref:void 0,size:void 0}),gt={state:pt,onChange:vt},bt={lang:"en",plugins:{huge_title:"Huge title",large_title:"Large title",small_title:"Small title",paragraph:"Paragraph",separator:"Separator",list:"List",image:"Image",code:"Code"},add:{placeholder:'Press "/" for plugins',add_element:"Add a new part"},toolbar:{align_left:"Align left",align_center:"Align center",align_right:"Align right",font_size:"Font size",list_ol:"Ordered list",list_ul:"Unordered list",style_list:"Style list",style_align:"Style alignment",style_font_size:"Style font size",style_color:"Style color",style_background:"Style background",link:"Create or remove link",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough"},menus:{img_width_original:"Original image width",img_width_large:"Large image width",img_width_medium:"Medium image width",img_width_small:"Small image width",img_delete:"Delete image"}},{state:yt,onChange:mt}=rt(bt);mt("lang",(async t=>{let o;switch(t){case"es":o=await(async()=>{const{es:t}=await import("./p-1d582528.js");return t})();break;case"de":o=await(async()=>{const{de:t}=await import("./p-faf4afa1.js");return t})();break;case"nl":o=await(async()=>{const{nl:t}=await import("./p-9c958c43.js");return t})();break;default:o=bt}Object.assign(yt,Object.assign({custom:yt.custom},o))}));const wt={state:yt},xt=t=>kt(t)&&Ct(t)?Mt(t):g(),kt=t=>(null==t?void 0:t.getRootNode())instanceof ShadowRoot,Ct=t=>(null==t?void 0:t.getRootNode()).getSelection,Mt=t=>t.getRootNode().getSelection(),Lt=t=>{const o=xt(t);return!o||o.rangeCount<=0?{range:null,selection:null}:{selection:o,range:o.getRangeAt(0)}},Pt=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288M400 256H112"}));let At=class{constructor(t){e(this,t),this.listPlugins=n(this,"listPlugins",7),this.hidePlugins=n(this,"hidePlugins",7),this.initParagraph=t=>{if(!t)return void this.hide();const o=b({element:t,container:gt.state.ref});this.paragraph=y(o),this.paragraph?(this.top=this.paragraph.offsetTop,this.addPlaceholder()):this.hide()}}componentDidLoad(){null===window||void 0===window||window.addEventListener("resize",(()=>this.hide()))}disconnectedCallback(){null===window||void 0===window||window.removeEventListener("resize",(()=>this.hide()))}onKeyDown({code:t}){["ArrowDown","ArrowUp","Enter"].includes(t)||this.removePlaceholder(),["Enter"].includes(t)}onKeyUp({code:t}){var o;["ArrowDown","ArrowUp","Enter"].includes(t)?["ArrowDown","ArrowUp"].includes(t)&&this.initParagraph(null===(o=xt(gt.state.ref))||void 0===o?void 0:o.anchorNode):void 0!==this.top&&this.hide()}onBeforeInput({data:t}){["/"].includes(t)?this.paragraph&&this.paragraph.isConnected&&(m({paragraph:this.paragraph})?this.focusListPlugins():this.hidePlugins.emit()):this.hidePlugins.emit()}onClick({target:t}){this.initParagraph(t)}onAddParagraphs({detail:t}){this.initParagraph(t[0])}hide(){G()||(this.top=void 0)}addPlaceholder(){var t;if(this.removePlaceholder(),!m({paragraph:this.paragraph}))return;if(w({paragraph:this.paragraph}))return;if(!ft.state.placeholders.includes(null===(t=this.paragraph)||void 0===t?void 0:t.nodeName.toLowerCase()))return;const o=window.getComputedStyle(this.paragraph,":before");['""',"none"].includes(o.getPropertyValue("content"))&&setTimeout((()=>this.paragraph.setAttribute("placeholder",wt.state.add.placeholder)),150)}removePlaceholder(){var t;const o=null===(t=gt.state.ref)||void 0===t?void 0:t.querySelectorAll("[placeholder]");null==o||o.forEach((t=>t.removeAttribute("placeholder")))}selectPlugins(t){if(!this.paragraph||!gt.state.ref)return;if(t.stopPropagation(),m({paragraph:this.paragraph})&&!w({paragraph:this.paragraph}))return void this.focusListPlugins();x({paragraph:this.paragraph}),new MutationObserver(((t,o)=>{o.disconnect();const i=t.reduce(((t,{addedNodes:o})=>[...t,...Array.from(o)]),[]).find((t=>"div"===t.nodeName.toLowerCase()));C(i),this.listPlugins.emit(i)})).observe(gt.state.ref,{childList:!0,subtree:!0});const o=k({nodeName:"div"});this.paragraph.after(o),this.hide()}focusListPlugins(){x({paragraph:this.paragraph}),this.listPlugins.emit(this.paragraph)}render(){return i(r,{style:void 0===this.top?{display:"none"}:{"--actions-top":`${this.top}px`}},i("button",{type:"button","aria-label":wt.state.add.add_element,onClick:t=>this.selectPlugins(t),onKeyDown:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation()},i(Pt,null)))}};At.style=":host{display:block;position:absolute;top:var(--actions-top);left:var(--stylo-add-left, 8px);transition:top 0.1s ease;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}button{display:flex;position:relative;isolation:isolate;overflow:hidden;background:transparent;border:none;outline:none;cursor:pointer;transition:color 0.25s ease-out, background 0.25s ease-out, transform 0.15s ease-out;flex-direction:column;justify-content:center;align-items:center;border-radius:50%;width:1.4rem;height:1.4rem;color:var(--medium)}button:active{box-shadow:none;transform:translateX(1px) translateY(1px)}button:hover,button:focus{color:var(--light-contrast)}svg{width:1.2rem;height:1.2rem}";let zt=class{constructor(t){e(this,t),this.colorChange=n(this,"colorChange",7),this.palette=v,this.inputAlt="Input a color (hex)",this.selectedColorPalette=!1,this.debounceInitSelectedColorPalette=q((()=>{this.selectedColorPalette=this.initSelectedColorPalette(),this.selectedCustomColorRgb=this.selectedColorPalette?void 0:this.selectedColorRgb}),150),this.selectColor=t=>{const o=t.detail;this.applyColorHexChange(o.hex,o.rgb),this.colorChange.emit(o)}}componentWillLoad(){this.selectedColorHex=this.colorHex,this.selectedColorRgb=this.colorRgb?this.colorRgb:Y(this.colorHex),this.selectedColorPalette=this.initSelectedColorPalette(),this.selectedColorPalette||(this.selectedCustomColorRgb=this.selectedColorRgb)}async onColorHexChange(){this.applyColorHexChange(this.colorHex,void 0)}applyColorHexChange(t,o){this.selectedColorHex=t,this.selectedColorRgb=o,this.debounceInitSelectedColorPalette(),this.palette=[...this.palette]}async onColorRgbChange(){this.selectedColorHex=void 0,this.selectedColorRgb=this.colorRgb,this.debounceInitSelectedColorPalette(),this.palette=[...this.palette]}pickColor(t){!this.palette||this.palette.length<=0||(this.selectedColorHex=t.color?t.color.hex:void 0,this.selectedColorRgb=t.color?t.color.rgb:void 0,this.colorChange.emit(t.color),this.selectedColorPalette=!0,this.selectedCustomColorRgb=void 0)}isHexColorSelected(t){return!!(t&&t.color&&t.color.hex)&&!!this.selectedColorHex&&this.selectedColorHex.toUpperCase()===t.color.hex.toUpperCase()}isRgbColorSelected(t){return!!(t&&t.color&&t.color.rgb)&&!!this.selectedColorRgb&&this.selectedColorRgb.replace(/\s/g,"").toUpperCase()===t.color.rgb.replace(/\s/g,"").toUpperCase()}initSelectedColorPalette(){return!(!this.palette||this.palette.length<=0)&&this.palette.findIndex((t=>this.isHexColorSelected(t)||this.isRgbColorSelected(t)))>-1}render(){return i(r,null,this.renderPalette(),this.renderInput())}renderPalette(){return this.palette&&this.palette.length>0?this.palette.map((t=>{const o={"--stylo-palette-color-hex":`${t.color.hex}`,"--stylo-palette-color-rgb":`${t.color.rgb}`};return t.display&&(o["--stylo-palette-border-color"]=t.display.borderColor,o["--stylo-palette-box-shadow-color"]=t.display.boxShadowColor),i("button",{"aria-label":t.alt,class:this.isHexColorSelected(t)||this.isRgbColorSelected(t)?"selected":void 0,style:o,onClick:()=>this.pickColor(t)})})):void 0}renderInput(){return i("stylo-color-input",{colorHex:this.selectedColorHex,colorRgb:this.selectedColorRgb,customColorRgb:this.selectedCustomColorRgb,inputAlt:this.inputAlt,onSelectHexColor:this.selectColor})}get el(){return s(this)}static get watchers(){return{colorHex:["onColorHexChange"],colorRgb:["onColorRgbChange"]}}};zt.style=":host{display:flex;align-items:center;flex-wrap:var(--stylo-color-flex-wrap, wrap);overflow:var(--stylo-color-overflow, visible);padding:var(--stylo-color-padding, 8px);width:var(--stylo-color-width, 288px)}button{width:var(--stylo-color-button-width, 28px);height:var(--stylo-color-button-height, 28px);margin:var(--stylo-color-button-margin, 4px);padding:0;outline:var(--stylo-color-button-outline, none);cursor:pointer;border:1px solid var(--stylo-palette-border-color, var(--stylo-palette-color-hex));border-radius:var(--stylo-color-button-border-radius, 2px);background:var(--stylo-palette-color-hex)}button.selected{box-shadow:0 0 4px 4px rgba(var(--stylo-palette-box-shadow-color, var(--stylo-palette-color-rgb)), 0.4)}button:not(.selected):hover,button:not(.selected):focus{box-shadow:0 0 2px 2px rgba(var(--stylo-palette-box-shadow-color, var(--stylo-palette-color-rgb)), 0.4)}";let Rt=class{constructor(t){e(this,t),this.selectHexColor=n(this,"selectHexColor",7),this.debounceSelectColor=q((t=>this.emitColor(t)),500)}async componentWillLoad(){this.color=this.initColorHex()}async watchColors(){this.color=this.initColorHex()}initColorHex(){return this.colorHex?this.colorHex:(t=this.customColorRgb?this.customColorRgb:this.colorRgb)?(t=>{if(t)return`#${t.map((t=>t.toString(16).padStart(2,"0"))).join("")}`})(function(t){let o=t.match(/([.\d]+),\s*([.\d]+),\s*([.\d]+)/);if(o)return o.splice(1,3).map((t=>Number(t)))}(t)):void 0;var t}emitColor(t){const o=`#${t.replace("#","")}`,i=Y(o);i&&this.selectHexColor.emit({hex:o,rgb:i})}render(){var t;return i(r,null,i("span",null,"#"),i("input",{type:"text",name:"color-picker","aria-label":this.inputAlt,onInput:t=>this.debounceSelectColor(t.target.value),value:null===(t=this.color)||void 0===t?void 0:t.replace("#","")}))}static get watchers(){return{colorHex:["watchColors"],colorRgb:["watchColors"],customColorRgb:["watchColors"]}}};Rt.style=":host{display:flex;position:relative;margin:var(--stylo-color-input-margin, 4px);border-radius:var(--stylo-color-input-container-border-radius);border:var(--stylo-color-input-container-border)}span{width:var(--stylo-color-hash-width, 28px);height:var(--stylo-color-hash-height, 28px);display:inline-flex;justify-content:center;align-items:center;background:var(--stylo-color-hash-background, #f0f0f0 none repeat scroll 0 0);color:var(--stylo-color-hash-color, #98a1a4);border-radius:var(--stylo-color-hash-border-radius, 4px 0 0 4px)}input{color:var(--stylo-color-input-color, #666666);background:var(--stylo-color-input-background, inherit);border:none;outline:none;height:var(--stylo-color-input-height, 28px);box-shadow:var(--stylo-color-input-box-shadow, #f0f0f0 0 0 0 1px inset);border-radius:var(--stylo-color-input-border-radius, 0 4px 4px 0);padding:var(--stylo-color-input-padding, 0 4px);max-width:var(--stylo-color-input-max-width, 136px);font-family:var(--stylo-color-input-font-family, inherit)}";const _t=({editorRef:t,message:o,detail:i})=>{const e=new CustomEvent(o,{detail:i,bubbles:!0});null==t||t.dispatchEvent(e)},Ot=({mutations:t,container:o})=>{if(!t||t.length<=0)return[];const i=t.filter((({addedNodes:t})=>(null==t?void 0:t.length)>0)).reduce(((t,{addedNodes:o})=>[...t,...Array.from(o)]),[]);return Dt({nodes:i,container:o})},Tt=({mutations:t,container:o})=>t.filter((({addedNodes:t})=>(null==t?void 0:t.length)>0)).filter((({addedNodes:t})=>!M({element:t[0],container:o}))).filter((({addedNodes:t})=>!m({paragraph:b({element:t[0],container:o})}))),Ht=({mutations:t,container:o})=>t.filter((({removedNodes:t})=>(null==t?void 0:t.length)>0)).filter((({target:t})=>!L({target:t,container:o}))),St=({previousSibling:t,container:o})=>{if(t&&!o.isEqualNode(t))return P(t)?St({previousSibling:t.previousSibling,container:o}):t},jt=({mutations:t,container:o})=>{if(!t||t.length<=0)return[];const i=t.reduce(((t,{target:o})=>[...t,o]),[]);return[...new Set(i.map((t=>b({element:t,container:o}))).filter((t=>void 0!==t&&(null==t?void 0:t.nodeType)!==Node.TEXT_NODE&&(null==t?void 0:t.nodeType)!==Node.COMMENT_NODE)))]},Dt=({nodes:t,container:o})=>t.filter((t=>M({element:t,container:o}))).filter((t=>(null==t?void 0:t.nodeType)!==Node.TEXT_NODE&&(null==t?void 0:t.nodeType)!==Node.COMMENT_NODE)),It=({nodes:t})=>t.filter((t=>!P(t))).map((t=>t)),Wt=({mutations:t,excludeAttributes:o})=>{const i=t.filter((({attributeName:t})=>null!==t));return void 0!==i.find((({attributeName:t})=>o.includes(t)))?[]:i};class Nt{constructor(){this.stackDataMutations=[],this.debounceUpdateInput=q((()=>this.updateData()),500),this.onTreeMutation=t=>{this.addParagraphs(t),this.deleteParagraphs(t),this.updateAddedNodesParagraphs(t)},this.onAttributesMutation=t=>{this.updateParagraphs(Wt({mutations:t,excludeAttributes:ft.state.excludeAttributes}))},this.onDataMutation=t=>{this.stackDataMutations.push(...t),this.debounceUpdateInput()}}init({editorRef:t}){this.editorRef=t,this.treeObserver=new MutationObserver(this.onTreeMutation),this.treeObserver.observe(gt.state.ref,{childList:!0,subtree:!0}),this.attributesObserver=new MutationObserver(this.onAttributesMutation),this.attributesObserver.observe(gt.state.ref,{attributes:!0,subtree:!0}),this.dataObserver=new MutationObserver(this.onDataMutation),this.dataObserver.observe(gt.state.ref,{characterData:!0,subtree:!0})}destroy(){var t,o,i;null===(t=this.treeObserver)||void 0===t||t.disconnect(),null===(o=this.attributesObserver)||void 0===o||o.disconnect(),null===(i=this.dataObserver)||void 0===i||i.disconnect()}addParagraphs(t){if(!gt.state.ref)return;const o=Ot({mutations:t,container:gt.state.ref});o.length<=0||(({editorRef:t,addedParagraphs:o})=>{_t({editorRef:t,detail:o,message:"addParagraphs"})})({editorRef:this.editorRef,addedParagraphs:o})}deleteParagraphs(t){if(!gt.state.ref)return;if(!t||t.length<=0)return;const o=t.reduce(((t,{removedNodes:o,target:i})=>i.isEqualNode(gt.state.ref)?[...t,...Array.from(o)]:t),[]).filter((t=>!P(t))).map((t=>y(t)));o.length<=0||(({editorRef:t,removedParagraphs:o})=>{_t({editorRef:t,detail:o,message:"deleteParagraphs"})})({editorRef:this.editorRef,removedParagraphs:o})}updateAddedNodesParagraphs(t){if(!gt.state.ref)return;if(!t||t.length<=0)return;const o=Tt({mutations:t,container:gt.state.ref}),i=Ht({mutations:t,container:gt.state.ref});this.updateParagraphs([...o,...i])}updateData(){if(!this.stackDataMutations||this.stackDataMutations.length<=0)return;const t=[...this.stackDataMutations];this.stackDataMutations=[],this.updateParagraphs(t)}updateParagraphs(t){if(!gt.state.ref)return;const o=jt({mutations:t,container:gt.state.ref});o.length<=0||(({editorRef:t,updatedParagraphs:o})=>{_t({editorRef:t,detail:o,message:"updateParagraphs"})})({editorRef:this.editorRef,updatedParagraphs:o})}}const{state:Et,onChange:Bt,reset:$t}=rt({undo:void 0,redo:void 0,observe:!0}),Ut={state:Et,onChange:Bt,reset:$t},Kt=({selection:t,container:o})=>{if(!t)return;const{startIndex:i,startIndexDepths:e,startOffset:n,endIndex:r,endIndexDepths:s,endOffset:a,reverse:l}=t,c=o.children[Math.min(i,o.children.length-1)],h=o.children[Math.min(r,o.children.length-1)],d=R({parent:c,indexDepths:e}),u=R({parent:h,indexDepths:s});if(!d||!u)return;if(d.textContent.length<n||u.textContent.length<a)return;const f=document.createRange();l?(f.setEnd(d,n),f.setStart(u,a)):(f.setStart(d,n),f.setEnd(u,a));const p=xt(o);null==p||p.removeAllRanges(),null==p||p.addRange(f),f.detach()},Vt=({container:t,addRemoveParagraphs:o,updateParagraphs:i,selection:e})=>{if(o.length<=0&&i.length<=0)return;Ut.state.undo||(Ut.state.undo=[]);const n={changes:[{type:"paragraph",target:t,data:o.map((({outerHTML:t,index:o,mutation:i})=>({outerHTML:t,mutation:i,index:o})))},{type:"update",target:t,data:i}],selection:e};Ut.state.undo.push(n),Ut.state.redo||(Ut.state.redo=[])},Ft=()=>Yt(Ut.state.undo),Zt=()=>Yt(Ut.state.redo),Yt=t=>{if(t)return t[t.length-1]},Xt=async()=>Gt({popFrom:()=>Ut.state.undo=[...Ut.state.undo.slice(0,Ut.state.undo.length-1)],pushTo:t=>Ut.state.redo.push(t),undoChanges:Ft()}),qt=async()=>Gt({popFrom:()=>Ut.state.redo=[...Ut.state.redo.slice(0,Ut.state.redo.length-1)],pushTo:t=>Ut.state.undo.push(t),undoChanges:Zt()}),Gt=async({popFrom:t,pushTo:o,undoChanges:i})=>{if(!i)return;const{changes:e,selection:n}=i,r=e.map((t=>Jt({undoChange:t,selection:n})));o({changes:await Promise.all(r)}),t()},Jt=async({undoChange:t,selection:o})=>{const{type:i}=t;return"input"===i?Qt({undoChange:t}):"paragraph"===i?to({undoChange:t,selection:o}):oo({undoChange:t,selection:o})},Qt=async({undoChange:t})=>{var o;const{data:i,target:e}=t,n=y(e),{oldValue:r,offset:s,index:a,indexDepths:l}=i,c=n.children[a];let h=R({parent:c,indexDepths:l});if(!h||!P(h)){const t=[...l];t.pop();let i=t.length<=0?h?h.parentNode:void 0:R({parent:c,indexDepths:[...t]});!i&&P(null===(o=y(c))||void 0===o?void 0:o.lastChild)&&(h=y(c).lastChild),h||(i||(i=await ao({paragraph:y(c)||n,container:n})),h=await ro({parent:y(i),container:n}))}const{previousValue:d}=await so({text:h,oldValue:r,container:n});return _({element:h,offset:Math.min(r.length>s?s:r.length,h.nodeValue.length)}),{type:"input",target:n,data:{index:a,indexDepths:l,oldValue:d,offset:s+(d.length-r.length)}}},to=async({undoChange:t,selection:o})=>{const{data:i,target:e}=t,n=y(e),r=i;let s=[];for(const t of r){const{index:o,outerHTML:i,mutation:e}=t;"add"===e&&(await eo({container:n,index:o}),s=[{outerHTML:i,index:o,mutation:"remove"},...s]),"remove"===e&&(await io({container:n,index:o,outerHTML:i}),s=[{outerHTML:i,mutation:"add",index:o},...s])}return Kt({container:n,selection:o}),Object.assign(Object.assign({},t),{data:s})},oo=async({undoChange:t,selection:o})=>{const{data:i,target:e}=t,n=i,r=y(e),s=[];for(const t of n){const{index:o,outerHTML:i}=t,{previousOuterHTML:e}=await no({container:r,index:o,outerHTML:i});s.push({index:o,outerHTML:e})}return Kt({container:r,selection:o}),Object.assign(Object.assign({},t),{data:s})},io=({container:t,index:o,outerHTML:i})=>new Promise((e=>{const n=new MutationObserver((()=>{n.disconnect(),e()}));n.observe(t,{childList:!0,subtree:!0});const r=o-1;-1!==r?t.children[Math.min(r,t.children.length-1)].insertAdjacentHTML("afterend",i):t.insertAdjacentHTML("afterbegin",i)})),eo=({container:t,index:o})=>new Promise((i=>{const e=new MutationObserver((()=>{e.disconnect(),i()}));e.observe(t,{childList:!0,subtree:!0});const n=t.children[Math.min(o,t.children.length-1)];null==n||n.parentElement.removeChild(n)})),no=({container:t,index:o,outerHTML:i})=>new Promise((e=>{const n=t.children[Math.min(o,t.children.length-1)],r=n.outerHTML,s=new MutationObserver((()=>{s.disconnect(),e({previousOuterHTML:r})}));s.observe(t,{childList:!0,subtree:!0}),n.outerHTML=i})),ro=({parent:t,container:o})=>new Promise((i=>{const e=document.createTextNode(""),n=new MutationObserver((()=>{n.disconnect(),i(e)}));n.observe(o,{childList:!0,subtree:!0}),t.prepend(e)})),so=({container:t,oldValue:o,text:i})=>new Promise((e=>{const n=i.nodeValue,r=new MutationObserver((()=>{r.disconnect(),e({previousValue:n})}));r.observe(t,{characterData:!0,subtree:!0}),i.nodeValue=o})),ao=({container:t,paragraph:o})=>new Promise((i=>{var e;const n="br"!==(null===(e=o.lastElementChild)||void 0===e?void 0:e.nodeName.toLowerCase())?y(o.lastElementChild):document.createElement("span"),r=y(n.cloneNode());r.innerHTML="";const s=new MutationObserver((()=>{s.disconnect(),i(r)}));s.observe(t,{childList:!0,subtree:!0}),n.after(r)}));class lo{constructor(){this.onKeyDown=async t=>{const{code:o}=t;["Enter"].includes(o)&&await this.createParagraph(t)}}init(){var t;null===(t=gt.state.ref)||void 0===t||t.addEventListener("keydown",this.onKeyDown)}destroy(){var t;null===(t=gt.state.ref)||void 0===t||t.removeEventListener("keydown",this.onKeyDown)}async createParagraph(t){const{range:o,selection:i}=Lt(gt.state.ref);if(!o)return;const e=y(null==i?void 0:i.anchorNode);if(!e)return;const n=y(b({element:e,container:gt.state.ref}));if(!n)return;if(O({paragraph:n}))return;t.preventDefault(),o.collapse(!0),o.setEndAfter(n);const r=""===o.cloneContents().textContent,{shiftKey:s}=t;if(s||T({paragraph:n}))await this.createLineBreak({anchor:e,paragraph:n,isEndOfParagraph:r,range:o});else if(r){const t=await H({container:gt.state.ref,paragraph:n});S(t)}else await this.createParagraphWithContent({range:o,paragraph:n})}async createParagraphWithContent({paragraph:t,range:o}){Ut.state.observe=!1;const i=this.toUpdateParagraphs([t]),e=o.extractContents(),n=await j({container:gt.state.ref,paragraph:t,fragment:e}),r=this.toAddParagraphs([y(n)]);""===t.textContent&&await D({paragraph:t}),Vt({container:gt.state.ref,addRemoveParagraphs:r,updateParagraphs:i}),Ut.state.observe=!0,C(n)}toAddParagraphs(t){return t.map((t=>({outerHTML:t.outerHTML,index:A(t),mutation:"add"})))}toUpdateParagraphs(t){return t.map((t=>({outerHTML:t.outerHTML,index:A(t)})))}async createLineBreak({anchor:t,paragraph:o,isEndOfParagraph:i,range:e}){Ut.state.observe=!1,Vt({container:gt.state.ref,addRemoveParagraphs:[],updateParagraphs:this.toUpdateParagraphs([o])}),e.setEndAfter(xt(gt.state.ref).anchorNode);const n=await I({paragraph:t,range:e});if(!i||!n)return C(n),void(Ut.state.observe=!0);const r=await W({paragraph:o,element:n});C(r),Ut.state.observe=!0}}const co=[{match:({lastKey:t,key:o})=>J()?["‘","’"].includes(null==t?void 0:t.key)&&" "===o.key:tt()?null===(null==t?void 0:t.key)&&"`"===o.key:"`"===(null==t?void 0:t.key)&&"`"===o.key,transform:()=>document.createElement("mark"),active:({nodeName:t})=>"mark"===t.toLowerCase(),trim:()=>tt()&&!J()?0:"`".length,postTransform:()=>ho()},{match:({lastKey:t,key:o})=>"*"===(null==t?void 0:t.key)&&"*"===o.key,transform:()=>{const t=document.createElement("span");return t.style.fontWeight="bold",t},active:t=>{const{fontWeight:o}=window.getComputedStyle(t);return parseInt(o)>400||"bold"===o},trim:()=>"*".length},{match:({lastKey:t,key:o})=>" "===(null==t?void 0:t.key)&&"_"===o.key,transform:()=>{const t=document.createElement("span");return t.style.fontStyle="italic",t},active:t=>{const{fontStyle:o}=window.getComputedStyle(t);return"italic"===o},trim:()=>"".length}],ho=()=>tt()?Promise.resolve():Q()?uo():fo(),uo=async()=>{var t;const o=null===(t=xt(gt.state.ref))||void 0===t?void 0:t.anchorNode,i=null==o?void 0:o.previousSibling;if(!i)return;const e=P(i)?i:i.firstChild;"`"===e.nodeValue.charAt(e.nodeValue.length-1)&&(Ut.state.observe=!1,await vo({target:e}),Ut.state.observe=!0)},fo=()=>new Promise((t=>{const o=new MutationObserver((async i=>{o.disconnect();const e=i[0].target;Ut.state.observe=!1,await po({target:e,searchValue:"`",replaceValue:""}),Ut.state.observe=!0,S(e),t()}));o.observe(gt.state.ref,{characterData:!0,subtree:!0})})),po=({target:t,searchValue:o,replaceValue:i})=>new Promise((e=>{const n=new MutationObserver((t=>{n.disconnect(),e(t[0].target)}));n.observe(gt.state.ref,{characterData:!0,subtree:!0}),t.nodeValue=t.nodeValue.replace(o,i)})),vo=({target:t})=>new Promise((o=>{const i=new MutationObserver((t=>{i.disconnect(),o(t[0].target)}));i.observe(gt.state.ref,{characterData:!0,subtree:!0}),t.nodeValue=t.nodeValue.slice(0,t.nodeValue.length-1)})),go=({target:t,index:o,transformInput:i})=>new Promise((e=>{const n=new MutationObserver((async()=>{n.disconnect();const t=await bo({target:r,index:1});e(t)}));n.observe(gt.state.ref,{childList:!0,subtree:!0});const r=t.splitText(o-i.trim())})),bo=({target:t,index:o})=>new Promise((i=>{const e=new MutationObserver((t=>{e.disconnect(),i(t[0].target)}));e.observe(gt.state.ref,{characterData:!0,subtree:!0}),t.nodeValue=t.nodeValue.slice(o)}));class yo{constructor(){this.lastBeforeInput=void 0,this.onBeforeInput=async t=>{await this.preventTextLeaves(t),await this.transformInput(t)},this.onKeyDown=t=>{this.deleteContentBackward(t)}}init(){var t,o;null===(t=gt.state.ref)||void 0===t||t.addEventListener("beforeinput",this.onBeforeInput),null===(o=gt.state.ref)||void 0===o||o.addEventListener("keydown",this.onKeyDown)}destroy(){var t,o;null===(t=gt.state.ref)||void 0===t||t.removeEventListener("beforeinput",this.onBeforeInput),null===(o=gt.state.ref)||void 0===o||o.removeEventListener("keydown",this.onKeyDown)}async preventTextLeaves(t){var o;const{range:i,selection:e}=Lt(gt.state.ref);if(!i)return;if(!gt.state.ref.isEqualNode(null==e?void 0:e.anchorNode))return;const{data:n}=t;if(null===n)return;const{startOffset:r}=i,s=R({parent:gt.state.ref,indexDepths:[r]});if(null===(o=ft.state.textParagraphs)||void 0===o?void 0:o.includes(null==s?void 0:s.nodeName.toLowerCase()))return;t.preventDefault();const a=await E({container:gt.state.ref,range:i,text:n});S(a)}async transformInput(t){var o;const{data:i}=t,e=co.find((({match:t})=>t({key:{key:i},lastKey:this.lastBeforeInput})));if(void 0!==e)return await(async({$event:t,transformInput:o})=>{const i=xt(gt.state.ref);if(!i)return;const{focusNode:e}=i;if(!e)return;t.preventDefault(),Ut.state.observe=!1;const n=y(e);(({target:t,parent:o,transformInput:i})=>{const e=N({target:t});if(t.nodeValue.length===e)return!0;const{active:n}=i;return!n(o)})({target:e,parent:n,transformInput:o})&&(await(({target:t,parent:o,transformInput:i})=>new Promise((async e=>{const n=N({target:t});if(t.nodeValue.length===n){const o=new MutationObserver((()=>{o.disconnect(),e()}));return o.observe(gt.state.ref,{characterData:!0,subtree:!0}),void(t.nodeValue=t.nodeValue.substring(0,t.nodeValue.length-i.trim()))}const r=await go({target:t,index:n,transformInput:i}),s=new MutationObserver((()=>{s.disconnect(),e()}));s.observe(gt.state.ref,{childList:!0,subtree:!0}),t.nextSibling?o.insertBefore(r,t.nextSibling):o.appendChild(r)})))({target:e,parent:n,transformInput:o}),Ut.state.observe=!0,await(({target:t,parent:o,transformInput:i})=>new Promise((async e=>{const n=new MutationObserver((t=>{var o;n.disconnect(),S(null===(o=t[0])||void 0===o?void 0:o.addedNodes[0]),e()}));n.observe(gt.state.ref,{childList:!0,subtree:!0});const{active:r,transform:s}=i;if(r(o)){const t=document.createTextNode("​");o.after(t)}else{const i=s();i.innerHTML="​",t.nextSibling?o.insertBefore(i,t.nextSibling):o.appendChild(i)}})))({target:e,parent:n,transformInput:o}))})({$event:t,transformInput:e}),await(null===(o=e.postTransform)||void 0===o?void 0:o.call(e)),void(this.lastBeforeInput=void 0);this.lastBeforeInput={key:i}}deleteContentBackward(t){const{key:o}=t;if(!["Delete","Backspace"].includes(o))return;const{range:i}=Lt(gt.state.ref);if(!i)return;if(!gt.state.ref.isEqualNode(null==i?void 0:i.commonAncestorContainer))return;if(1===i.startOffset&&"​"===i.startContainer.textContent.charAt(0)&&i.setStart(i.startContainer,0),i.startOffset>0)return;if(!B({element:i.startContainer,container:gt.state.ref}))return;const e=y(b({element:i.startContainer,container:gt.state.ref}));if(!e)return;const n=A(e);i.setStart(gt.state.ref,n),t.preventDefault(),t.stopImmediatePropagation(),i.deleteContents()}}class mo{constructor(){this.onKeyDown=t=>{const{key:o}=t;["Tab"].includes(o)&&this.catchTab(t)}}init(){var t;null===(t=gt.state.ref)||void 0===t||t.addEventListener("keydown",this.onKeyDown)}destroy(){var t;null===(t=gt.state.ref)||void 0===t||t.removeEventListener("keydown",this.onKeyDown)}catchTab(t){const{range:o,selection:i}=Lt(gt.state.ref);if(!o)return;if(!P(null==i?void 0:i.focusNode))return;t.preventDefault();const e=document.createTextNode("\t");null==o||o.insertNode(e),S(e)}}class wo{constructor(){this.undoInputs=void 0,this.undoUpdateParagraphs=[],this.undoSelection=void 0,this.debounceUpdateInputs=q((()=>this.stackUndoInputs()),350),this.onKeydown=async t=>{const{key:o,ctrlKey:i,metaKey:e,shiftKey:n}=t;"Enter"!==o?"z"!==o||!i&&!e||n?"z"===o&&(i||e)&&n&&await this.redo(t):await this.undo(t):this.stackUndoInputs()},this.onKeyup=()=>{var t;this.onEventUpdateParagraphs(null===(t=xt(gt.state.ref))||void 0===t?void 0:t.anchorNode)},this.onSelectionChange=()=>this.undoSelection=(t=>{const{range:o,selection:i}=Lt();if(!o)return;const{anchorNode:e,focusNode:n}=i,r=y(b({element:e,container:t})),s=y(b({element:n,container:t}));return r&&s?{startIndex:A(r),startIndexDepths:z({target:e,paragraph:b({element:e,container:t})}),startOffset:i.anchorOffset,endIndex:A(s),endIndexDepths:z({target:n,paragraph:b({element:n,container:t})}),endOffset:i.focusOffset,reverse:!e.isEqualNode(o.startContainer)}:void 0})(gt.state.ref),this.onToolbarActivated=()=>{this.copySelectedParagraphs({filterEmptySelection:!0})},this.onMenuActivated=({detail:t})=>{const{paragraph:o}=t;this.undoUpdateParagraphs=this.toUpdateParagraphs([o])},this.onSnapshotParagraph=({target:t})=>{this.onEventUpdateParagraphs(t)},this.onMouseTouchDown=({target:t})=>{this.onEventUpdateParagraphs(t)},this.onMutation=t=>{const o=this.onParagraphsMutations(t),i=this.onNodesParagraphsMutation(t);Vt({container:gt.state.ref,addRemoveParagraphs:o,updateParagraphs:i,selection:this.undoSelection}),i.length>0||(this.onAttributesMutation(t),this.onCharacterDataMutations(t))}}init(){var t,o,i,e,n;this.undoInputs=void 0,this.undoUpdateParagraphs=[],this.observer=new MutationObserver(this.onMutation),this.observe(),null===(t=gt.state.ref)||void 0===t||t.addEventListener("keydown",this.onKeydown),null===(o=gt.state.ref)||void 0===o||o.addEventListener("keyup",this.onKeyup),null===(i=gt.state.ref)||void 0===i||i.addEventListener("mousedown",this.onMouseTouchDown),null===(e=gt.state.ref)||void 0===e||e.addEventListener("touchstart",this.onMouseTouchDown),null===(n=gt.state.ref)||void 0===n||n.addEventListener("snapshotParagraph",this.onSnapshotParagraph),document.addEventListener("selectionchange",this.onSelectionChange),document.addEventListener("toolbarActivated",this.onToolbarActivated),document.addEventListener("menuActivated",this.onMenuActivated),this.unsubscribe=Ut.onChange("observe",(t=>{if(t)return this.copySelectedParagraphs({filterEmptySelection:!1}),this.undoInputs=void 0,void this.observe();this.disconnect()}))}destroy(){var t,o,i,e,n,r;this.disconnect(),null===(t=gt.state.ref)||void 0===t||t.removeEventListener("keydown",this.onKeydown),null===(o=gt.state.ref)||void 0===o||o.removeEventListener("keyup",this.onKeyup),null===(i=gt.state.ref)||void 0===i||i.removeEventListener("mousedown",this.onMouseTouchDown),null===(e=gt.state.ref)||void 0===e||e.removeEventListener("touchstart",this.onMouseTouchDown),null===(n=gt.state.ref)||void 0===n||n.removeEventListener("snapshotParagraph",this.onSnapshotParagraph),document.removeEventListener("selectionchange",this.onSelectionChange),document.removeEventListener("toolbarActivated",this.onToolbarActivated),document.removeEventListener("menuActivated",this.onMenuActivated),null===(r=this.unsubscribe)||void 0===r||r.call(this)}async undo(t){t.preventDefault(),void 0!==Ft()&&await this.undoRedo({undoRedo:Xt})}async redo(t){t.preventDefault(),void 0!==Zt()&&await this.undoRedo({undoRedo:qt})}stackUndoInputs(){this.copySelectedParagraphs({filterEmptySelection:!1}),this.undoInputs&&((({container:t,data:o})=>{Ut.state.undo||(Ut.state.undo=[]),Ut.state.undo.push({changes:o.map((o=>({type:"input",target:t,data:o})))}),Ut.state.redo=[]})({data:this.undoInputs,container:gt.state.ref}),this.undoInputs=void 0)}async undoRedo({undoRedo:t}){this.disconnect(),await t(),this.observe()}observe(){this.observer.observe(gt.state.ref,{childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,subtree:!0})}disconnect(){var t;null===(t=this.observer)||void 0===t||t.disconnect()}onEventUpdateParagraphs(t){if(!t)return;const o=y(b({element:t,container:gt.state.ref}));o&&(this.undoUpdateParagraphs=this.toUpdateParagraphs([o]))}copySelectedParagraphs({filterEmptySelection:t}){const o=(({container:t,filterEmptySelection:o})=>{const{range:i,selection:e}=Lt(t);if(!i||o&&0===(null==e?void 0:e.toString().length))return;const n=y(b({element:i.startContainer,container:t})),r=y(b({element:i.endContainer,container:t}));if(!r||(null==n?void 0:n.isSameNode(r)))return n?[n]:[];if(n.nextElementSibling.isSameNode(r))return[n,r];const s=[];let a=n.nextElementSibling;for(;null!==a&&!a.isSameNode(r);)s.push(y(a)),a=a.nextElementSibling;return[n,...s,r]})({container:gt.state.ref,filterEmptySelection:t});o&&(this.undoUpdateParagraphs=this.toUpdateParagraphs(o))}toUpdateParagraphs(t){return t.map((t=>({outerHTML:t.outerHTML,index:A(t),paragraph:t})))}onCharacterDataMutations(t){const o=t.filter((({oldValue:t})=>null!==t));o.length<=0||(this.undoInputs||(this.undoInputs=o.map((t=>this.toUndoInput(t))).filter((t=>void 0!==t))),this.undoInputs.length<=0?this.undoInputs=void 0:this.debounceUpdateInputs())}toUndoInput(t){const o=t.target,i=o.nodeValue;if(i===t.oldValue)return;const e=y(b({element:o,container:gt.state.ref}));if(!e||!o.parentNode)return;const n=z({target:o,paragraph:e});return{oldValue:t.oldValue,offset:N({target:o})+(t.oldValue.length-i.length),index:A(e),indexDepths:n}}onParagraphsMutations(t){const o=[];Ot({mutations:t,container:gt.state.ref}).forEach((t=>o.push({outerHTML:this.cleanOuterHTML(t),mutation:"add",index:t.previousElementSibling?A(y(t.previousElementSibling))+1:0})));const i=(({mutations:t,container:o})=>!t||t.length<=0?[]:t.filter((({target:t})=>L({target:t,container:o}))).filter((({removedNodes:t})=>(null==t?void 0:t.length)>0)).reduce(((t,{removedNodes:i,previousSibling:e})=>[...t,...It({nodes:Array.from(i)}).map((t=>({paragraph:t,previousSibling:St({container:o,previousSibling:e})})))]),[]))({mutations:t,container:gt.state.ref}),e=Math.min(...i.map((({previousSibling:t})=>t?A(y(t))+1:0)));return i.forEach((({paragraph:t},i)=>{const n=i+(Number.isFinite(e)?e:0),r=this.undoUpdateParagraphs.find((({index:t})=>t===n));return o.push({outerHTML:(null==r?void 0:r.outerHTML)||this.cleanOuterHTML(t),mutation:"remove",index:n})})),o}onNodesParagraphsMutation(t){const o=Tt({mutations:t,container:gt.state.ref}),i=Ht({mutations:t,container:gt.state.ref});if(!(o.length>0||i.length>0))return[];if(this.undoUpdateParagraphs.length<=0)return[];const e=Ot({mutations:t,container:gt.state.ref}),n=this.undoUpdateParagraphs.filter((({paragraph:t})=>t.isConnected&&void 0===e.find((o=>o.isEqualNode(t)))));return n.length<=0?(this.copySelectedParagraphs({filterEmptySelection:!0}),[]):(this.copySelectedParagraphs({filterEmptySelection:!0}),this.undoInputs=void 0,n)}cleanOuterHTML(t){const o=t.cloneNode(!0);return o.removeAttribute("placeholder"),o.outerHTML}onAttributesMutation(t){const o=jt({mutations:Wt({mutations:t,excludeAttributes:ft.state.excludeAttributes}),container:gt.state.ref});o.length<=0||this.undoUpdateParagraphs.length<=0||(Vt({container:gt.state.ref,addRemoveParagraphs:[],updateParagraphs:this.undoUpdateParagraphs,selection:this.undoSelection}),this.undoUpdateParagraphs=this.toUpdateParagraphs(o))}}let xo=class{constructor(t){e(this,t),this.contentEditable=!0,this.debounceSize=q((()=>this.applySize()),250),this.undoRedoEvents=new wo,this.enterEvents=new lo,this.inputEvents=new yo,this.tabEvents=new mo,this.dataEvents=new Nt,this.mobile=G()}componentWillLoad(){this.init(),this.applyConfig()}componentDidLoad(){null===window||void 0===window||window.addEventListener("resize",this.debounceSize)}disconnectedCallback(){var t;null===window||void 0===window||window.removeEventListener("resize",this.debounceSize),this.destroy(),null===(t=this.attributesObserver)||void 0===t||t.disconnect()}onContainerRefChange(){this.destroy(),this.init()}onConfigChange(){this.destroy(),this.applyConfig(),this.initEvents()}applySize(){var t;G()||(gt.state.size=null===(t=this.containerRef)||void 0===t?void 0:t.getBoundingClientRect())}init(){gt.state.ref=this.containerRef,this.containerRef&&((({rootNode:t})=>{let o=(t===document?document.head:t).querySelector("style[stylo-editor]");null===o&&(o=document.createElement("style"),o.setAttribute("stylo-editor",""),o.innerHTML="\n    .stylo-container > * {\n      white-space: pre-wrap;\n    }\n\n    .stylo-container > *:after {\n      content: attr(placeholder);\n      color: #6e6d6f;\n    }\n  ",t!==document?t.prepend(o):document.head.append(o))})({rootNode:this.containerRef.getRootNode()}),gt.state.ref.classList.add("stylo-container"),this.containerRefEditable(),this.applySize(),this.initEvents())}containerRefEditable(){var t;null===(t=this.attributesObserver)||void 0===t||t.disconnect(),this.attributesObserver=new MutationObserver((t=>{t.find((({attributeName:t})=>["contenteditable"].includes(t.toLowerCase())))&&(this.contentEditable=this.isContentEditable(),this.contentEditable?this.initEvents():this.destroy())})),this.attributesObserver.observe(gt.state.ref,{attributes:!0}),this.contentEditable=this.isContentEditable()}isContentEditable(){return["true",""].includes(this.containerRef.getAttribute("contenteditable"))}applyConfig(){if(!this.config)return;const{plugins:t,toolbar:o,i18n:i,placeholders:e,textParagraphs:n,menus:r,excludeAttributes:s}=this.config;wt.state.custom=null==i?void 0:i.custom,wt.state.lang=(null==i?void 0:i.lang)||"en",ft.state.plugins=t||st,ft.state.toolbar=o?Object.assign(Object.assign({},ft.state.toolbar),o):at,ft.state.placeholders=e||lt,ft.state.textParagraphs=n||ct,ft.state.menus=r,ft.state.excludeAttributes=[...ht,...s||[]]}destroy(){this.undoRedoEvents.destroy(),this.inputEvents.destroy(),this.enterEvents.destroy(),this.tabEvents.destroy(),this.dataEvents.destroy(),Ut.state.undo=[],Ut.state.redo=[]}initEvents(){this.contentEditable&&(this.inputEvents.init(),this.enterEvents.init(),this.tabEvents.init(),this.dataEvents.init({editorRef:this.el}),this.undoRedoEvents.init())}render(){var t;if(this.contentEditable)return i(a,null,i("stylo-add",null),i("stylo-plugins",null),this.renderToolbar(),(null===(t=ft.state.menus)||void 0===t?void 0:t.length)&&i("stylo-menus",null))}renderToolbar(){if(!this.mobile)return i("stylo-toolbar",{containerRef:this.containerRef})}get el(){return s(this)}static get watchers(){return{containerRef:["onContainerRefChange"],config:["onConfigChange"]}}};xo.style=":host{display:block}";const ko=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M160 368L32 256l128-112M352 368l128-112-128-112M304 96l-96 320"})),Co=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("circle",{cx:"256",cy:"256",r:"48"}),i("circle",{cx:"416",cy:"256",r:"48"}),i("circle",{cx:"96",cy:"256",r:"48"})),Mo=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512"},i("path",{d:"M432,112V96a48.14,48.14,0,0,0-48-48H64A48.14,48.14,0,0,0,16,96V352a48.14,48.14,0,0,0,48,48H80",style:{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"32px"}}),i("rect",{x:"96",y:"128",width:"400",height:"336",rx:"45.99",ry:"45.99",style:{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"32px"}}),i("ellipse",{cx:"372.92",cy:"219.64",rx:"30.77",ry:"30.55",style:{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32px"}}),i("path",{d:"M342.15,372.17,255,285.78a30.93,30.93,0,0,0-42.18-1.21L96,387.64",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("path",{d:"M265.23,464,383.82,346.27a31,31,0,0,1,41.46-1.87L496,402.91",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}})),Lo=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512"},i("line",{x1:"160",y1:"144",x2:"448",y2:"144",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("line",{x1:"160",y1:"256",x2:"448",y2:"256",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("line",{x1:"160",y1:"368",x2:"448",y2:"368",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("circle",{cx:"80",cy:"144",r:"16",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("circle",{cx:"80",cy:"256",r:"16",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}}),i("circle",{cx:"80",cy:"368",r:"16",style:{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32px"}})),Po=t=>{switch(t){case"code":return i(ko,null);case"ul":return i(Lo,null);case"hr":return i(Co,null);case"img":return i(Mo,null);default:return}};let Ao=class{constructor(t){e(this,t),this.applyPlugin=n(this,"applyPlugin",7),this.cancelPlugins=n(this,"cancelPlugins",7)}emitPlugin(t,o){t.stopPropagation(),this.applyPlugin.emit(o)}onKeyDown(t){const{code:o}=t;["Escape"].includes(o)?this.cancelPlugins.emit():["ArrowDown"].includes(o)?this.focusNext():(["ArrowUp"].includes(o)&&this.focusPrevious(),["Enter"].includes(o)&&t.stopPropagation())}async focusFirstButton(){var t;this.focusButton=this.el.shadowRoot.querySelector("button"),null===(t=this.focusButton)||void 0===t||t.focus()}focusNext(){var t,o;this.focusButton=y(null===(t=this.focusButton||this.el.shadowRoot.firstElementChild)||void 0===t?void 0:t.nextElementSibling),null===(o=this.focusButton)||void 0===o||o.focus()}focusPrevious(){var t,o;this.focusButton=y(null===(t=this.focusButton||this.el.shadowRoot.lastElementChild)||void 0===t?void 0:t.previousElementSibling),null===(o=this.focusButton)||void 0===o||o.focus()}render(){return i(a,null,ft.state.plugins.map((t=>this.renderPlugin(t))))}renderPlugin(t){var o,e;const{text:n,icon:r}=t,s=Po(r);return i("button",Object.assign({onClick:o=>this.emitPlugin(o,t)},void 0===s&&{innerHTML:r}),s,null!==(e=null!==(o=wt.state.plugins[n])&&void 0!==o?o:wt.state.custom[n])&&void 0!==e?e:n)}get el(){return s(this)}};Ao.style=":host{display:flex;flex-direction:column;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;--background-active:var(--stylo-list-background-active, var(--light));--color-active:var(--stylo-list-color-active, var(--light-contrast))}button{display:flex;position:relative;isolation:isolate;overflow:hidden;background:transparent;border:none;outline:none;cursor:pointer;transition:color 0.25s ease-out, background 0.25s ease-out, transform 0.15s ease-out;justify-content:flex-start;align-items:center;font-size:1rem}button:active{box-shadow:none;transform:translateX(1px) translateY(1px)}button:hover,button:focus{background:var(--background-active);color:var(--color-active)}svg,span.placeholder{width:1.4rem;height:1.4rem;border:1px solid var(--background-active);border-radius:var(--stylo-border, 4px);margin:4px 8px;background:var(--white)}svg{padding:8px}span.placeholder{padding:10px 8px 6px;font-size:0.8rem}span.placeholder::first-letter{font-size:125%}";let zo=class{constructor(t){e(this,t),this.menuActivated=n(this,"menuActivated",7),this.menu=void 0}onKeyDown(){this.hide()}onResize(){this.hide()}onClick({target:t}){var o,i;const e=b({element:t,container:gt.state.ref});this.paragraph=y(e),this.paragraph?(this.menuActivated.emit({paragraph:this.paragraph}),this.menu=null===(o=ft.state.menus)||void 0===o?void 0:o.find((({match:t})=>t({paragraph:this.paragraph}))),this.top=this.menu&&(null===(i=this.paragraph)||void 0===i?void 0:i.offsetTop)):this.hide()}async selectMenuAction({action:t}){this.paragraph?(await t({paragraph:this.paragraph}),this.hide()):this.hide()}hide(){this.paragraph=void 0,this.menu=void 0,this.top=void 0}render(){return i(r,{style:void 0===this.top?{display:"none"}:{"--menu-top":`${this.top}px`}},this.renderMenu(),i("stylo-toolbar-triangle",{style:{"--stylo-toolbar-triangle-start":"50%"}}))}renderMenu(){var t;return null===(t=this.menu)||void 0===t?void 0:t.actions.map((t=>this.renderAction(t)))}renderAction(t){var o,e;const{icon:n,text:r}=t,s=Po(n);return i("stylo-toolbar-button",{onAction:async()=>await this.selectMenuAction(t),label:null!==(e=null!==(o=wt.state.menus[r])&&void 0!==o?o:wt.state.custom[r])&&void 0!==e?e:r},s||i("div",{class:"icon",innerHTML:n}))}};zo.style=":host{display:flex;justify-content:center;align-items:center;position:absolute;top:var(--menu-top);left:50%;transform:translate(-50%, calc(-100% - 16px));--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);padding:var(--stylo-toolbar-padding, 0 8px);z-index:var(--stylo-toolbar-zindex, 1)}div.icon{display:flex;flex-direction:column}";let Ro=class{constructor(t){e(this,t),this.display=!1,this.position=void 0}componentWillLoad(){this.destroyListener=gt.onChange("size",(()=>{G()||this.hide()}))}disconnectedCallback(){var t;null===(t=this.destroyListener)||void 0===t||t.call(this)}onMouseDown(t){this.hide()}onHidePlugins(){this.hide()}hide(){this.display=!1,setTimeout((()=>this.position=void 0),150)}onListPlugins({detail:t}){if(!t)return void this.hide();const{height:o,top:i}=t.getBoundingClientRect(),e=i+220+16<(window.innerHeight||screen.height);this.position={top:t.offsetTop+(e?o:-1*o),left:t.offsetLeft,downward:e},this.paragraph=t,this.displayAndFocus()}displayAndFocus(){new MutationObserver((async(t,o)=>{var i;o.disconnect(),await(null===(i=this.el.shadowRoot.querySelector("stylo-list"))||void 0===i?void 0:i.focusFirstButton())})).observe(this.el,{attributes:!0,subtree:!0}),setTimeout((()=>this.display=!0),150)}onCancelPlugins(){this.hide(),x({paragraph:this.paragraph})}async onApplyPlugin(t){if(!gt.state.ref||!this.paragraph)return;this.hide();const{files:o}=t;void 0===o?await this.transformParagraph({plugin:t}):this.openFilePicker(t)}async transformParagraph({plugin:t,files:o}){const{createParagraphs:i}=t;await i({paragraph:y(this.paragraph),container:gt.state.ref,files:o})}openFilePicker(t){const o=this.filePicker(t);null==o||o.click()}async onFilePickerChange(t){const o=this.filePicker(t);!o||o.files.length<=0||(await this.transformParagraph({plugin:t,files:o.files}),o.value="")}filePicker({files:t}){const{accept:o}=t;return this.el.shadowRoot.querySelector(`input[accept="${o}"]`)}render(){return i(r,{style:void 0===this.position?{}:{"--actions-top":`${this.position.top}px`,"--actions-left":`${this.position.left}px`,"--actions-translate-y":this.position.downward?"0":"-100%"},class:this.display?"display":"hidden"},this.renderList(),this.renderInputs())}renderInputs(){return ft.state.plugins.filter((({files:t})=>void 0!==t)).map((t=>{const{accept:o,multiple:e}=t.files;return i("input",{type:"file",accept:o,multiple:e,onChange:async()=>await this.onFilePickerChange(t)})}))}renderList(){return i("stylo-list",{onApplyPlugin:async({detail:t})=>await this.onApplyPlugin(t),onCancelPlugins:()=>this.onCancelPlugins()})}get el(){return s(this)}};function _o(t,o=!0){t.hasChildNodes()&&o&&Array.from(t.childNodes).forEach((o=>{if(o.hasChildNodes()&&o.childNodes.length>1&&o.firstChild.nodeType!==Node.TEXT_NODE&&o.firstChild.nodeType!==Node.COMMENT_NODE){const i=document.createElement("span");i.append(...Array.from(o.childNodes)),t.parentElement.insertBefore(i,t)}else{const i=document.createTextNode(o.textContent);t.parentElement.insertBefore(i,t)}})),t.parentElement.removeChild(t)}Ro.style=":host{display:flex;flex-direction:column;position:absolute;top:var(--actions-top);left:var(--actions-left);transform:translate(0, var(--actions-translate-y)) scale(0.95);visibility:hidden;opacity:0;margin:2px 0;width:220px;max-height:220px;overflow:scroll;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);pointer-events:none}:host(.hydrated){transition-property:opacity, transform;transition-duration:0.15s, 0.15s;transition-timing-function:cubic-bezier(0.175, 0.885, 0.32, 1.275), cubic-bezier(0.175, 0.885, 0.32, 1.275)}:host(.hydrated.display){visibility:visible;opacity:1;transform:translate(0, var(--actions-translate-y)) scale(1);pointer-events:all}input{visibility:hidden;opacity:0}";const Oo=(t,o,i)=>{if("HTML"===t.nodeName.toUpperCase()||"BODY"===t.nodeName.toUpperCase())return null;if(!t.parentNode)return null;if(M({element:t,container:i}))return null;const{style:e}=y(t);return null!=e[o]&&""!==e[o]?t:Oo(t.parentNode,o,i)},To=(t,o)=>{if(!t)return!1;if(t.nodeName.toLowerCase()===o)return!0;if(t.hasChildNodes()){const i=t.getElementsByTagName(o);return i&&i.length>0}return!1};function Ho(t,o,i){const e=V(t);e&&(e&&e.innerText===t.toString()&&!M({element:e,container:i})&&void 0!==e.style[o.style]?So(e,o,i):function(t,o,i,e){const n=i.getRangeAt(0);if(n.commonAncestorContainer&&["ol","ul","dl"].some((t=>t===n.commonAncestorContainer.nodeName.toLowerCase())))return void So(n.commonAncestorContainer,o,e);const r=n.extractContents(),s=function(t,o,i){const e=document.createElement("span");return e.style[o.style]=Do(t,o,i),e}(t,o,e);s.appendChild(r),jo(o,s),Io(o,s),n.insertNode(s),i.selectAllChildren(s)}(e,o,t,i))}function So(t,o,i){t.style[o.style]=Do(i,o,i),jo(o,t)}function jo(t,o){if(!o.hasChildNodes())return;const i=Array.from(o.children).filter((o=>void 0!==o.style[t.style]&&""!==o.style[t.style]));i&&i.length>0&&i.forEach((o=>{o.style[t.style]="",""!==o.getAttribute("style")&&null!==o.style||o.removeAttribute("style")})),Array.from(o.children).forEach((o=>jo(t,o)))}function Do(t,o,i){if(!t)return o.value;if(o.initial(t))return"initial";const e=Oo(t,o.style,i);return o.initial(e)?"initial":o.value}function Io(t,o){if(!o.hasChildNodes())return;const i=Array.from(o.children).filter((t=>{const o=t.getAttribute("style");return!o||""===o}));i&&i.length>0?i.forEach((t=>{const o=t.querySelectorAll("[style]");if(!o||0===o.length){const o=document.createTextNode(t.textContent);t.parentElement.replaceChild(o,t)}})):Array.from(o.children).forEach((o=>Io(t,o)))}const Wo=()=>i("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}},i("path",{d:"M176,331l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M176,185l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M96,258l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,112l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,400l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}})),No=()=>i("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}},i("path",{d:"M96,331l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M96,185l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M96,258l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,112l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,400l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}})),Eo=()=>i("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}},i("path",{d:"M256,331l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M256,185l160,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"25.3px"}}),i("path",{d:"M96,258l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,112l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}}),i("path",{d:"M96,400l320,0",style:{fill:"none",fillRule:"nonzero",stroke:"currentColor",strokeWidth:"32px"}})),Bo=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{d:"M419.1 337.45a3.94 3.94 0 00-6.1 0c-10.5 12.4-45 46.55-45 77.66 0 27 21.5 48.89 48 48.89h0c26.5 0 48-22 48-48.89 0-31.11-34.3-65.26-44.9-77.66zM387 287.9L155.61 58.36a36 36 0 00-51 0l-5.15 5.15a36 36 0 000 51l52.89 52.89 57-57L56.33 263.2a28 28 0 00.3 40l131.2 126a28.05 28.05 0 0038.9-.1c37.8-36.6 118.3-114.5 126.7-122.9 5.8-5.8 18.2-7.1 28.7-7.1h.3a6.53 6.53 0 004.57-11.2z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"})),$o=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{d:"M208 352h-64a96 96 0 010-192h64M304 160h64a96 96 0 010 192h-64M163.29 256h187.42",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"36"})),Uo=()=>i("svg",{width:"100%",height:"100%",viewBox:"0 0 512 512",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"1.41421"}},i("path",{d:"M432,240l-240.5,0c-8.8,0 -16,7.2 -16,16c0,8.8 7.2,16 16,16l240.5,0c8.8,0 16,-7.2 16,-16c0,-8.8 -7.2,-16 -16,-16Zm0,124l-240.5,0c-8.8,0 -16,7.2 -16,16c0,8.8 7.2,16 16,16l240.5,0c8.8,0 16,-7.2 16,-16c0,-8.8 -7.2,-16 -16,-16Zm-240.5,-216l240.5,0c8.8,0 16,-7.2 16,-16c0,-8.8 -7.2,-16 -16,-16l-240.5,0c-8.8,0 -16,7.2 -16,16c0,8.8 7.2,16 16,16Z",style:{fillRule:"nonzero",fill:"currentColor"}}),i("path",{d:"M80.784,159.32l14.784,0l0,-46.896c0,-1.408 0.048,-2.832 0.144,-4.272l-12.288,10.512c-0.32,0.256 -0.64,0.44 -0.96,0.552c-0.32,0.112 -0.624,0.168 -0.912,0.168c-0.48,0 -0.912,-0.104 -1.296,-0.312c-0.384,-0.208 -0.672,-0.456 -0.864,-0.744l-2.688,-3.696l20.448,-17.712l6.96,0l0,62.4l13.536,0l0,6.528l-36.864,0l0,-6.528Z",style:{fillRule:"nonzero",fill:"currentColor"}}),i("path",{d:"M95.856,221.296c2.912,0 5.632,0.432 8.16,1.296c2.528,0.864 4.712,2.12 6.552,3.768c1.84,1.648 3.288,3.656 4.344,6.024c1.056,2.368 1.584,5.056 1.584,8.064c0,2.56 -0.384,4.928 -1.152,7.104c-0.768,2.176 -1.808,4.264 -3.12,6.264c-1.312,2 -2.824,3.936 -4.536,5.808c-1.712,1.872 -3.528,3.784 -5.448,5.736l-18.096,18.528c1.28,-0.352 2.576,-0.632 3.888,-0.84c1.312,-0.208 2.576,-0.312 3.792,-0.312l23.04,0c0.928,0 1.664,0.272 2.208,0.816c0.544,0.544 0.816,1.248 0.816,2.112l0,5.184l-45.888,0l0,-2.928c0,-0.608 0.12,-1.232 0.36,-1.872c0.24,-0.64 0.632,-1.232 1.176,-1.776l22.032,-22.128c1.824,-1.856 3.488,-3.64 4.992,-5.352c1.504,-1.712 2.792,-3.432 3.864,-5.16c1.072,-1.728 1.896,-3.48 2.472,-5.256c0.576,-1.776 0.864,-3.672 0.864,-5.688c0,-2.016 -0.32,-3.784 -0.96,-5.304c-0.64,-1.52 -1.52,-2.776 -2.64,-3.768c-1.12,-0.992 -2.432,-1.736 -3.936,-2.232c-1.504,-0.496 -3.12,-0.744 -4.848,-0.744c-1.728,0 -3.328,0.256 -4.8,0.768c-1.472,0.512 -2.776,1.224 -3.912,2.136c-1.136,0.912 -2.096,1.992 -2.88,3.24c-0.784,1.248 -1.336,2.624 -1.656,4.128c-0.256,0.928 -0.64,1.6 -1.152,2.016c-0.512,0.416 -1.184,0.624 -2.016,0.624c-0.16,0 -0.328,-0.008 -0.504,-0.024c-0.176,-0.016 -0.376,-0.04 -0.6,-0.072l-4.464,-0.768c0.448,-3.136 1.312,-5.912 2.592,-8.328c1.28,-2.416 2.904,-4.44 4.872,-6.072c1.968,-1.632 4.224,-2.872 6.768,-3.72c2.544,-0.848 5.288,-1.272 8.232,-1.272Z",style:{fillRule:"nonzero",fill:"currentColor"}}),i("path",{d:"M96.768,345.296c2.912,0 5.6,0.416 8.064,1.248c2.464,0.832 4.584,2.016 6.36,3.552c1.776,1.536 3.16,3.392 4.152,5.568c0.992,2.176 1.488,4.592 1.488,7.248c0,2.176 -0.28,4.12 -0.84,5.832c-0.56,1.712 -1.36,3.216 -2.4,4.512c-1.04,1.296 -2.296,2.392 -3.768,3.288c-1.472,0.896 -3.12,1.616 -4.944,2.16c4.48,1.184 7.848,3.168 10.104,5.952c2.256,2.784 3.384,6.272 3.384,10.464c0,3.168 -0.6,6.016 -1.8,8.544c-1.2,2.528 -2.84,4.68 -4.92,6.456c-2.08,1.776 -4.504,3.136 -7.272,4.08c-2.768,0.944 -5.736,1.416 -8.904,1.416c-3.648,0 -6.768,-0.456 -9.36,-1.368c-2.592,-0.912 -4.784,-2.168 -6.576,-3.768c-1.792,-1.6 -3.264,-3.496 -4.416,-5.688c-1.152,-2.192 -2.128,-4.568 -2.928,-7.128l3.648,-1.536c0.672,-0.288 1.344,-0.432 2.016,-0.432c0.64,0 1.208,0.136 1.704,0.408c0.496,0.272 0.872,0.696 1.128,1.272c0.064,0.128 0.128,0.264 0.192,0.408c0.064,0.144 0.128,0.296 0.192,0.456c0.448,0.928 0.992,1.976 1.632,3.144c0.64,1.168 1.504,2.264 2.592,3.288c1.088,1.024 2.44,1.888 4.056,2.592c1.616,0.704 3.624,1.056 6.024,1.056c2.4,0 4.504,-0.392 6.312,-1.176c1.808,-0.784 3.312,-1.8 4.512,-3.048c1.2,-1.248 2.104,-2.64 2.712,-4.176c0.608,-1.536 0.912,-3.056 0.912,-4.56c0,-1.856 -0.248,-3.552 -0.744,-5.088c-0.496,-1.536 -1.392,-2.864 -2.688,-3.984c-1.296,-1.12 -3.088,-2 -5.376,-2.64c-2.288,-0.64 -5.224,-0.96 -8.808,-0.96l0,-6.192c2.912,-0.032 5.4,-0.352 7.464,-0.96c2.064,-0.608 3.752,-1.44 5.064,-2.496c1.312,-1.056 2.264,-2.32 2.856,-3.792c0.592,-1.472 0.888,-3.104 0.888,-4.896c0,-1.984 -0.312,-3.712 -0.936,-5.184c-0.624,-1.472 -1.48,-2.688 -2.568,-3.648c-1.088,-0.96 -2.376,-1.68 -3.864,-2.16c-1.488,-0.48 -3.096,-0.72 -4.824,-0.72c-1.728,0 -3.328,0.256 -4.8,0.768c-1.472,0.512 -2.776,1.224 -3.912,2.136c-1.136,0.912 -2.088,2 -2.856,3.264c-0.768,1.264 -1.344,2.632 -1.728,4.104c-0.256,0.928 -0.64,1.6 -1.152,2.016c-0.512,0.416 -1.168,0.624 -1.968,0.624c-0.16,0 -0.328,-0.008 -0.504,-0.024c-0.176,-0.016 -0.376,-0.04 -0.6,-0.072l-4.464,-0.768c0.448,-3.136 1.312,-5.912 2.592,-8.328c1.28,-2.416 2.904,-4.44 4.872,-6.072c1.968,-1.632 4.224,-2.872 6.768,-3.72c2.544,-0.848 5.288,-1.272 8.232,-1.272Z",style:{fillRule:"nonzero",fill:"currentColor"}})),Ko=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("path",{d:"M430.11 347.9c-6.6-6.1-16.3-7.6-24.6-9-11.5-1.9-15.9-4-22.6-10-14.3-12.7-14.3-31.1 0-43.8l30.3-26.9c46.4-41 46.4-108.2 0-149.2-34.2-30.1-80.1-45-127.8-45-55.7 0-113.9 20.3-158.8 60.1-83.5 73.8-83.5 194.7 0 268.5 41.5 36.7 97.5 55 152.9 55.4h1.7c55.4 0 110-17.9 148.8-52.4 14.4-12.7 11.99-36.6.1-47.7z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}),i("circle",{cx:"144",cy:"208",r:"32",fill:"currentColor"}),i("circle",{cx:"152",cy:"311",r:"32",fill:"currentColor"}),i("circle",{cx:"224",cy:"144",r:"32",fill:"currentColor"}),i("circle",{cx:"256",cy:"367",r:"48",fill:"currentColor"}),i("circle",{cx:"328",cy:"144",r:"32",fill:"currentColor"})),Vo=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},i("circle",{cx:"92",cy:"256",r:"28",style:{fill:"currentColor"}}),i("circle",{cx:"92",cy:"132",r:"28",style:{fill:"currentColor"}}),i("circle",{cx:"92",cy:"380",r:"28",style:{fill:"currentColor"}}),i("path",{style:{fill:"currentColor"},d:"M432 240H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16zM432 364H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16zM191.5 148H432c8.8 0 16-7.2 16-16s-7.2-16-16-16H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16z"})),Fo=({align:t,list:o,switchToolbarActions:e,disabledTitle:n,bold:r,italic:s,strikethrough:l,underline:c,link:h,onExecCommand:d,toggleLink:u})=>{const f=()=>i("stylo-toolbar-separator",null);return i(a,null,i("stylo-toolbar-text",{disabledTitle:n,bold:"bold"===r,italic:"italic"===s,underline:"underline"===c,strikethrough:"strikethrough"===l,onExecCommand:t=>d(t)}),f(),(()=>{if(ft.state.toolbar.style.fontSize)return i(a,null,i("stylo-toolbar-button",{onAction:()=>e(F.FONT_SIZE),label:wt.state.toolbar.style_font_size},i("span",null,"A",i("small",null,"A"))),f())})(),(()=>{const t=[i("stylo-toolbar-button",{onAction:()=>e(F.COLOR),label:wt.state.toolbar.style_color},i(Ko,null))];return ft.state.toolbar.style.backgroundColor&&t.push(i("stylo-toolbar-button",{onAction:()=>e(F.BACKGROUND_COLOR),label:wt.state.toolbar.style_background},i(Bo,null))),t})(),f(),(()=>{if(ft.state.toolbar.style.align)return i("stylo-toolbar-button",{onAction:()=>e(F.ALIGNMENT),label:wt.state.toolbar.style_align},i(t===U.LEFT?No:t===U.CENTER?Wo:Eo,null))})(),(()=>{if(ft.state.toolbar.style.list)return i("stylo-toolbar-button",{onAction:()=>e(F.LIST),label:wt.state.toolbar.style_list},i(o===K.UNORDERED?Vo:Uo,null))})(),(()=>{if(o||t)return f()})(),i("stylo-toolbar-button",{onAction:u,cssClass:h?"active":void 0,label:wt.state.toolbar.link},i($o,null)))};let Zo=class{constructor(t){e(this,t),this.toolbarActivated=n(this,"toolbarActivated",7),this.linkCreated=n(this,"linkCreated",7),this.styleDidChange=n(this,"styleDidChange",7),this.bold=void 0,this.italic=void 0,this.underline=void 0,this.strikethrough=void 0,this.list=void 0,this.fontSize=void 0,this.disabledTitle=!1,this.toolsActivated=!1,this.displayToolsActivated=!1,this.debounceDisplayToolsActivated=q((()=>{this.displayToolsActivated=!0,this.toolbarActivated.emit(!0)})),this.selection=null,this.selectionParagraph=void 0,this.anchorLink=null,this.link=!1,this.toolbarActions=F.STYLE,this.rtl=ot(),this.startSelection=t=>{const o=t.composedPath().includes(this.el);o||(!this.displayToolsActivated||o?this.anchorEvent={$event:t,composedPath:t.composedPath()}:this.reset(!0))},this.toggleLink=()=>{this.link?((t=>{const{range:o,selection:i}=Lt(t);if(!o)return;if(Q())return void(t=>{const o=y(t.anchorNode);o&&"a"===o.nodeName.toLowerCase()&&(o.parentElement.insertBefore(document.createTextNode(o.textContent),o),o.parentElement.removeChild(o))})(i);const e=y(i.anchorNode),n=o.extractContents();e.parentElement.replaceChild(n,e)})(this.containerRef),this.reset(!0)):this.openLink()},this.switchToolbarActions=t=>this.toolbarActions=t,this.onExecCommand=t=>{var o;t&&t.detail&&(this.onAttributesChangesInitStyle(),"native"===ft.state.toolbar.command?"style"===(o=t.detail).cmd?(t=>{const o=t.detail;switch(document.execCommand("styleWithCSS",!1,!0),o.style){case"color":document.execCommand("foreColor",!1,o.value);break;case"background-color":document.execCommand("backColor",!1,o.value);break;case"font-size":document.execCommand("fontSize",!1,$[o.value.replace("-","_").toUpperCase()]);break;case"font-weight":document.execCommand("bold",!1,null);break;case"font-style":document.execCommand("italic",!1,null);break;case"text-decoration":document.execCommand("line-through"===o.value?"strikeThrough":"underline",!1,null)}})(o):"list"===o.cmd&&(t=>{switch(t.detail.type){case"ol":document.execCommand("insertOrderedList",!1,null);break;case"ul":document.execCommand("insertUnorderedList",!1,null)}})(o):function(t,o,i){document&&t&&("style"===o.cmd?Ho(t,o.detail,i):"list"===o.cmd&&function(t,o,i){const e=t.anchorNode;if(!e)return;const n=y(b({element:e,container:i}));n&&(n.nodeName.toLowerCase()!==o.type?["ol","ul","dl"].includes(n.nodeName.toLowerCase())?(function(t,o,i){const e=document.createElement(i);e.append(...Array.from(t.childNodes)),Array.from(t.attributes).forEach((t=>e.setAttribute(t.nodeName,t.nodeValue))),t.parentElement.insertBefore(e,t),o.selectAllChildren(e)}(n,t,o.type),_o(n,!1)):function(t,o,i){const e=o.getRangeAt(0),n=e.extractContents(),r=document.createElement(i),s=document.createElement("li");s.style.cssText=t.style.cssText,s.appendChild(n),r.appendChild(s),e.insertNode(r),o.selectAllChildren(r)}(n,t,o.type):_o(n))}(t,o.detail,i))}(this.selection,t.detail,this.containerRef),("list"===t.detail.cmd||J())&&this.reset(!0),this.selectionParagraph&&this.styleDidChange.emit(y(this.selectionParagraph)))},this.onSelectionChange=this.onSelectionChange.bind(this)}componentWillLoad(){this.initDefaultContentAlign(),this.applyStandaloneConfig()}connectedCallback(){this.addListener()}disconnectedCallback(){this.removeListener()}onContainerRef(){this.containerRef&&(this.removeListener(),this.addListener())}onConfigChange(){this.applyStandaloneConfig()}applyStandaloneConfig(){this.config&&(ft.state.toolbar=Object.assign(Object.assign({},ft.state.toolbar),this.config))}onSelectionChange(){[F.COLOR,F.BACKGROUND_COLOR,F.LINK].includes(this.toolbarActions)||this.displayTools()}onResize(){G()||this.reset(!0)}addListener(){const t=this.containerRef||document;null==t||t.addEventListener("mousedown",this.startSelection,{passive:!0}),null==t||t.addEventListener("touchstart",this.startSelection,{passive:!0})}removeListener(){const t=this.containerRef||document;null==t||t.removeEventListener("mousedown",this.startSelection),null==t||t.removeEventListener("touchstart",this.startSelection)}displayTools(){let t=xt(this.containerRef);if(!this.anchorEvent)return void this.reset(!1);const{$event:o,composedPath:i}=this.anchorEvent;if(this.containerRef&&!this.containerRef.contains(o.target)&&!this.containerRef.contains(i[0]))return void this.reset(!1);if(!t||!t.toString()||t.toString().trim().length<=0)return void this.reset(!1);const e=this.activateToolbar(t);if(this.setToolsActivated(e),this.toolsActivated&&(this.selection=t,this.selectionParagraph=b({element:this.selection?this.selection.anchorNode:document.activeElement,container:this.containerRef}),t.rangeCount>0)){const o=t.getRangeAt(0);this.anchorLink={range:o.cloneRange()},this.setToolbarAnchorPosition()}}setToolbarAnchorPosition(){if(!this.tools)return;const{$event:t}=this.anchorEvent,o=X(t).clientX,i=X(t).clientY,{range:e}=Lt(this.containerRef),n=null==e?void 0:e.getBoundingClientRect(),r=n?n.x+n.width/2:o,s=n?n.y:i,{x:a,y:l}=this.el.shadowRoot.host.getBoundingClientRect(),c=r-a,h=s-l,d=i>100?"above":"under",{innerWidth:u}=window,f=this.tools.offsetWidth/2+32>c,p=u>0&&((null==n?void 0:n.left)||o)-40>u-(this.tools.offsetWidth/2+32);this.toolsPosition={top:"above"===d?h-16:h+((null==n?void 0:n.height)||0)+8,left:p?u-a-this.tools.offsetWidth-32+"px":f?"32px":`${c}px`,right:"auto",position:d,align:p?"end":f?"start":"center",anchorLeft:f?c-32:p?c-(u-32-this.tools.offsetWidth):this.tools.offsetWidth/2}}activateToolbar(t){const o=t&&t.toString()&&t.toString().length>0;return o&&(this.initStyle(t),this.initLink(t)),o}initStyle(t){if(!t||t.rangeCount<=0)return;const o=V(t);o&&this.initStyleForNode(o)}initStyleForNode(t){this.bold=void 0,this.italic=void 0,this.underline=void 0,this.strikethrough=void 0,this.list=void 0,this.fontSize=void 0,this.initDefaultContentAlign(),this.findStyle(t)}initDefaultContentAlign(){this.align=this.rtl?U.RIGHT:U.LEFT}findStyle(t){if(t&&!(t instanceof ShadowRoot)&&"HTML"!==t.nodeName.toUpperCase()&&"BODY"!==t.nodeName.toUpperCase()){var o;if(void 0===this.bold&&(this.bold=(o=y(t),To(o,"b")||To(o,"strong")||"bold"===o.style.fontWeight?"bold":"initial"===o.style.fontWeight?"initial":void 0)),void 0===this.italic&&(this.italic=(t=>{if(To(t,"i"))return"italic";if(To(t,"em"))return"italic";if("italic"===t.style.fontStyle)return"italic";if("initial"===t.style.fontStyle)return"initial";if(!t.hasChildNodes())return;const o=t.children;if(o&&o.length>0){const t=Array.from(o).find((t=>"italic"===t.style.fontStyle||"initial"===t.style.fontStyle));if(t)return"italic"===t.style.fontStyle?"italic":"initial"}})(y(t))),void 0===this.underline&&(this.underline=(t=>{var o,i,e,n,r;if(To(t,"u"))return"underline";if((null===(o=t.style.textDecoration)||void 0===o?void 0:o.indexOf("underline"))>-1||(null===(i=t.style.textDecorationLine)||void 0===i?void 0:i.indexOf("underline"))>-1)return"underline";if((null===(e=t.style.textDecoration)||void 0===e?void 0:e.indexOf("initial"))>-1||(null===(n=t.style.textDecorationLine)||void 0===n?void 0:n.indexOf("initial"))>-1)return"initial";if(!t.hasChildNodes())return;const s=t.children;if(s&&s.length>0){const t=Array.from(s).find((t=>{var o,i,e;return(null===(o=t.style.textDecoration)||void 0===o?void 0:o.indexOf("underline"))>-1||(null===(i=t.style.textDecorationLine)||void 0===i?void 0:i.indexOf("underline"))>-1||(null===(e=t.style.textDecorationLine)||void 0===e?void 0:e.indexOf("initial"))>-1}));if(t)return(null===(r=t.style.fontStyle)||void 0===r?void 0:r.indexOf("underline"))>-1?"underline":"initial"}})(y(t))),void 0===this.strikethrough&&(this.strikethrough=(t=>{var o,i,e,n,r;if(To(t,"strike"))return"strikethrough";if((null===(o=t.style.textDecoration)||void 0===o?void 0:o.indexOf("line-through"))>-1||(null===(i=t.style.textDecorationLine)||void 0===i?void 0:i.indexOf("line-through"))>-1)return"strikethrough";if((null===(e=t.style.textDecoration)||void 0===e?void 0:e.indexOf("initial"))>-1||(null===(n=t.style.textDecorationLine)||void 0===n?void 0:n.indexOf("initial"))>-1)return"initial";if(!t.hasChildNodes())return;const s=t.children;if(s&&s.length>0){const t=Array.from(s).find((t=>{var o,i,e;return(null===(o=t.style.textDecoration)||void 0===o?void 0:o.indexOf("line-through"))>-1||(null===(i=t.style.textDecorationLine)||void 0===i?void 0:i.indexOf("line-through"))>-1||(null===(e=t.style.textDecorationLine)||void 0===e?void 0:e.indexOf("initial"))>-1}));if(t)return(null===(r=t.style.fontStyle)||void 0===r?void 0:r.indexOf("line-through"))>-1?"strikethrough":"initial"}})(y(t))),void 0===this.list&&(this.list=(t=>{if(t)return t.nodeName&&"li"===t.nodeName.toLowerCase()&&t.parentElement&&t.parentElement.nodeName?"ol"===t.parentElement.nodeName.toLowerCase()?K.ORDERED:"ul"===t.parentElement.nodeName.toLowerCase()?K.UNORDERED:void 0:void 0})(y(t))),void 0===this.fontSize&&(this.fontSize=(t=>{if(t)return t.hasAttribute("size")?t.getAttribute("size"):""!==t.style.fontSize?$[t.style.fontSize.replace("-","_").toUpperCase()]:void 0})(y(t))),M({element:t,container:this.containerRef})){const o=t.nodeName.toUpperCase();return this.disabledTitle="H1"===o||"H2"===o||"H3"===o||"H4"===o||"H5"===o||"H6"===o,void(this.align=(t=>{const o=window.getComputedStyle(t);return"center"===o.textAlign?U.CENTER:"right"===o.textAlign?U.RIGHT:"left"===o.textAlign?U.LEFT:ot()?U.RIGHT:U.LEFT})(y(t)))}this.findStyle(t.parentNode)}}initLink(t){if(!t)return;let o=t.anchorNode;o&&(3===o.nodeType&&(o=o.parentElement),this.link=o.nodeName&&"a"===o.nodeName.toLowerCase())}reset(t,o){t&&Z(),this.setToolsActivated(!1),t&&this.toolbarActivated.emit(!1),this.selection=null,this.selectionParagraph=null,this.toolbarActions=F.STYLE,this.anchorLink=null,this.link=!1,o&&document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}openLink(){this.toolbarActions=F.LINK}setToolsActivated(t){this.toolsActivated=t,t?this.debounceDisplayToolsActivated():this.displayToolsActivated=!1}onAttributesChangesInitStyle(){const t=V(this.selection);if(!t)return;const o=new MutationObserver((()=>{o.disconnect(),this.initStyleForNode(t)}));o.observe(t,{attributes:!0})}render(){var t,o;const e=(null===(t=this.toolsPosition)||void 0===t?void 0:t.position)||"above";return i("div",{class:this.displayToolsActivated?"tools tools-activated":"tools",ref:t=>this.tools=t,style:this.toolsPosition?{"--actions-top":`${this.toolsPosition.top}px`,"--actions-left":this.toolsPosition.left,"--actions-right":this.toolsPosition.right,"--actions-translate-x":"center"===this.toolsPosition.align?"-50%":"0","--actions-translate-y":"above"===this.toolsPosition.position?"-100%":"0"}:void 0},i("stylo-toolbar-triangle",{class:"above"===e?"bottom":"top",style:{"--stylo-toolbar-triangle-start":`${null===(o=this.toolsPosition)||void 0===o?void 0:o.anchorLeft}px`}}),this.renderActions())}renderActions(){return this.toolbarActions===F.LINK?i("stylo-toolbar-link",{containerRef:this.containerRef,toolbarActions:this.toolbarActions,anchorLink:this.anchorLink,linkCreated:this.linkCreated,onLinkModified:t=>this.reset(t.detail)}):this.toolbarActions===F.COLOR||this.toolbarActions===F.BACKGROUND_COLOR?i("stylo-toolbar-color",{containerRef:this.containerRef,action:this.toolbarActions===F.BACKGROUND_COLOR?"background-color":"color",onExecCommand:this.onExecCommand}):this.toolbarActions===F.ALIGNMENT?i("stylo-toolbar-align",{containerRef:this.containerRef,anchorEvent:this.anchorEvent.$event,align:this.align,onAlignModified:()=>this.reset(!0)}):this.toolbarActions===F.LIST?i("stylo-toolbar-list",{list:this.list,onExecCommand:this.onExecCommand}):this.toolbarActions===F.FONT_SIZE?i("stylo-toolbar-font-size",{fontSize:this.fontSize,onExecCommand:this.onExecCommand}):i(Fo,{align:this.align,list:this.list,switchToolbarActions:this.switchToolbarActions,bold:this.bold,disabledTitle:this.disabledTitle,italic:this.italic,strikethrough:this.strikethrough,underline:this.underline,link:this.link,onExecCommand:this.onExecCommand,toggleLink:this.toggleLink})}get el(){return s(this)}static get watchers(){return{containerRef:["onContainerRef"],config:["onConfigChange"]}}};Zo.style=":host{direction:ltr;position:absolute;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}div.tools{display:flex;justify-content:center;align-items:center;visibility:hidden;opacity:0;-webkit-animation:0s ease 0s 1 normal none running none;animation:0s ease 0s 1 normal none running none;transition:opacity 0.1s ease-out;pointer-events:none;position:absolute;top:var(--actions-top);left:var(--actions-left);right:var(--actions-right);transform:translate(var(--actions-translate-x), var(--actions-translate-y));z-index:var(--stylo-toolbar-zindex, 2);--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border);background:var(--stylo-background, var(--white));color:var(--stylo-color, var(--white-contrast));border-radius:var(--stylo-border, 4px);padding:var(--stylo-toolbar-padding, 0 8px);min-width:var(--stylo-toolbar-min-width, 280px);min-height:var(--stylo-toolbar-min-height, 44px)}div.tools.tools-activated{visibility:visible;opacity:1}";let Yo=class{constructor(t){e(this,t),this.alignModified=n(this,"alignModified",7)}justifyContent(t,o){t.stopPropagation(),"native"===ft.state.toolbar.command?(t=>{switch(t){case U.CENTER:document.execCommand("justifyCenter",!1,null);break;case U.RIGHT:document.execCommand("justifyRight",!1,null);break;default:document.execCommand("justifyLeft",!1,null)}})(o):((t,o,i)=>{const e=y(this.anchorEvent.target),n=y(b({element:e,container:o}));n&&(n.style.textAlign=(null==n?void 0:n.style.textAlign)===i?"":i)})(0,this.containerRef,o),this.alignModified.emit()}render(){return i(r,null,i("stylo-toolbar-button",{label:wt.state.toolbar.align_left,onAction:t=>this.justifyContent(t.detail,U.LEFT),class:this.align===U.LEFT?"active":void 0},i(No,null)),i("stylo-toolbar-button",{label:wt.state.toolbar.align_center,onAction:t=>this.justifyContent(t.detail,U.CENTER),class:this.align===U.CENTER?"active":void 0},i(Wo,null)),i("stylo-toolbar-button",{label:wt.state.toolbar.align_right,onAction:t=>this.justifyContent(t.detail,U.RIGHT),class:this.align===U.RIGHT?"active":void 0},i(Eo,null)))}};Yo.style=":host{display:flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}";let Xo=class{constructor(t){e(this,t),this.action=n(this,"action",7),this.disableAction=!1}render(){return i("button",{onMouseDown:t=>t.stopPropagation(),onTouchStart:t=>t.stopPropagation(),onClick:t=>this.action.emit(t),disabled:this.disableAction,class:this.cssClass,"aria-label":this.label},i("slot",null))}};Xo.style=".host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}button{pointer-events:initial;cursor:pointer;margin:0;padding:4px 6px 6px;height:40px;z-index:var(--stylo-toolbar-button-zindex, 2);display:flex;justify-content:center;align-items:center;border:0;color:var(--stylo-toolbar-button-color, black);transition:0.1s background-color, 0.1s border-color, 0.1s fill;background:transparent;font-size:var(--stylo-toolbar-button-font-size, 1.4rem);font-family:var(--stylo-toolbar-button-font-family, inherit);-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0}button.active{color:var(--stylo-toolbar-button-color-active, var(--highlight))}button[disabled]{color:var(--stylo-toolbar-button-color-disabled, var(--light));display:var(--stylo-toolbar-button-display-disabled, none)}button.active>div{background-color:var(--stylo-toolbar-button-color-active, var(--highlight))}button[disabled]>div{background-color:var(--stylo-toolbar-button-color-disabled, var(--light))}::slotted(*){pointer-events:none}::slotted(svg){width:20px;height:20px;padding-bottom:2px}";let qo=class{constructor(t){e(this,t),this.execCommand=n(this,"execCommand",7)}componentWillLoad(){this.initColor()}initColor(){const{range:t,selection:o}=Lt(this.containerRef);this.range=t;const i=V(o);if(!i)return;const e=Oo(i,"color"===this.action?"color":"background-color",this.containerRef);if(!e)return;const n=null===window||void 0===window?void 0:window.getComputedStyle(y(e));this.colorRgb=("color"===this.action?n.color:n.backgroundColor).replace("rgb(","").replace(")","")}selectColor(t){const o=xt(this.containerRef);if(!o||!t||!t.detail)return;if(!this.action)return;null==o||o.removeAllRanges(),null==o||o.addRange(this.range);const i=new MutationObserver((()=>{i.disconnect(),this.range=null==o?void 0:o.getRangeAt(0)})),e=V(o);e&&(i.observe(e,{childList:!0}),this.execCommand.emit({cmd:"style",detail:{style:this.action,value:t.detail.hex,initial:o=>{const i=Y(t.detail.hex);return o&&(o.style[this.action]===t.detail.hex||o.style[this.action]===`rgb(${i})`)}}}))}render(){return i("stylo-color",{"color-rgb":this.colorRgb,onColorChange:t=>this.selectColor(t),palette:ft.state.toolbar.palette})}};qo.style=":host{padding:4px 0}:host stylo-color{pointer-events:all}";let Go=class{constructor(t){e(this,t),this.execCommand=n(this,"execCommand",7)}modifyFontSize(t,o){t.stopPropagation();const i=Object.keys($).find((t=>$[t]===o));this.execCommand.emit({cmd:"style",detail:{style:"font-size",value:i.toLowerCase().replace("_","-"),initial:t=>t&&t.style["font-size"]===i.toLowerCase().replace("_","-")}}),this.fontSize=o}render(){return i(r,null,this.renderAction($.X_SMALL),this.renderAction($.SMALL),this.renderAction($.MEDIUM),this.renderAction($.LARGE),this.renderAction($.X_LARGE),this.renderAction($.XX_LARGE),this.renderAction($.XXX_LARGE))}renderAction(t){return i("stylo-toolbar-button",{label:`${wt.state.toolbar.align_center} ${t}`,onAction:o=>this.modifyFontSize(o.detail,t),class:this.fontSize===t?"active":void 0},i("span",null,t.toString()))}};Go.style=":host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff;display:flex}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}stylo-toolbar-button:first-of-type{--stylo-toolbar-button-font-size:0.8rem}stylo-toolbar-button:nth-of-type(2){--stylo-toolbar-button-font-size:1rem}stylo-toolbar-button:nth-of-type(3){--stylo-toolbar-button-font-size:1.2rem}stylo-toolbar-button:nth-of-type(5){--stylo-toolbar-button-font-size:1.6rem}stylo-toolbar-button:nth-of-type(6){--stylo-toolbar-button-font-size:1.8rem}stylo-toolbar-button:nth-of-type(7){--stylo-toolbar-button-font-size:2rem}";let Jo=class{constructor(t){e(this,t),this.linkModified=n(this,"linkModified",7)}componentDidLoad(){setTimeout((()=>{var t;return null===(t=this.input)||void 0===t?void 0:t.focus()}),250)}handleLinkInput(t){this.linkUrl=t.target.value}createLink(){if(!this.anchorLink)return;const{range:t}=this.anchorLink;if(!t)return;if(!this.linkUrl||this.linkUrl.length<=0)return;(({range:t,linkUrl:o})=>{const i=(({fragment:t,linkUrl:o})=>{const i=document.createElement("a");return i.appendChild(t),i.href=o,i.rel="noopener noreferrer",i})({fragment:t.extractContents(),linkUrl:o});t.insertNode(i)})({range:t,linkUrl:this.linkUrl});const o=b({element:t.commonAncestorContainer,container:this.containerRef});o&&this.linkCreated.emit(y(o))}handleLinkEnter(t){t&&(this.toolbarActions!==F.STYLE||"backspace"!==t.key.toLowerCase()&&"delete"!==t.key.toLowerCase()?this.toolbarActions===F.LINK&&"enter"===t.key.toLowerCase()&&(this.createLink(),this.linkModified.emit(!0)):this.linkModified.emit(!1))}render(){return i(r,null,i("input",{ref:t=>this.input=t,placeholder:"Add a link...",onInput:t=>this.handleLinkInput(t),onKeyUp:t=>this.handleLinkEnter(t)}))}};Jo.style=":host{width:100%;height:100%;z-index:var(--stylo-toolbar-link-zindex, 2)}:host input{pointer-events:visible;background:transparent;width:97%;height:100%;color:var(--stylo-toolbar-link-color, black);border:none;outline:0;font-size:16px}:host input::-moz-placeholder{color:var(--stylo-toolbar-link-placeholder-color, black)}:host input:-ms-input-placeholder{color:var(--stylo-toolbar-link-placeholder-color, black)}:host input::placeholder{color:var(--stylo-toolbar-link-placeholder-color, black)}";let Qo=class{constructor(t){e(this,t),this.execCommand=n(this,"execCommand",7)}toggleList(t,o){t.stopPropagation(),this.execCommand.emit({cmd:"list",detail:{type:o}})}render(){return i(r,null,i("stylo-toolbar-button",{label:wt.state.toolbar.list_ol,onAction:t=>this.toggleList(t.detail,"ol"),class:this.list===K.ORDERED?"active":void 0},i(Uo,null)),i("stylo-toolbar-button",{label:wt.state.toolbar.list_ul,onAction:t=>this.toggleList(t.detail,"ul"),class:this.list===K.UNORDERED?"active":void 0},i(Vo,null)))}};Qo.style=":host{display:flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button.active{--stylo-toolbar-button-color:var(--stylo-toolbar-button-color-active, var(--highlight))}";let ti=class{constructor(t){e(this,t)}render(){return i("div",{class:"separator"})}};ti.style=":host{--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}div.separator{display:inline-block;vertical-align:middle;width:1px;min-width:1px;margin:0 6px;height:24px;background:var(--stylo-toolbar-separator-background, var(--light))}";let oi=class{constructor(t){e(this,t),this.execCommand=n(this,"execCommand",7),this.disabledTitle=!1}styleBold(t){t.stopPropagation(),this.execCommand.emit({cmd:"style",detail:{style:"font-weight",value:"bold",initial:t=>t&&"bold"===t.style["font-weight"]}})}styleItalic(t){t.stopPropagation(),this.execCommand.emit({cmd:"style",detail:{style:"font-style",value:"italic",initial:t=>t&&"italic"===t.style["font-style"]}})}styleUnderline(t){t.stopPropagation(),this.execCommand.emit({cmd:"style",detail:{style:"text-decoration",value:"underline",initial:t=>t&&"underline"===t.style["text-decoration"]}})}styleStrikeThrough(t){t.stopPropagation(),this.execCommand.emit({cmd:"style",detail:{style:"text-decoration",value:"line-through",initial:t=>t&&"line-through"===t.style["text-decoration"]}})}render(){return i(r,null,i("stylo-toolbar-button",{label:wt.state.toolbar.bold,onAction:t=>this.styleBold(t.detail),disableAction:this.disabledTitle,cssClass:this.bold?"active":void 0,class:"bold"},i("span",null,"B")),i("stylo-toolbar-button",{label:wt.state.toolbar.italic,onAction:t=>this.styleItalic(t.detail),cssClass:this.italic?"active":void 0,class:"italic"},i("span",null,"I")),i("stylo-toolbar-button",{label:wt.state.toolbar.underline,onAction:t=>this.styleUnderline(t.detail),cssClass:this.underline?"active":void 0,class:this.underline?"active underline":"underline"},i("span",null,"U")),i("stylo-toolbar-button",{label:wt.state.toolbar.strikethrough,onAction:t=>this.styleStrikeThrough(t.detail),cssClass:this.strikethrough?"active":void 0,class:"strikethrough"},i("span",{style:{"text-decoration":"line-through"}},"S")))}};oi.style=":host{display:inline-flex;--light:#f4f5f8;--light-contrast:#000000;--medium:#6e6d6f;--medium-contrast:#000000;--black:#000000;--black-contrast:#ffffff;--white:#ffffff;--white-contrast:#000000;--highlight:#3880ff;--highlight-rgb:56, 128, 255;--highlight-contrast:#ffffff}stylo-toolbar-button{margin:0 2px}stylo-toolbar-button.italic span{font-style:italic}stylo-toolbar-button.underline.active span{border-bottom:1px solid var(--stylo-toolbar-button-color-active, var(--highlight))}stylo-toolbar-button.underline span{border-bottom:1px solid var(--stylo-toolbar-button-color, black)}";let ii=class{constructor(t){e(this,t)}render(){if(!this.mobile)return i("div",{class:"triangle"})}};ii.style=':host(.top) div.triangle{bottom:unset;top:-34px;transform:scale(0.7) translate(50%, 0)}div.triangle{z-index:1;position:absolute;bottom:-34px;left:var(--stylo-toolbar-triangle-start);width:40px;height:40px;overflow:hidden;transform:scale(0.7) rotate(180deg) translate(50%, 0)}div.triangle:after{content:"";position:absolute;width:24px;height:24px;background:white;transform:rotate(45deg);top:28px;left:8px;--box-shadow:0 4px 16px 0 rgba(0, 0, 0, 0.12);box-shadow:var(--stylo-box-shadow, var(--box-shadow));border:var(--stylo-border)}';export{At as stylo_add,zt as stylo_color,Rt as stylo_color_input,xo as stylo_editor,Ao as stylo_list,zo as stylo_menus,Ro as stylo_plugins,Zo as stylo_toolbar,Yo as stylo_toolbar_align,Xo as stylo_toolbar_button,qo as stylo_toolbar_color,Go as stylo_toolbar_font_size,Jo as stylo_toolbar_link,Qo as stylo_toolbar_list,ti as stylo_toolbar_separator,oi as stylo_toolbar_text,ii as stylo_toolbar_triangle}