class s{constructor(s,{config:t,callback:i,skipInitial:h}){this.t=!1,this.i=!1,this.callback=()=>!0,(this.h=s).addController(this),this.o=t,this.t=null!=h?h:this.t,this.callback=null!=i?i:this.callback,window.PerformanceObserver?this.l=new PerformanceObserver((s=>{this.handleChanges(s.getEntries(),s),this.h.requestUpdate()})):console.warn("PerformanceController error: browser does not support PerformanceObserver.")}handleChanges(s,t){this.value=this.callback(s,this.l,t)}hostConnected(){this.observe()}hostDisconnected(){this.disconnect()}async hostUpdated(){const s=this.l.takeRecords();(s.length||!this.t&&this.i)&&this.handleChanges(s),this.i=!1}flush(){const s=this.l.takeRecords();s.length&&(this.handleChanges(s),this.h.requestUpdate())}observe(){this.l.observe(this.o),this.i=!0,this.h.requestUpdate()}disconnect(){this.l.disconnect()}}export{s as PerformanceController};
//# sourceMappingURL=performance_controller.js.map
